import{s as Yc,p as jc}from"./standalone-182a0cd7.js";import{c as en,a as $c}from"./_commonjsHelpers-87174ba5.js";import{B as zc}from"./base-f0edccdd.js";var ui={},Kc={get exports(){return ui},set exports(nn){ui=nn}};(function(nn,Xo){(function(Yt,_i){_i(Xo,Yc)})(en,function(Yt,_i){function qo(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var jt=qo(_i);function sn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function Pe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?sn(Object(i),!0).forEach(function(n){rn(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):sn(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function ve(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ve=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n=typeof Symbol=="function"?Symbol:{},s=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function r(d,_,N){return Object.defineProperty(d,_,{value:N,enumerable:!0,configurable:!0,writable:!0}),d[_]}try{r({},"")}catch{r=function(_,N,b){return _[N]=b}}function c(d,_,N,b){var E=_&&_.prototype instanceof y?_:y,V=Object.create(E.prototype),X=new z(b||[]);return V._invoke=function(K,st,F){var Y="suspendedStart";return function(ft,Qt){if(Y==="executing")throw new Error("Generator is already running");if(Y==="completed"){if(ft==="throw")throw Qt;return nt()}for(F.method=ft,F.arg=Qt;;){var Te=F.delegate;if(Te){var Wt=B(Te,F);if(Wt){if(Wt===a)continue;return Wt}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(Y==="suspendedStart")throw Y="completed",F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);Y="executing";var kt=u(K,st,F);if(kt.type==="normal"){if(Y=F.done?"completed":"suspendedYield",kt.arg===a)continue;return{value:kt.arg,done:F.done}}kt.type==="throw"&&(Y="completed",F.method="throw",F.arg=kt.arg)}}}(d,N,X),V}function u(d,_,N){try{return{type:"normal",arg:d.call(_,N)}}catch(b){return{type:"throw",arg:b}}}t.wrap=c;var a={};function y(){}function g(){}function I(){}var H={};r(H,s,function(){return this});var A=Object.getPrototypeOf,U=A&&A(A(Lt([])));U&&U!==e&&i.call(U,s)&&(H=U);var C=I.prototype=y.prototype=Object.create(H);function $(d){["next","throw","return"].forEach(function(_){r(d,_,function(N){return this._invoke(_,N)})})}function W(d,_){function N(E,V,X,K){var st=u(d[E],d,V);if(st.type!=="throw"){var F=st.arg,Y=F.value;return Y&&typeof Y=="object"&&i.call(Y,"__await")?_.resolve(Y.__await).then(function(ft){N("next",ft,X,K)},function(ft){N("throw",ft,X,K)}):_.resolve(Y).then(function(ft){F.value=ft,X(F)},function(ft){return N("throw",ft,X,K)})}K(st.arg)}var b;this._invoke=function(E,V){function X(){return new _(function(K,st){N(E,V,K,st)})}return b=b?b.then(X,X):X()}}function B(d,_){var N=d.iterator[_.method];if(N===void 0){if(_.delegate=null,_.method==="throw"){if(d.iterator.return&&(_.method="return",_.arg=void 0,B(d,_),_.method==="throw"))return a;_.method="throw",_.arg=new TypeError("The iterator does not provide a 'throw' method")}return a}var b=u(N,d.iterator,_.arg);if(b.type==="throw")return _.method="throw",_.arg=b.arg,_.delegate=null,a;var E=b.arg;return E?E.done?(_[d.resultName]=E.value,_.next=d.nextLoc,_.method!=="return"&&(_.method="next",_.arg=void 0),_.delegate=null,a):E:(_.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,a)}function S(d){var _={tryLoc:d[0]};1 in d&&(_.catchLoc=d[1]),2 in d&&(_.finallyLoc=d[2],_.afterLoc=d[3]),this.tryEntries.push(_)}function Q(d){var _=d.completion||{};_.type="normal",delete _.arg,d.completion=_}function z(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(S,this),this.reset(!0)}function Lt(d){if(d){var _=d[s];if(_)return _.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var N=-1,b=function E(){for(;++N<d.length;)if(i.call(d,N))return E.value=d[N],E.done=!1,E;return E.value=void 0,E.done=!0,E};return b.next=b}}return{next:nt}}function nt(){return{value:void 0,done:!0}}return g.prototype=I,r(C,"constructor",I),r(I,"constructor",g),g.displayName=r(I,l,"GeneratorFunction"),t.isGeneratorFunction=function(d){var _=typeof d=="function"&&d.constructor;return!!_&&(_===g||(_.displayName||_.name)==="GeneratorFunction")},t.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,I):(d.__proto__=I,r(d,l,"GeneratorFunction")),d.prototype=Object.create(C),d},t.awrap=function(d){return{__await:d}},$(W.prototype),r(W.prototype,o,function(){return this}),t.AsyncIterator=W,t.async=function(d,_,N,b,E){E===void 0&&(E=Promise);var V=new W(c(d,_,N,b),E);return t.isGeneratorFunction(_)?V:V.next().then(function(X){return X.done?X.value:V.next()})},$(C),r(C,l,"Generator"),r(C,s,function(){return this}),r(C,"toString",function(){return"[object Generator]"}),t.keys=function(d){var _=[];for(var N in d)_.push(N);return _.reverse(),function b(){for(;_.length;){var E=_.pop();if(E in d)return b.value=E,b.done=!1,b}return b.done=!0,b}},t.values=Lt,z.prototype={constructor:z,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Q),!d)for(var _ in this)_.charAt(0)==="t"&&i.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=void 0)},stop:function(){this.done=!0;var d=this.tryEntries[0].completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var _=this;function N(st,F){return V.type="throw",V.arg=d,_.next=st,F&&(_.method="next",_.arg=void 0),!!F}for(var b=this.tryEntries.length-1;b>=0;--b){var E=this.tryEntries[b],V=E.completion;if(E.tryLoc==="root")return N("end");if(E.tryLoc<=this.prev){var X=i.call(E,"catchLoc"),K=i.call(E,"finallyLoc");if(X&&K){if(this.prev<E.catchLoc)return N(E.catchLoc,!0);if(this.prev<E.finallyLoc)return N(E.finallyLoc)}else if(X){if(this.prev<E.catchLoc)return N(E.catchLoc,!0)}else{if(!K)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return N(E.finallyLoc)}}}},abrupt:function(d,_){for(var N=this.tryEntries.length-1;N>=0;--N){var b=this.tryEntries[N];if(b.tryLoc<=this.prev&&i.call(b,"finallyLoc")&&this.prev<b.finallyLoc){var E=b;break}}E&&(d==="break"||d==="continue")&&E.tryLoc<=_&&_<=E.finallyLoc&&(E=null);var V=E?E.completion:{};return V.type=d,V.arg=_,E?(this.method="next",this.next=E.finallyLoc,a):this.complete(V)},complete:function(d,_){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&_&&(this.next=_),a},finish:function(d){for(var _=this.tryEntries.length-1;_>=0;--_){var N=this.tryEntries[_];if(N.finallyLoc===d)return this.complete(N.completion,N.afterLoc),Q(N),a}},catch:function(d){for(var _=this.tryEntries.length-1;_>=0;--_){var N=this.tryEntries[_];if(N.tryLoc===d){var b=N.completion;if(b.type==="throw"){var E=b.arg;Q(N)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(d,_,N){return this.delegate={iterator:Lt(d),resultName:_,nextLoc:N},this.method==="next"&&(this.arg=void 0),a}},t}function $t(t){return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(t)}function rn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vt(t,e){return function(i){if(Array.isArray(i))return i}(t)||function(i,n){var s=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(s!=null){var o,l,r=[],c=!0,u=!1;try{for(s=s.call(i);!(c=(o=s.next()).done)&&(r.push(o.value),!n||r.length!==n);c=!0);}catch(a){u=!0,l=a}finally{try{c||s.return==null||s.return()}finally{if(u)throw l}}return r}}(t,e)||di(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lt(t){return function(e){if(Array.isArray(e))return pi(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||di(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function di(t,e){if(t){if(typeof t=="string")return pi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?pi(t,e):void 0}}function pi(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function on(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=di(t))||e&&t&&typeof t.length=="number"){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,l=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var c=i.next();return l=c.done,c},e:function(c){r=!0,o=c},f:function(){try{l||i.return==null||i.return()}finally{if(r)throw o}}}}var Ue={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){var t=this.input();if(this.is_WHITESPACE()){do t=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(t){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||t==="\\"){for(;this.offset<this.size;){var e=this.input();if(!this.is_LABEL()&&e!=="\\"){e&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(t,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};Ue.attributeIndex,Ue.attributeListDepth,Ue.matchST_ATTRIBUTE;var fi={T_COMMENT:function(){for(;this.offset<this.size;){var t=this.input();if(t===`
`||t==="\r")return this.tok.T_COMMENT;if(t==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(t==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var t=this.input(),e=this.tok.T_COMMENT;if(t==="*"){if(t=this.input(),this.is_WHITESPACE()&&(e=this.tok.T_DOC_COMMENT),t==="/")return e;this.unput(1)}for(;this.offset<this.size;)if((t=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return e}};fi.T_COMMENT,fi.T_DOC_COMMENT;var ki={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var t=this.input();if(t=="<"){if((t=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((t=this._input[this.offset+4])===" "||t==="	"||t===`
`||t==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&t=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};ki.nextINITIAL,ki.matchINITIAL;var he={consume_NUM:function(){var t=this.yytext[0],e=t===".";if(t==="0")if((t=this.input())==="x"||t==="X"){if((t=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(t?2:1)}else if(t==="b"||t==="B"){if((t=this.input())!=="_"&&t==="0"||t==="1")return this.consume_BNUM();this.unput(t?2:1)}else if(t==="o"||t==="O"){if((t=this.input())!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(t?2:1)}else this.is_NUM()||t&&this.unput(1);for(;this.offset<this.size;){var i=t;if((t=this.input())==="_"){if(i==="_"){this.unput(2);break}if(i==="."){this.unput(1);break}if(i==="e"||i==="E"){this.unput(2);break}}else{if(t==="."){if(e){this.unput(1);break}if(i==="_"){this.unput(2);break}e=!0;continue}if(t==="e"||t==="E"){if(i==="_"){this.unput(1);break}var n=2;if((t=this.input())!=="+"&&t!=="-"||(n=3,t=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(t?n:n-1);break}}if(!this.is_NUM()){t&&this.unput(1);break}}return e?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var t=this.input();if(!this.is_HEX()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var t=this.input();if(!this.is_NUM()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var t;this.offset<this.size;)if((t=this.input())!=="0"&&t!=="1"&&t!=="_"){t&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){var t=this.input();if(!this.is_OCTAL()){t&&this.unput(1);break}}return this.tok.T_LNUMBER}};he.consume_NUM,he.consume_HNUM,he.consume_LNUM,he.consume_BNUM,he.consume_ONUM;var Me={matchST_LOOKING_FOR_PROPERTY:function(){var t=this.input();if(t==="-"){if((t=this.input())===">")return this.tok.T_OBJECT_OPERATOR;t&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),t&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var t=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(t=this.input())==="["||t==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else t&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var t=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(t==="]")return this.popState(),"]";if(t==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||t==="\\"||t==="'"||t==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(t==="["||t==="{"||t==="}"||t==='"'||t==="`"||this.is_TOKEN())return t;throw new Error("Unexpected terminal")}};Me.matchST_LOOKING_FOR_PROPERTY,Me.matchST_LOOKING_FOR_VARNAME,Me.matchST_VAR_OFFSET;var Ti={matchST_IN_SCRIPTING:function(){var t=this.input();switch(t){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var e=this._input[this.offset];return e!==`
`&&e!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(t=this._input[this.offset])!==`
`&&t!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(t==="."){if(t=this.input(),this.is_NUM_START())return this.consume_NUM();t&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+t+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var t=this.input();if(t!==" "&&t!=="	"&&t!==`
`&&t!=="\r"){t&&this.unput(1);break}}return this.tok.T_WHITESPACE}};Ti.matchST_IN_SCRIPTING,Ti.T_WHITESPACE;var zt=[`
`,"\r"],an=[`
`,"\r",";"],Jo=an.concat(["	"," ",",","]",")","/","=","!"]),St={T_CONSTANT_ENCAPSED_STRING:function(){for(var t;this.offset<this.size;)if((t=this.input())=="\\")this.input();else if(t=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var t=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var e=this._input[this.offset-1];if(e==="'"||e==='"'?this.offset++:e=null,this.is_LABEL_START()){for(var i=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var n=this._input.substring(i,this.offset-1);if((!e||e===this._input[this.offset-1])&&(e&&this.offset++,zt.includes(this._input[this.offset-1])))return this.heredoc_label.label=n,this.heredoc_label.length=n.length,this.heredoc_label.finished=!1,i=this.offset-t,this.offset=t,this.consume(i),e==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=t,!1},ST_DOUBLE_QUOTES:function(){for(var t;this.offset<this.size;)if((t=this.input())=="\\")this.input();else{if(t=='"')break;if(t=="$"){if((t=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}t&&this.unput(1)}else if(t=="{"){if((t=this.input())=="$"){this.unput(2);break}t&&this.unput(1)}}if(t=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var e=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(e=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-e),this.unput(this.yytext.length-e),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(t,e){var i=this._input[t-2];if(!zt.includes(i))return!1;var n=!1,s=!1,o=0,l=this._input[t-1];if(this.version>=703){for(;l==="	"||l===" ";)l===" "?n=!0:l==="	"&&(s=!0),l=this._input[t+o],o++;if(t+=o,zt.includes(this._input[t-1]))return!1}if(this._input.substring(t-1,t-1+this.heredoc_label.length)===this.heredoc_label.label){var r=this._input[t-1+this.heredoc_label.length];if((this.version>=703?Jo:an).includes(r)){if(e){if(this.consume(o),n&&s)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=o,this.heredoc_label.indentation_uses_spaces=n,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var t=this.offset+1;t<this._input.length;){if(this.isDOC_MATCH(t,!1))return;if(!zt.includes(this._input[t-1]))for(;!zt.includes(this._input[t++])&&t<this._input.length;);t++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var t=this._input[this.offset-1];this.offset<this.size;)if(zt.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var t=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(t==="\\"&&(t=this.input(),zt.includes(t)||(t=this.input())),zt.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(t==="$"){if((t=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}}else if(t==="{"){if((t=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var t=this.input();if(t=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(t==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else t&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var t=this.input();if(t==="$"){if((t=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(t==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(t==="`")return this.popState(),"`";for(;this.offset<this.size;){if(t==="\\")this.input();else{if(t==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(t==="$"){if((t=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}continue}if(t==="{"){if((t=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var t=this.input();if(t==="$"){if((t=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(t==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(t==='"')return this.popState(),'"';for(;this.offset<this.size;){if(t==="\\")this.input();else{if(t==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(t==="$"){if((t=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var e=this.offset,i=this.consume_VARIABLE();return this.yytext.length>this.offset-e+2?(this.appendToken(i,this.offset-e+2),this.unput(this.offset-e+2),this.tok.T_ENCAPSED_AND_WHITESPACE):i}t&&this.unput(1)}else if(t==="{"){if((t=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);t&&this.unput(1)}}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};St.T_CONSTANT_ENCAPSED_STRING,St.is_HEREDOC,St.ST_DOUBLE_QUOTES,St.isDOC_MATCH,St.prematch_ENDOFDOC,St.matchST_NOWDOC,St.matchST_HEREDOC,St.consume_VARIABLE,St.matchST_BACKQUOTE,St.matchST_DOUBLE_QUOTES;var Fe={T_STRING:function(){var t=this.yytext.toLowerCase(),e=this.keywords[t];if(typeof e!="number"){if(t==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),e=this.tok.T_YIELD_FROM):e=this.tok.T_YIELD;else if(e=this.tok.T_STRING,t==="b"||t==="B"){var i=this.input();if(i==='"')return this.ST_DOUBLE_QUOTES();if(i==="'")return this.T_CONSTANT_ENCAPSED_STRING();i&&this.unput(1)}}if(e===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;for(var n=this.offset,s=this.input();s==" ";)s=this.input();var o=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();var l=s.slice(0,-1).toLowerCase();o=l!=="extends"&&l!=="implements"}return this.unput(this.offset-n),o?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&e!==this.tok.T_YIELD_FROM){var r=this.input();if(r==="\\"){e=t==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),r=this.input()}while(r==="\\")}r&&this.unput(1)}return e},consume_TOKEN:function(){var t=this._input[this.offset-1],e=this.tokenTerminals[t];return e?e.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var t=this._input[this.offset];return t===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):t==="-"?(this.input(),this.tok.T_DEC):t==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){var t;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),t=this.input()}while(t==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var t=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var e=this.yytext.length;this.consume_LABEL();var i=this.yytext.substring(e-1).toLowerCase(),n=this.castKeywords[i];if(typeof n=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return n}return this.unput(this.offset-t),"("},"=":function(){var t=this._input[this.offset];return t===">"?(this.input(),this.tok.T_DOUBLE_ARROW):t==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var t=this._input[this.offset];return t==="+"?(this.input(),this.tok.T_INC):t==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var t=this._input[this.offset];return t==="<"?(t=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):t==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):t==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):t===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):t===">"?(t=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_MUL_EQUAL):t==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_CONCAT_EQUAL):t==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_AND_EQUAL):t==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var t=this._input[this.offset];return t==="="?(this.input(),this.tok.T_OR_EQUAL):t==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};Fe.T_STRING,Fe.consume_TOKEN,Fe.tokenTerminals;var Nt={is_NUM:function(){var t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||t===95},is_NUM_START:function(){var t=this._input.charCodeAt(this.offset-1);return t>47&&t<58},is_LABEL:function(){var t=this._input.charCodeAt(this.offset-1);return t>96&&t<123||t>64&&t<91||t===95||t>47&&t<58||t>126},is_LABEL_START:function(){var t=this._input.charCodeAt(this.offset-1);return t>64&&t<91||t>96&&t<123||t===95||t>126},consume_LABEL:function(){for(;this.offset<this.size;){var t=this.input();if(!this.is_LABEL()){t&&this.unput(1);break}}return this},is_TOKEN:function(){var t=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(t)!==-1},is_WHITESPACE:function(){var t=this._input[this.offset-1];return t===" "||t==="	"||t===`
`||t==="\r"},is_TABSPACE:function(){var t=this._input[this.offset-1];return t===" "||t==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var t=this.input();if(!this.is_TABSPACE()){t&&this.unput(1);break}}return this},is_HEX:function(){var t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||t>64&&t<71||t>96&&t<103||t===95},is_OCTAL:function(){var t=this._input.charCodeAt(this.offset-1);return t>47&&t<56||t===95}};Nt.is_NUM,Nt.is_NUM_START,Nt.is_LABEL,Nt.is_LABEL_START,Nt.consume_LABEL,Nt.is_TOKEN,Nt.is_WHITESPACE,Nt.is_TABSPACE,Nt.consume_TABSPACE,Nt.is_HEX,Nt.is_OCTAL;var ct=function(t){this.engine=t,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};ct.prototype.setInput=function(t){return this._input=t,this.size=t.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},ct.prototype.input=function(){var t=this._input[this.offset];return t?(this.yytext+=t,this.offset++,t==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),t===`
`||t==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,t):""},ct.prototype.unput=function(t){if(t===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,t++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-t);else if(t>0)if(this.offset-=t,t<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-t),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var e=0;e<this.yytext.length;e++){var i=this.yytext[e];i==="\r"?(i=this.yytext[++e],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,i!==`
`&&(i==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):i===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},ct.prototype.tryMatch=function(t){return t===this.ahead(t.length)},ct.prototype.tryMatchCaseless=function(t){return t===this.ahead(t.length).toLowerCase()},ct.prototype.ahead=function(t){var e=this._input.substring(this.offset,this.offset+t);return e[e.length-1]==="\r"&&this._input[this.offset+t+1]===`
`&&(e+=`
`),e},ct.prototype.consume=function(t){for(var e=0;e<t;e++){var i=this._input[this.offset];if(!i)break;this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,e++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},ct.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},ct.prototype.setState=function(t){return this.yytext=t.yytext,this.offset=t.offset,this.yylineno=t.yylineno,this.yyprevcol=t.yyprevcol,this.yylloc=t.yylloc,t.heredoc_label&&(this.heredoc_label=t.heredoc_label),this},ct.prototype.appendToken=function(t,e){return this.tokens.push([t,e]),this},ct.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var t=this.next()||this.lex();if(!this.all_tokens){for(;t===this.tok.T_WHITESPACE||!this.comment_tokens&&(t===this.tok.T_COMMENT||t===this.tok.T_DOC_COMMENT)||t===this.tok.T_OPEN_TAG;)t=this.next()||this.lex();if(t==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(t===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),t},ct.prototype.begin=function(t){if(this.conditionStack.push(t),this.curCondition=t,this.stateCb=this["match"+t],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+t+'"');return this},ct.prototype.popState=function(){var t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t},ct.prototype.next=function(){var t;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?($t((t=this.tokens.shift())[1])==="object"?this.setState(t[1]):this.consume(t[1]),t=t[0]):t=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var e=t;e=typeof e=="number"?this.engine.tokens.values[e]:'"'+e+'"';var i=new Error(e+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(i.stack)}return t},[Ue,fi,ki,he,Me,Ti,St,Fe,Nt].forEach(function(t){for(var e in t)ct.prototype[e]=t[e]});var hn=ct,ln=function(t,e,i){this.line=t,this.column=e,this.offset=i},Be={read_array:function(){var t=null,e=!1,i=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),t=")"):(e=!0,t="]");var n=[];return this.next().token!==t&&(n=this.read_array_pair_list(e)),this.expect(t),this.next(),i(e,n)},read_array_pair_list:function(t){var e=this;return this.read_list(function(){return e.read_array_pair(t)},",",!0)},read_array_pair:function(t){if(!(!t&&this.token===")"||t&&this.token==="]")){if(this.token===",")return this.node("noop")();var e=this.node("entry"),i=null,n=null,s=!1,o=!1;if(this.token==="&")this.next(),s=!0,n=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),o=!0,n=this.read_expr();else{var l=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),i=l,this.token==="&"?(this.next(),s=!0,n=this.read_variable(!0,!1)):n=this.read_expr()):n=l}return e(i,n,s,o)}}};Be.read_array,Be.read_array_pair_list,Be.read_array_pair;var mt={read_class_declaration_statement:function(t){var e=this.node("class"),i=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var n=this.node("identifier"),s=this.text();this.next(),n=n(s);var o=this.read_extends_from(),l=this.read_implements_list();this.expect("{");var r=e(n,o,l,this.next().read_class_body(!0,!1),i);return t&&(r.attrGroups=t),r},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(t,e){for(var i=[],n=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE)if(e&&this.token===this.tok.T_CASE){var s=this.read_enum_case();this.expect(";")&&this.next(),i=i.concat(s)}else{this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list());var o=this.position(),l=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(t&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),l[0]=null,l[1]=0),this.token===this.tok.T_FUNCTION)i.push(this.read_function(!1,l,n,o)),n=[];else if(t&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){var r=this.read_variable_list(l,n);n=[],this.expect(";"),this.next(),i=i.concat(r)}else this.error([this.tok.T_CONST].concat(lt(t?[this.tok.T_VARIABLE]:[]),lt(e?[this.tok.T_CASE]:[]),[this.tok.T_FUNCTION])),this.next();else{var c=this.read_constant_list(l,n);this.expect(";")&&this.next(),i=i.concat(c)}}else i=i.concat(this.read_trait_use_statement());else i.push(this.read_doc_comment());else i.push(this.read_comment());return this.expect("}"),this.next(),i},read_variable_list:function(t,e){var i=this.node("propertystatement"),n=this.read_list(function(){var s=this.node("property"),o=!1;this.token===this.tok.T_READ_ONLY&&(o=!0,this.next());var l=vt(this.read_optional_type(),2),r=l[0],c=l[1];this.expect(this.tok.T_VARIABLE);var u=this.node("identifier"),a=this.text().substring(1);return this.next(),u=u(a),this.token===";"||this.token===","?s(u,null,o,r,c,e||[]):this.token==="="?s(u,this.next().read_expr(),o,r,c,e||[]):(this.expect([",",";","="]),s(u,null,r,c,e||[]))},",");return i(null,n,t)},read_constant_list:function(t,e){this.expect(this.tok.T_CONST)&&this.next();var i=this.node("classconstant"),n=this.read_list(function(){var s=this.node("constant"),o=null,l=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){o=this.node("identifier");var r=this.text();this.next(),o=o(r)}else this.expect("IDENTIFIER");return this.expect("=")&&(l=this.next().read_expr()),s(o,l)},",");return i(null,n,t,e||[])},read_member_flags:function(t){var e=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var i=0,n=0;do{switch(this.token){case this.tok.T_PUBLIC:i=0,n=0;break;case this.tok.T_PROTECTED:i=0,n=1;break;case this.tok.T_PRIVATE:i=0,n=2;break;case this.tok.T_STATIC:i=1,n=1;break;case this.tok.T_ABSTRACT:i=2,n=1;break;case this.tok.T_FINAL:i=2,n=2}t&&(i==0&&n==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),n=-1):i==2&&n==1&&(this.error(),n=-1)),e[i]!==-1?this.error():n!==-1&&(e[i]=n)}while(this.next().is("T_MEMBER_FLAGS"))}return e[1]==-1&&(e[1]=0),e[2]==-1&&(e[2]=0),e},read_optional_type:function(){var t=!1;this.token==="?"&&(t=!0,this.next());var e=this.read_types();if(t&&!e&&this.raiseError("Expecting a type definition combined with nullable operator"),!t&&!e)return[!1,null];if(this.token==="|"){e=[e];do{this.next();var i=this.read_type();if(!i){this.raiseError("Expecting a type definition");break}e.push(i)}while(this.token==="|")}return[t,e]},read_interface_declaration_statement:function(t){var e=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var i=this.node("identifier"),n=this.text();this.next(),i=i(n);var s=this.read_interface_extends_list();return this.expect("{"),e(i,s,this.next().read_interface_body(),t||[])},read_interface_body:function(){for(var t=[],e=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var i=this.position();e=this.read_attr_list();var n=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var s=this.read_constant_list(n,e);this.expect(";")&&this.next(),t=t.concat(s),e=[]}else if(this.token===this.tok.T_FUNCTION){var o=this.read_function_declaration(2,n,e,i);o.parseFlags(n),t.push(o),this.expect(";")&&this.next(),e=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else t.push(this.read_doc_comment());else t.push(this.read_comment());return this.expect("}")&&this.next(),t},read_trait_declaration_statement:function(){var t=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var e=this.node("identifier"),i=this.text();return this.next(),e=e(i),this.expect("{"),t(e,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){var t=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var e=[this.read_namespace_name()],i=null;this.token===",";)e.push(this.next().read_namespace_name());if(this.token==="{"){for(i=[];this.next().token!==this.EOF&&this.token!=="}";)i.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return t(e,i)},read_trait_use_alias:function(){var t,e=this.node(),i=null;if(this.is("IDENTIFIER")){t=this.node("identifier");var n=this.text();this.next(),t=t(n)}else if(t=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){i=t,t=this.node("identifier");var s=this.text();this.next(),t=t(s)}else this.expect(this.tok.T_STRING);else t=t.name;if(this.token===this.tok.T_INSTEADOF)return e("traitprecedence",i,t,this.next().read_name_list());if(this.token===this.tok.T_AS){var o=null,l=null;if(this.next().is("T_MEMBER_FLAGS")&&(o=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){l=this.node("identifier");var r=this.text();this.next(),l=l(r)}else o===!1&&this.expect(this.tok.T_STRING);return e("traitalias",i,t,l,o)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),e("traitalias",i,t,null,null)}};mt.read_class_declaration_statement,mt.read_class_modifiers,mt.read_class_modifier,mt.read_class_body,mt.read_variable_list,mt.read_constant_list,mt.read_member_flags,mt.read_optional_type,mt.read_interface_declaration_statement,mt.read_interface_body,mt.read_trait_declaration_statement,mt.read_trait_use_statement,mt.read_trait_use_alias;var mi={read_comment:function(){var t=this.text(),e=this.ast.prepare(t.substring(0,2)==="/*"?"commentblock":"commentline",null,this),i=this.lexer.yylloc.first_offset,n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(e=e(t)).offset=i,this.prev=n,e},read_doc_comment:function(){var t=this.ast.prepare("commentblock",null,this),e=this.lexer.yylloc.first_offset,i=this.text(),n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(t=t(i)).offset=e,this.prev=n,t}};mi.read_comment,mi.read_doc_comment;var Z={read_expr:function(t){var e=this.node();if(this.token==="@")return t||(t=this.next().read_expr()),e("silent",t);if(t||(t=this.read_expr_item()),this.token==="|")return e("bin","|",t,this.next().read_expr());if(this.token==="&")return e("bin","&",t,this.next().read_expr());if(this.token==="^")return e("bin","^",t,this.next().read_expr());if(this.token===".")return e("bin",".",t,this.next().read_expr());if(this.token==="+")return e("bin","+",t,this.next().read_expr());if(this.token==="-")return e("bin","-",t,this.next().read_expr());if(this.token==="*")return e("bin","*",t,this.next().read_expr());if(this.token==="/")return e("bin","/",t,this.next().read_expr());if(this.token==="%")return e("bin","%",t,this.next().read_expr());if(this.token===this.tok.T_POW)return e("bin","**",t,this.next().read_expr());if(this.token===this.tok.T_SL)return e("bin","<<",t,this.next().read_expr());if(this.token===this.tok.T_SR)return e("bin",">>",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return e("bin","||",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return e("bin","or",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return e("bin","&&",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return e("bin","and",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return e("bin","xor",t,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return e("bin","===",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return e("bin","!==",t,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return e("bin","==",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return e("bin","!=",t,this.next().read_expr());if(this.token==="<")return e("bin","<",t,this.next().read_expr());if(this.token===">")return e("bin",">",t,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return e("bin","<=",t,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return e("bin",">=",t,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return e("bin","<=>",t,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(t=e("bin","instanceof",t,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(t=this.read_expr(t))),this.token===this.tok.T_COALESCE)return e("bin","??",t,this.next().read_expr());if(this.token==="?"){var i=null;return this.next().token!==":"&&(i=this.read_expr()),this.expect(":")&&this.next(),e("retif",t,i,this.read_expr())}return e.destroy(t),t},read_expr_cast:function(t){return this.node("cast")(t,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var t=null;switch(this.token){case this.tok.T_ISSET:t=this.node("isset"),this.next().expect("(")&&this.next();var e=this.read_isset_variables();this.expect(")")&&this.next(),t=t(e);break;case this.tok.T_EMPTY:t=this.node("empty"),this.next().expect("(")&&this.next();var i=this.read_expr();this.expect(")")&&this.next(),t=t(i);break;case this.tok.T_INCLUDE:t=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:t=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:t=this.node("eval"),this.next().expect("(")&&this.next();var n=this.read_expr();this.expect(")")&&this.next(),t=t(n);break;case this.tok.T_REQUIRE:t=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:t=this.node("include")(!0,!0,this.next().read_expr())}return t},read_optional_expr:function(t){return this.token!==t?this.read_expr():null},read_exit_expr:function(){var t=null;return this.token==="("&&(this.next(),t=this.read_optional_expr(")"),this.expect(")")&&this.next()),t},read_expr_item:function(){var t,e,i=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(e=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(e);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var n=null,s=this.innerList;t=this.node("list"),s||(n=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var o=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var l=!1,r=0;r<o.length;r++)if(o[r]!==null&&o[r].kind!=="noop"){l=!0;break}return l||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),s?t(o,!1):(this.innerList=!1,this.expect("=")?n(t(o,!1),this.next().read_expr(),"="):t(o,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var c=this.lexer.yytext.toLowerCase()==="die";return t=this.node("exit"),this.next(),t(this.read_exit_expr(),c);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var u=null,a=null;return t=this.node("yield"),this.next().is("EXPR")&&(u=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(a=u,u=this.next().read_expr())),t(u,a);case this.tok.T_YIELD_FROM:return(t=this.node("yieldfrom"))(e=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,i);case this.tok.T_STATIC:var y=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],i);this.lexer.tokens.push(y),this.next()}if(this.is("VARIABLE")){t=this.node();var g=(e=this.read_variable(!1,!1)).kind==="identifier"||e.kind==="staticlookup"&&e.offset.kind==="identifier";switch(this.token){case"=":return g&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(t,e):t("assign",e,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return g&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"??=");case this.tok.T_INC:return g&&this.error("VARIABLE"),this.next(),t("post","+",e);case this.tok.T_DEC:return g&&this.error("VARIABLE"),this.next(),t("post","-",e);default:t.destroy(e)}}else{if(this.is("SCALAR")){if(t=this.node(),(e=this.read_scalar()).kind==="array"&&e.shortForm&&this.token==="="){var I=this.convertToList(e);return e.loc&&(I.loc=e.loc),t("assign",I,this.next().read_expr(),"=")}return t.destroy(e),this.handleDereferencable(e)}this.error("EXPR"),this.next()}return e},convertToList:function(t){var e=this,i=t.items.map(function(s){return s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=e.convertToList(s.value)),s}),n=this.node("list")(i,!0);return t.loc&&(n.loc=t.loc),t.leadingComments&&(n.leadingComments=t.leadingComments),t.trailingComments&&(n.trailingComments=t.trailingComments),n},read_assignref:function(t,e){var i;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),i=this.read_new_expr()):i=this.read_variable(!1,!1),t("assignref",e,i)},read_inline_function:function(t,e){if(this.token===this.tok.T_FUNCTION){var i=this.read_function(!0,t,e);return i.attrGroups=e,i}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var n=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var s=this.is_reference();this.expect("(")&&this.next();var o=this.read_parameter_list();this.expect(")")&&this.next();var l=!1,r=null;this.token===":"&&(this.next().token==="?"&&(l=!0,this.next()),r=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var c=n(o,s,this.read_expr(),r,l,!!t);return c.attrGroups=e,c},read_match_expression:function(){var t=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var e,i;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),i=this.read_match_arms(),this.expect("}")&&this.next(),t(e,i)},read_match_arms:function(){var t=this;return this.read_list(function(){return t.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var t=[];if(this.token===this.tok.T_DEFAULT)t=null,this.next();else for(t.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),t;t.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),t},read_attribute:function(){var t=this.text(),e=[];return this.next(),this.token==="("&&(e=this.read_argument_list()),this.node("attribute")(t,e)},read_attr_list:function(){var t=[];if(this.token===this.tok.T_ATTRIBUTE)do{var e=this.node("attrgroup")([]);for(this.next(),e.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&e.attrs.push(this.read_attribute());t.push(e),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return t},read_new_expr:function(){var t=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var e=[];if(this.token==="("){this.next();var i=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(e=this.read_argument_list()),t(i,e)}var n=this.read_attr_list();if(this.token===this.tok.T_CLASS){var s=this.node("class");this.next().token==="("&&(e=this.read_argument_list());var o=this.read_extends_from(),l=this.read_implements_list(),r=null;this.expect("{")&&(r=this.next().read_class_body(!0,!1));var c=s(null,o,l,r,[0,0,0]);return c.attrGroups=n,t(c,e)}for(var u=this.read_new_class_name();this.token==="[";){var a=this.node("offsetlookup"),y=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),u=a(u,y)}return this.token==="("&&(e=this.read_argument_list()),t(u,e)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var t=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(t=this.read_static_getter(t)),t}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(t){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)t=this.recursive_variable_chain_scan(t,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")t=this.read_dereferencable(t);else{if(this.token!=="(")return t;t=this.node("call")(t,this.read_argument_list())}return t}};Z.read_expr,Z.read_expr_cast,Z.read_isset_variable,Z.read_isset_variables,Z.read_internal_functions_in_yacc,Z.read_optional_expr,Z.read_exit_expr,Z.read_expr_item,Z.convertToList,Z.read_assignref,Z.read_inline_function,Z.read_match_expression,Z.read_match_arms,Z.read_match_arm,Z.read_match_arm_conds,Z.read_attribute,Z.read_attr_list,Z.read_new_expr,Z.read_new_class_name,Z.handleDereferencable;var He={read_enum_declaration_statement:function(t){var e=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);var i=this.node("identifier"),n=this.text();this.next(),i=i(n);var s=this.read_enum_value_type(),o=this.read_implements_list();this.expect("{");var l=e(i,s,o,this.next().read_class_body(!1,!0));return t&&(l.attrGroups=t),l},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);var t=this.node("enumcase"),e=this.node("identifier"),i=this.next().text();this.next(),e=e(i);var n=this.token==="="?this.next().read_expr():null;return this.expect(";"),t(e,n)}};He.read_enum_declaration_statement,He.read_enum_value_type,He.read_enum_case;var ot={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(t,e,i,n){var s=this.read_function_declaration(t?1:e?2:0,e&&e[1]===1,i||[],n);return e&&e[2]==1?(s.parseFlags(e),this.expect(";")&&this.next()):(this.expect("{")&&(s.body=this.read_code_block(!1),s.loc&&s.body.loc&&(s.loc.end=s.body.loc.end)),!t&&e&&s.parseFlags(e)),s},read_function_declaration:function(t,e,i,n){var s=this,o="function";t===1?o="closure":t===2&&(o="method");var l=this.node(o);this.expect(this.tok.T_FUNCTION)&&this.next();var r=this.is_reference(),c=!1,u=[],a=null,y=!1;if(t!==1){var g=this.node("identifier");t===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(c=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(c=this.text()),this.next()),c=g(c)}this.expect("(")&&this.next();var I=this.read_parameter_list(c.name==="__construct");this.expect(")")&&this.next(),t===1&&(u=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(y=!0,this.next()),a=this.read_types());var H=function(A){return A.attrGroups=i||[],n&&A.loc&&(A.loc.start=n,A.loc.source&&(A.loc.source=s.lexer._input.substr(A.loc.start.offset,A.loc.end.offset-A.loc.start.offset))),A};return H(t===1?l(I,r,u,a,y,e):l(c,I,r,a,y))},read_lexical_vars:function(){var t=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),t=this.read_lexical_var_list(),this.expect(")")&&this.next()),t},read_list_with_dangling_comma:function(t){for(var e=[];this.token!=this.EOF;){if(e.push(t()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return e}return e},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var t=this.node("variable");this.expect(this.tok.T_VARIABLE);var e=this.text().substring(1);return this.next(),t(e,!1)},read_parameter_list:function(t){if(this.token!==")"){var e=!1;return this.read_list_with_dangling_comma(function(){var i=this.read_parameter(t);return i&&(e&&this.raiseError("Unexpected parameter after a variadic parameter"),i.variadic&&(e=!0)),i}.bind(this),",")}return[]},read_parameter:function(t){var e,i=this.node("parameter"),n=null,s=null,o=!1,l=!1,r=[];this.token===this.tok.T_ATTRIBUTE&&(r=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(t?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor"));var c=this.read_promoted();!l&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(t?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),o=!0),e=this.read_types(),o&&!e&&this.raiseError("Expecting a type definition combined with nullable operator");var u=this.is_reference(),a=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){n=this.node("identifier");var y=this.text().substring(1);this.next(),n=n(y)}this.token=="="&&(s=this.next().read_expr());var g=i(n,e,s,u,a,l,o,c);return r&&(g.attrGroups=r),g},read_types:function(){var t="unset",e="union",i="intersection",n=[],s=t,o=this.read_type();if(!o)return null;for(n.push(o);this.token==="|"||this.version>=801&&this.token==="&";){var l=this.peek();if(l===this.tok.T_ELLIPSIS||l===this.tok.T_VARIABLE)break;s===t?s=this.token==="|"?e:i:(s===e&&this.token!=="|"||s===i&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),n.push(this.read_type())}return n.length===1?n[0]:s===i?this.node("intersectiontype")(n):this.node("uniontype")(n)},read_promoted:function(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var t=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(t.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(t=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),t},read_non_empty_argument_list:function(){var t=!1;return this.read_function_list(function(){var e=this.read_argument();if(e){var i=e.kind==="variadic";t&&!i&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),i&&(t=!0)}return e}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){var t=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var e=this.text();return this.next(),t("typereference",e.toLowerCase(),e)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var i=this.text(),n=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(i.toLowerCase())>-1?t("typereference",i.toLowerCase(),i):(this.lexer.tokens.push(n),this.next(),t.destroy(),this.read_namespace_name())}return t.destroy(),null}};ot.is_reference,ot.is_variadic,ot.read_function,ot.read_function_declaration,ot.read_lexical_vars,ot.read_list_with_dangling_comma,ot.read_lexical_var_list,ot.read_lexical_var,ot.read_parameter_list,ot.read_parameter,ot.read_types,ot.read_promoted,ot.read_argument_list,ot.read_non_empty_argument_list,ot.read_argument,ot.read_type;var ge={read_if:function(){var t=this.node("if"),e=this.next().read_if_expr(),i=null,n=null,s=!1;if(this.token===":"){s=!0,this.next(),i=this.node("block");for(var o=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}o.push(this.read_inner_statement())}i=i(null,o),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else i=this.read_statement(),this.token===this.tok.T_ELSEIF?n=this.read_if():this.token===this.tok.T_ELSE&&(n=this.next().read_statement());return t(e,i,n,s)},read_if_expr:function(){this.expect("(")&&this.next();var t=this.read_expr();return this.expect(")")&&this.next(),t},read_elseif_short:function(){var t=null,e=this.node("if"),i=this.next().read_if_expr();this.expect(":")&&this.next();for(var n=this.node("block"),s=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){t=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){t=this.read_else_short();break}s.push(this.read_inner_statement())}return e(i,n(null,s),t,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var t=this.node("block"),e=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)e.push(this.read_inner_statement());return t(null,e)}};ge.read_if,ge.read_if_expr,ge.read_elseif_short,ge.read_else_short;var le={read_while:function(){var t=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var e,i=null,n=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(n=!0,i=this.read_short_form(this.tok.T_ENDWHILE)):i=this.read_statement(),t(e,i,n)},read_do:function(){var t=this.node("do");this.expect(this.tok.T_DO)&&this.next();var e,i=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),i=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),t(i,e)},read_for:function(){var t=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var e=[],i=[],n=[],s=null,o=!1;return this.expect("(")&&this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(i=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(n=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(o=!0,s=this.read_short_form(this.tok.T_ENDFOR)):s=this.read_statement(),t(e,i,n,s,o)},read_foreach:function(){var t=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var e,i=null,n=null,s=null,o=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),n=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(i=n,n=this.next().read_foreach_variable())),i&&i.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(o=!0,s=this.read_short_form(this.tok.T_ENDFOREACH)):s=this.read_statement(),t(e,i,n,s,o)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var t=this.token==="[",e=this.node("list");this.next(),!t&&this.expect("(")&&this.next();var i=this.read_array_pair_list(t);return this.expect(t?"]":")")&&this.next(),e(i,t)}return this.read_variable(!1,!1)}};le.read_while,le.read_do,le.read_for,le.read_foreach,le.read_foreach_variable;var cn={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};cn.read_start;var Bt={read_namespace:function(){var t,e,i=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),e=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(t){var e,i=this.node(),n=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,n=n.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return i("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),t||this.token!=="("){if(n.toLowerCase()==="parent")return i("parentreference",n);if(n.toLowerCase()==="self")return i("selfreference",n)}return i("name",n,e)},read_use_statement:function(){var t=this.node("usegroup"),e=[],i=null;this.expect(this.tok.T_USE)&&this.next();var n=this.read_use_type();return e.push(this.read_use_declaration(!1)),this.token===","?e=e.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(i=e[0].name,e=this.next().read_use_declarations(n===null),this.expect("}")&&this.next()),t=t(i,n,e),this.expect(";")&&this.next(),t},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(t){var e=this.node("useitem"),i=null;t&&(i=this.read_use_type());var n=this.read_namespace_name(),s=this.read_use_alias();return e(n.name,s,i)},read_use_declarations:function(t){for(var e=[this.read_use_declaration(t)];this.token===",";){if(this.next(),t){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;e.push(this.read_use_declaration(t))}return e},read_use_alias:function(){var t=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var e=this.node("identifier"),i=this.text();this.next(),t=e(i)}return t},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};Bt.read_namespace,Bt.read_namespace_name,Bt.read_use_statement,Bt.read_class_name_reference,Bt.read_use_declaration,Bt.read_use_declarations,Bt.read_use_alias,Bt.read_use_type;var un={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},Pt={resolve_special_chars:function(t,e){return e?t.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(i,n,s){return un[n]?un[n]:n[0]==="x"||n[0]==="X"?String.fromCodePoint(parseInt(n.substr(1),16)):n[0]==="u"?String.fromCodePoint(parseInt(s,16)):String.fromCodePoint(parseInt(n,8))}):t.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(t,e,i,n){if(e===0)return t;this.check_heredoc_indentation_level(t,e,i,n);var s=i?" ":"	",o=new RegExp("\\n".concat(s,"{").concat(e,"}"),"g"),l=new RegExp("^".concat(s,"{").concat(e,"}"));return n&&(t=t.replace(l,"")),t.replace(o,`
`)},check_heredoc_indentation_level:function(t,e,i,n){var s=t.length,o=0,l=0,r=!0,c=i?" ":"	",u=!1;if(!n){if((o=t.indexOf(`
`))===-1)return;o++}for(;o<s;)r?t[o]===c?l++:u=!0:r=!1,t[o]!==`
`&&u&&l<e?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(e,")")):u=!1,t[o]===`
`&&(r=!0,l=0),o++},read_dereferencable_scalar:function(){var t=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var e=this.node("string"),i=this.text(),n=0;i[0]!=="b"&&i[0]!=="B"||(n=1);var s=i[n]==='"';this.next(),e=e(s,this.resolve_special_chars(i.substring(n+1,i.length-1),s),n===1,i),t=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(e):e;break;case this.tok.T_ARRAY:case"[":t=this.read_array()}return t},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var t,e;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var i=this.node("number");return t=this.text(),this.next(),i(t,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var n=this.lexer.yylloc.first_offset;e=this.node("nowdoc"),t=this.next().text(),this.lexer.heredoc_label.indentation>0&&(t=t.substring(0,t.length-this.lexer.heredoc_label.indentation));var s=t[t.length-1];s===`
`?t=t[t.length-2]==="\r"?t.substring(0,t.length-2):t.substring(0,t.length-1):s==="\r"&&(t=t.substring(0,t.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var o=this.lexer._input.substring(n,this.lexer.yylloc.first_offset);return e=e(this.remove_heredoc_leading_whitespace_chars(t,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),o,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,e}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var l=this.error("SCALAR");return this.next(),l}},read_dereferencable:function(t){var e,i,n=this.node("offsetlookup");return this.token==="["?(i=this.next().read_expr(),this.expect("]")&&this.next(),e=n(t,i)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=n(t,i=this.read_encapsed_string_item(!1))),e},read_encapsed_string_item:function(t){var e,i,n,s=this.node("encapsedpart"),o=null,l=!1,r=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var c=this.text();this.next(),r=r("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(c,t),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):c,!1,c)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(o="simple",l=!0,n=null,this.next().token===this.tok.T_STRING_VARNAME){n=this.node("variable");var u=this.text();this.next(),r.destroy(),this.token==="["?(n=n(u,!1),i=this.node("offsetlookup"),e=this.next().read_expr(),this.expect("]")&&this.next(),r=i(n,e)):r=n(u,!1)}else r=r("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)o="complex",r.destroy(),r=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(o="simple",r.destroy(),r=this.read_simple_variable(),this.token==="["&&(i=this.node("offsetlookup"),e=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),r=i(r,e)),this.token===this.tok.T_OBJECT_OPERATOR){i=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var a=this.node("identifier");n=this.text(),this.next(),r=i(r,a(n))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var y=this.text();this.next(),r.destroy(),r=r("string",!1,y,!1,y)}return this.lexer.heredoc_label.first_encaps_node=!1,s(r,o,l)},read_encapsed_string:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.lexer.yylloc.first_offset,n=this.node("encapsed");this.next();var s=this.lexer.yylloc.prev_offset-(e?1:0),o=[],l=null;for(l=t==="`"?this.ast.encapsed.TYPE_SHELL:t==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==t&&this.token!==this.EOF;)o.push(this.read_encapsed_string_item(!0));if(o.length>0&&o[o.length-1].kind==="encapsedpart"&&o[o.length-1].expression.kind==="string"){var r=o[o.length-1].expression,c=r.value[r.value.length-1];c===`
`?r.value[r.value.length-2]==="\r"?r.value=r.value.substring(0,r.value.length-2):r.value=r.value.substring(0,r.value.length-1):c==="\r"&&(r.value=r.value.substring(0,r.value.length-1))}this.expect(t)&&this.next();var u=this.lexer._input.substring(l==="heredoc"?i:s-1,this.lexer.yylloc.first_offset);return n=n(o,u,l),t===this.tok.T_END_HEREDOC&&(n.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),n},get_magic_constant:function(){var t=this.node("magic"),e=this.text();return this.next(),t(e.toUpperCase(),e)}};Pt.resolve_special_chars,Pt.remove_heredoc_leading_whitespace_chars,Pt.check_heredoc_indentation_level,Pt.read_dereferencable_scalar,Pt.read_scalar,Pt.read_dereferencable,Pt.read_encapsed_string_item,Pt.read_encapsed_string,Pt.get_magic_constant;var Ht={read_top_statements:function(){for(var t=[];this.token!==this.EOF&&this.token!=="}";){var e=this.read_top_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_top_statement:function(){var t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,t);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(t);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(t);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(t);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var e=this.node("constantstatement"),i=this.next().read_const_list();return this.expectEndOfStatement(),e(null,i);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var n=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,n(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var t=[];this.token!=this.EOF&&this.token!=="}";){var e=this.read_inner_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var t=this.node("constant"),e=this.node("identifier"),i=this.text();return this.next(),e=e(i),this.expect("=")?t(e,this.next().read_expr()):t(e,null)},",",!1)},read_declare_list:function(){for(var t=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var e=this.node("declaredirective"),i=this.node("identifier"),n=this.text();this.next(),i=i(n);var s=null;if(this.expect("=")&&(s=this.next().read_expr()),t.push(e(i,s)),this.token!==",")break;this.next()}return t},read_inner_statement:function(){var t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var e=this.read_function(!1,!1);return e.attrGroups=t,e;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var i=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),i=i(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),i;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var t=this.node("return");this.next();var e=this.read_optional_expr(";");return this.expectEndOfStatement(),t(e);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var n=this.read_optional_expr(";");return this.expectEndOfStatement(),i(n);case this.tok.T_GLOBAL:var s=this.node("global"),o=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),s(o);case this.tok.T_STATIC:var l=[this.token,this.lexer.getState()],r=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(l);var c=this.next().read_expr();return this.expectEndOfStatement(c),r("expressionstatement",c)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var u=this.read_variable_declarations();return this.expectEndOfStatement(),r("static",u);case this.tok.T_ECHO:var a=this.node("echo"),y=this.text(),g=y==="<?="||y==="<%=",I=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),a(I,g);case this.tok.T_INLINE_HTML:var H=this.text(),A=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,U=A==="\r"||A===`
`;U&&A===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(A=`\r
`);var C=this.node("inline");return this.next(),C(H,U?A+H:H);case this.tok.T_UNSET:var $=this.node("unset");this.next().expect("(")&&this.next();var W=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),$(W);case this.tok.T_DECLARE:var B,S=this.node("declare"),Q=[];this.next().expect("(")&&this.next();var z=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)Q.push(this.read_top_statement());Q.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Q.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),B=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)Q.push(this.read_top_statement());Q.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Q.push(this.node("noop")()),this.expect("}")&&this.next(),B=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),B=this.ast.declare.MODE_NONE;return S(z,Q,B);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var Lt=this.node("throw"),nt=this.next().read_expr();return this.expectEndOfStatement(),Lt(nt);case";":return this.next(),null;case this.tok.T_STRING:var d=this.node(),_=[this.token,this.lexer.getState()],N=this.text(),b=this.node("identifier");if(this.next().token===":")return b=b(N),this.next(),d("label",b);b.destroy(),d.destroy(),this.lexer.tokens.push(_);var E=this.node("expressionstatement"),V=this.next().read_expr();return this.expectEndOfStatement(V),E(V);case this.tok.T_GOTO:var X=this.node("goto"),K=null;if(this.next().expect(this.tok.T_STRING)){K=this.node("identifier");var st=this.text();this.next(),K=K(st),this.expectEndOfStatement()}return X(K);default:var F=this.node("expressionstatement"),Y=this.read_expr();return this.expectEndOfStatement(Y),F(Y)}},read_code_block:function(t){var e=this.node("block");this.expect("{")&&this.next();var i=t?this.read_top_statements():this.read_inner_statements();return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect("}")&&this.next(),e(null,i)}};Ht.read_top_statements,Ht.read_top_statement,Ht.read_inner_statements,Ht.read_const_list,Ht.read_declare_list,Ht.read_inner_statement,Ht.read_statement,Ht.read_code_block;var Ge={read_switch:function(){var t=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var e=this.read_expr();this.expect(")")&&this.next();var i=this.token===":";return t(e,this.read_switch_case_list(),i)},read_switch_case_list:function(){var t=null,e=this.node("block"),i=[];for(this.token==="{"?t="}":this.token===":"?t=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==t;)i.push(this.read_case_list(t));return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),t===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),e(null,i)},read_case_list:function(t){var e=this.node("case"),i=null;this.token===this.tok.T_CASE?i=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var n=this.node("block"),s=[];this.token!==this.EOF&&this.token!==t&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)s.push(this.read_inner_statement());return e(i,n(null,s))}};Ge.read_switch,Ge.read_switch_case_list,Ge.read_case_list;var _n={read_try:function(){this.expect(this.tok.T_TRY);for(var t=this.node("try"),e=null,i=[],n=this.next().read_statement();this.token===this.tok.T_CATCH;){var s=this.node("catch");this.next().expect("(")&&this.next();var o=this.read_list(this.read_namespace_name,"|",!1),l=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(l=this.read_variable(!0,!1)),this.expect(")"),i.push(s(this.next().read_statement(),o,l))}return this.token===this.tok.T_FINALLY&&(e=this.next().read_statement()),t(n,i,e)}};_n.read_try;var Ut={read_short_form:function(t){var e=this.node("block"),i=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==t;)i.push(this.read_inner_statement());return i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),this.expectEndOfStatement(),e(null,i)},read_function_list:function(t,e){var i=[];do{if(this.token==e&&this.version>=703&&i.length>0){i.push(this.node("noop")());break}if(i.push(t.apply(this,[])),this.token!=e||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return i},read_list:function(t,e,i){var n=[];if(this.token==e&&(i&&n.push(typeof t=="function"?this.node("noop")():null),this.next()),typeof t=="function")do{var s=t.apply(this,[]);if(s&&n.push(s),this.token!=e)break}while(this.next().token!=this.EOF);else{if(!this.expect(t))return[];for(n.push(this.text());this.next().token!=this.EOF&&this.token==e&&this.next().token==t;)n.push(this.text())}return n},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(t){var e=this.node("byref");this.next(),e=e(null);var i=t();return i&&(this.ast.swapLocations(i,e,i,this),i.byref=!0),i},read_variable_declarations:function(){return this.read_list(function(){var t=this.node("staticvariable"),e=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var i=this.text().substring(1);this.next(),e=e(i,!1)}else e=e("#ERR",!1);return this.token==="="?t(e,this.next().read_expr()):e},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};Ut.read_short_form,Ut.read_function_list,Ut.read_list,Ut.read_name_list,Ut.read_byref,Ut.read_variable_declarations,Ut.read_extends_from,Ut.read_interface_extends_list,Ut.read_implements_list;var Kt={read_variable:function(t,e){var i;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,t,e));if(this.is([this.tok.T_VARIABLE,"$"]))i=this.read_reference_variable(e);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){i=this.node();var n=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(n.kind)===-1){var s=n.name.toLowerCase();s==="true"?i=n.destroy(i("boolean",!0,n.name)):s==="false"?i=n.destroy(i("boolean",!1,n.name)):s==="null"?i=n.destroy(i("nullkeyword",n.name)):(i.destroy(n),i=n)}else i.destroy(n),i=n}else if(this.token===this.tok.T_STATIC){i=this.node("staticreference");var o=this.text();this.next(),i=i(o)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i,e)),this.recursive_variable_chain_scan(i,t,e)},read_static_getter:function(t,e){var i,n,s=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?i=this.read_reference_variable(e):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(i=this.node("identifier"),n=this.text(),this.next(),i=i(n)):this.token==="{"?(i=this.node("literal"),n=this.next().read_expr(),this.expect("}")&&this.next(),i=i("literal",n,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),i=this.node("identifier"),n=this.text(),this.next(),i=i(n)),s(t,i)},read_what:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=null,i=null;switch(this.next().token){case this.tok.T_STRING:e=this.node("identifier"),i=this.text(),this.next(),e=e(i),t&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:e=this.node("variable"),i=this.text().substring(1),this.next(),e=e(i,!1);break;case"$":e=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(i=this.next().read_expr(),this.expect("}")&&this.next(),e=e("variable",i,!0)):e=e("variable",i=this.read_expr(),!1);break;case"{":e=this.node("encapsedpart"),i=this.next().read_expr(),this.expect("}")&&this.next(),e=e(i,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),e=this.node("identifier"),i=this.text(),this.next(),e=e(i)}return e},recursive_variable_chain_scan:function(t,e,i){var n,s;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(e)return t;t=this.node("call")(t,this.read_argument_list());break;case"[":case"{":var o=this.token==="[";n=this.node("offsetlookup"),this.next(),s=!1,i?(s=this.read_encaps_var_offset(),this.expect(o?"]":"}")&&this.next()):(o?this.token!=="]":this.token!=="}")?(s=this.read_expr(),this.expect(o?"]":"}")&&this.next()):this.next(),t=n(t,s);break;case this.tok.T_DOUBLE_COLON:t.kind==="staticlookup"&&t.offset.kind==="identifier"&&this.error(),t=(n=this.node("staticlookup"))(t,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:t=(n=this.node("propertylookup"))(t,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:t=(n=this.node("nullsafepropertylookup"))(t,this.read_what());break;default:break t}return t},read_encaps_var_offset:function(){var t=this.node();if(this.token===this.tok.T_STRING){var e=this.text();this.next(),t=t("identifier",e)}else if(this.token===this.tok.T_NUM_STRING){var i=this.text();this.next(),t=t("number",i,null)}else if(this.token==="-"){this.next();var n=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),t=t("number",n,null)}else if(this.token===this.tok.T_VARIABLE){var s=this.text().substring(1);this.next(),t=t("variable",s,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var o=this.text();this.next(),t=t("identifier",o)}return t},read_reference_variable:function(t){for(var e,i=this.read_simple_variable();this.token!=this.EOF;){var n=this.node();if(this.token!="{"||t){n.destroy();break}e=this.next().read_expr(),this.expect("}")&&this.next(),i=n("offsetlookup",i,e)}return i},read_simple_variable:function(){var t,e=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),e=e(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var i=this.next().read_expr();this.expect("}")&&this.next(),e=e(i,!0);break;case"$":e=e(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:t=this.text().substring(1);var n=this.node("variable");this.next(),e=e(n(t,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),e=e(t,!1)}return e}};function xi(t){return t!="."&&t!=","&&!isNaN(parseFloat(t))&&isFinite(t)}Kt.read_variable,Kt.read_static_getter,Kt.read_what,Kt.recursive_variable_chain_scan,Kt.read_encaps_var_offset,Kt.read_reference_variable,Kt.read_simple_variable;var at=function(t,e){this.lexer=t,this.ast=e,this.tok=t.tok,this.EOF=t.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var i=function(n){return[n,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(i)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(i)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(i)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(i)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(i)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i))}};at.prototype.getTokenName=function(t){return xi(t)?t==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[t]:"'"+t+"'"},at.prototype.parse=function(t,e){this._errors=[],this.filename=e||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(t),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var i=this.node("program"),n=[];for(this.next();this.token!=this.EOF;)n.push(this.read_start());n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var s=i(n,this._errors,this._docs,this._tokens);if(this.debug){var o=this.ast.checkNodes();if(o.length>0)throw o.forEach(function(l){l.position&&console.log("Node at line "+l.position.line+", column "+l.position.column),console.log(l.stack.join(`
`))}),new Error("Some nodes are not closed")}return s},at.prototype.raiseError=function(t,e,i,n){if(t+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var s=new SyntaxError(t,this.filename,this.lexer.yylloc.first_line);throw s.lineNumber=this.lexer.yylloc.first_line,s.fileName=this.filename,s.columnNumber=this.lexer.yylloc.first_column,s}var o=this.ast.prepare("error",null,this)(t,n,this.lexer.yylloc.first_line,i);return this._errors.push(o),o},at.prototype.error=function(t){var e="Parse Error : syntax error",i=this.getTokenName(this.token),n="";if(this.token!==this.EOF){if(xi(this.token)){var s=this.text();s.length>10&&(s=s.substring(0,7)+"..."),i="'"+s+"' ("+i+")"}e+=", unexpected "+i}return t&&!Array.isArray(t)&&((xi(t)||t.length===1)&&(n=", expecting "+this.getTokenName(t)),e+=n),this.raiseError(e,n,t,i)},at.prototype.position=function(){return new ln(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},at.prototype.node=function(t){if(this.extractDoc){var e=null;this._docIndex<this._docs.length&&(e=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+t)),console.log(e)));var i=this.ast.prepare(t,e,this);return i.postBuild=function(n){if(this._docIndex<this._docs.length)if(this._lastNode){for(var s=this.prev[2],o=this._docIndex;o<this._docs.length&&!(this._docs[o].offset>s);o++);o>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,o)),this._docIndex=o)}else this.token===this.EOF&&(n.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=n}.bind(this),i}return this.ast.prepare(t,null,this)},at.prototype.expectEndOfStatement=function(t){if(this.token===";")t&&this.lexer.yytext===";"&&t.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var Ei=["parser.next","parser.node","parser.showlog"];at.prototype.showlog=function(){for(var t,e=new Error().stack.split(`
`),i=2;i<e.length;i++){t=e[i].trim();for(var n=!1,s=0;s<Ei.length;s++)if(t.substring(3,3+Ei[s].length)===Ei[s]){n=!0;break}if(!n)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this},at.prototype.expect=function(t){if(Array.isArray(t)){if(t.indexOf(this.token)===-1)return this.error(t),!1}else if(this.token!=t)return this.error(t),!1;return!0},at.prototype.text=function(){return this.lexer.yytext},at.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},at.prototype.peek=function(){var t=this.lexer.getState(),e=this.lexer.lex();return this.lexer.setState(t),e},at.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var t=this.lexer.yytext;if(t=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(t),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},at.prototype.is=function(t){return Array.isArray(t)?t.indexOf(this.token)!==-1:this.entries[t].has(this.token)},[Be,mt,mi,Z,He,ot,ge,le,cn,Bt,Pt,Ht,Ge,_n,Ut,Kt].forEach(function(t){for(var e in t){if(Object.prototype.hasOwnProperty.call(at.prototype,e))throw new Error("Function "+e+" is already defined - collision");at.prototype[e]=t[e]}});var dn=at,pn={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},Zo={values:Object.entries(pn).reduce(function(t,e){var i=vt(e,2),n=i[0],s=i[1];return Pe(Pe({},t),{},rn({},s,n))},{}),names:pn},fn=Object.freeze(Zo),ta=function(t,e,i){this.source=t,this.start=e,this.end=i},Ae=function(t,e,i){this.kind=t,e&&(this.leadingComments=e),i&&(this.loc=i)};Ae.prototype.setTrailingComments=function(t){this.trailingComments=t},Ae.prototype.destroy=function(t){if(!t)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(t.leadingComments?t.leadingComments=Array.concat(this.leadingComments,t.leadingComments):t.leadingComments=this.leadingComments),this.trailingComments&&(t.trailingComments?t.trailingComments=Array.concat(this.trailingComments,t.trailingComments):t.trailingComments=this.trailingComments),t},Ae.prototype.includeToken=function(t){return this.loc&&(this.loc.end&&(this.loc.end.line=t.lexer.yylloc.last_line,this.loc.end.column=t.lexer.yylloc.last_column,this.loc.end.offset=t.lexer.offset),t.ast.withSource&&(this.loc.source=t.lexer._input.substring(this.loc.start.offset,t.lexer.offset))),this},Ae.extends=function(t,e){return e.prototype=Object.create(this.prototype),e.extends=this.extends,e.prototype.constructor=e,e.kind=t,e};var P=Ae,kn="expression",m=P.extends(kn,function(t,e,i){P.apply(this,[t||kn,e,i])}),Tn="array",ea=m.extends(Tn,function(t,e,i,n){m.apply(this,[Tn,i,n]),this.items=e,this.shortForm=t}),mn="arrowfunc",ia=m.extends(mn,function(t,e,i,n,s,o,l,r){m.apply(this,[mn,l,r]),this.arguments=t,this.byref=e,this.body=i,this.type=n,this.nullable=s,this.isStatic=o||!1}),xn="assign",na=m.extends(xn,function(t,e,i,n,s){m.apply(this,[xn,n,s]),this.left=t,this.right=e,this.operator=i}),En="assignref",sa=m.extends(En,function(t,e,i,n){m.apply(this,[En,i,n]),this.left=t,this.right=e}),yn="attribute",ra=P.extends(yn,function(t,e,i,n){P.apply(this,[yn,i,n]),this.name=t,this.args=e}),vn="attrgroup",oa=P.extends(vn,function(t,e,i){P.apply(this,[vn,e,i]),this.attrs=t||[]}),gn="operation",It=m.extends(gn,function(t,e,i){m.apply(this,[t||gn,e,i])}),aa=It.extends("bin",function(t,e,i,n,s){It.apply(this,["bin",n,s]),this.type=t,this.left=e,this.right=i}),An="statement",v=P.extends(An,function(t,e,i){P.apply(this,[t||An,e,i])}),Nn="block",se=v.extends(Nn,function(t,e,i,n){v.apply(this,[t||Nn,i,n]),this.children=e.filter(Boolean)}),bn="literal",dt=m.extends(bn,function(t,e,i,n,s){m.apply(this,[t||bn,n,s]),this.value=e,i&&(this.raw=i)}),Ln="boolean",ha=dt.extends(Ln,function(t,e,i,n){dt.apply(this,[Ln,t,e,i,n])}),Cn="break",la=v.extends(Cn,function(t,e,i){v.apply(this,[Cn,e,i]),this.level=t}),Sn="byref",ca=m.extends(Sn,function(t,e,i){m.apply(this,[Sn,e,i]),this.what=t}),In="call",ua=m.extends(In,function(t,e,i,n){m.apply(this,[In,i,n]),this.what=t,this.arguments=e}),On="case",_a=v.extends(On,function(t,e,i,n){v.apply(this,[On,i,n]),this.test=t,this.body=e}),Rn="cast",da=It.extends(Rn,function(t,e,i,n,s){It.apply(this,[Rn,n,s]),this.type=t,this.raw=e,this.expr=i}),wn="catch",pa=v.extends(wn,function(t,e,i,n,s){v.apply(this,[wn,n,s]),this.body=t,this.what=e,this.variable=i}),Dn="declaration",Pn=v.extends(Dn,function(t,e,i,n){v.apply(this,[t||Dn,i,n]),this.name=e});Pn.prototype.parseFlags=function(t){this.isAbstract=t[2]===1,this.isFinal=t[2]===2,this.kind!=="class"&&(t[0]===-1?this.visibility="":t[0]===null?this.visibility=null:t[0]===0?this.visibility="public":t[0]===1?this.visibility="protected":t[0]===2&&(this.visibility="private"),this.isStatic=t[1]===1)};var ht=Pn,Un="class",fa=ht.extends(Un,function(t,e,i,n,s,o,l){ht.apply(this,[Un,t,o,l]),this.isAnonymous=!t,this.extends=e,this.implements=i,this.body=n,this.attrGroups=[],this.parseFlags(s)}),Mn="constantstatement",yi=v.extends(Mn,function(t,e,i,n){v.apply(this,[t||Mn,i,n]),this.constants=e}),Fn="classconstant",Bn=yi.extends(Fn,function(t,e,i,n,s,o){yi.apply(this,[t||Fn,e,s,o]),this.parseFlags(i),this.attrGroups=n});Bn.prototype.parseFlags=function(t){t[0]===-1?this.visibility="":t[0]===null?this.visibility=null:t[0]===0?this.visibility="public":t[0]===1?this.visibility="protected":t[0]===2&&(this.visibility="private")};var ka=Bn,Hn="clone",Ta=m.extends(Hn,function(t,e,i){m.apply(this,[Hn,e,i]),this.what=t}),Gn="closure",ma=m.extends(Gn,function(t,e,i,n,s,o,l,r){m.apply(this,[Gn,l,r]),this.uses=i,this.arguments=t,this.byref=e,this.type=n,this.nullable=s,this.isStatic=o||!1,this.body=null,this.attrGroups=[]}),Ne=P.extends("comment",function(t,e,i,n){P.apply(this,[t,i,n]),this.value=e}),Vn="commentblock",xa=Ne.extends(Vn,function(t,e,i){Ne.apply(this,[Vn,t,e,i])}),Qn="commentline",Ea=Ne.extends(Qn,function(t,e,i){Ne.apply(this,[Qn,t,e,i])}),Wn="constant",ya=P.extends(Wn,function(t,e,i,n){P.apply(this,[Wn,i,n]),this.name=t,this.value=e}),Yn="continue",va=v.extends(Yn,function(t,e,i){v.apply(this,[Yn,e,i]),this.level=t}),jn="declare",Ve=se.extends(jn,function(t,e,i,n,s){se.apply(this,[jn,e,n,s]),this.directives=t,this.mode=i});Ve.MODE_SHORT="short",Ve.MODE_BLOCK="block",Ve.MODE_NONE="none";var ga=Ve,$n="declaredirective",Aa=P.extends($n,function(t,e,i,n){P.apply(this,[$n,i,n]),this.key=t,this.value=e}),Na=v.extends("do",function(t,e,i,n){v.apply(this,["do",i,n]),this.test=t,this.body=e}),zn="echo",ba=v.extends(zn,function(t,e,i,n){v.apply(this,[zn,i,n]),this.shortForm=e,this.expressions=t}),Kn="empty",La=m.extends(Kn,function(t,e,i){m.apply(this,[Kn,e,i]),this.expression=t}),Xn="encapsed",be=dt.extends(Xn,function(t,e,i,n,s){dt.apply(this,[Xn,t,e,n,s]),this.type=i});be.TYPE_STRING="string",be.TYPE_SHELL="shell",be.TYPE_HEREDOC="heredoc",be.TYPE_OFFSET="offset";var Ca=be,qn="encapsedpart",Sa=m.extends(qn,function(t,e,i,n,s){m.apply(this,[qn,n,s]),this.expression=t,this.syntax=e,this.curly=i}),Jn="entry",Ia=m.extends(Jn,function(t,e,i,n,s,o){m.apply(this,[Jn,s,o]),this.key=t,this.value=e,this.byRef=i,this.unpack=n}),Zn="enum",Oa=ht.extends(Zn,function(t,e,i,n,s,o){ht.apply(this,[Zn,t,s,o]),this.valueType=e,this.implements=i,this.body=n,this.attrGroups=[]}),ts="enumcase",Ra=P.extends(ts,function(t,e,i,n){P.apply(this,[ts,i,n]),this.name=t,this.value=e}),es="error",wa=P.extends(es,function(t,e,i,n,s,o){P.apply(this,[es,s,o]),this.message=t,this.token=e,this.line=i,this.expected=n}),is="eval",Da=m.extends(is,function(t,e,i){m.apply(this,[is,e,i]),this.source=t}),ns="exit",Pa=m.extends(ns,function(t,e,i,n){m.apply(this,[ns,i,n]),this.expression=t,this.useDie=e}),ss="expressionstatement",Ua=v.extends(ss,function(t,e,i){v.apply(this,[ss,e,i]),this.expression=t}),Ma=v.extends("for",function(t,e,i,n,s,o,l){v.apply(this,["for",o,l]),this.init=t,this.test=e,this.increment=i,this.shortForm=s,this.body=n}),rs="foreach",Fa=v.extends(rs,function(t,e,i,n,s,o,l){v.apply(this,[rs,o,l]),this.source=t,this.key=e,this.value=i,this.shortForm=s,this.body=n}),os="function",vi=ht.extends(os,function(t,e,i,n,s,o,l){ht.apply(this,[os,t,o,l]),this.arguments=e,this.byref=i,this.type=n,this.nullable=s,this.body=null,this.attrGroups=[]}),as="global",Ba=v.extends(as,function(t,e,i){v.apply(this,[as,e,i]),this.items=t}),hs="goto",Ha=v.extends(hs,function(t,e,i){v.apply(this,[hs,e,i]),this.label=t}),ls="halt",Ga=v.extends(ls,function(t,e,i){v.apply(this,[ls,e,i]),this.after=t}),cs="identifier",Va=P.extends(cs,function(t,e,i){P.apply(this,[cs,e,i]),this.name=t}),Qa=Va,Wa=v.extends("if",function(t,e,i,n,s,o){v.apply(this,["if",s,o]),this.test=t,this.body=e,this.alternate=i,this.shortForm=n}),us="include",Ya=m.extends(us,function(t,e,i,n,s){m.apply(this,[us,n,s]),this.once=t,this.require=e,this.target=i}),_s="inline",ja=dt.extends(_s,function(t,e,i,n){dt.apply(this,[_s,t,e,i,n])}),ds="interface",$a=ht.extends(ds,function(t,e,i,n,s,o){ht.apply(this,[ds,t,s,o]),this.extends=e,this.body=i,this.attrGroups=n}),ps="intersectiontype",za=ht.extends(ps,function(t,e,i){ht.apply(this,[ps,null,e,i]),this.types=t}),fs="isset",Ka=m.extends(fs,function(t,e,i){m.apply(this,[fs,e,i]),this.variables=t}),ks="label",Xa=v.extends(ks,function(t,e,i){v.apply(this,[ks,e,i]),this.name=t}),Ts="list",qa=m.extends(Ts,function(t,e,i,n){m.apply(this,[Ts,i,n]),this.items=t,this.shortForm=e}),ms="lookup",Gt=m.extends(ms,function(t,e,i,n,s){m.apply(this,[t||ms,n,s]),this.what=e,this.offset=i}),xs="magic",Ja=dt.extends(xs,function(t,e,i,n){dt.apply(this,[xs,t,e,i,n])}),Es="match",Za=m.extends(Es,function(t,e,i,n){m.apply(this,[Es,i,n]),this.cond=t,this.arms=e}),ys="matcharm",th=m.extends(ys,function(t,e,i,n){m.apply(this,[ys,i,n]),this.conds=t,this.body=e}),vs="method",eh=vi.extends(vs,function(){vi.apply(this,arguments),this.kind=vs}),gs="reference",Ot=P.extends(gs,function(t,e,i){P.apply(this,[t||gs,e,i])}),As="name",Le=Ot.extends(As,function(t,e,i,n){Ot.apply(this,[As,i,n]),this.name=t.replace(/\\$/,""),this.resolution=e});Le.UNQUALIFIED_NAME="uqn",Le.QUALIFIED_NAME="qn",Le.FULL_QUALIFIED_NAME="fqn",Le.RELATIVE_NAME="rn";var ih=Le,Ns="namespace",nh=se.extends(Ns,function(t,e,i,n,s){se.apply(this,[Ns,e,n,s]),this.name=t,this.withBrackets=i||!1}),bs="namedargument",sh=m.extends(bs,function(t,e,i,n){m.apply(this,[bs,i,n]),this.name=t,this.value=e}),rh=m.extends("new",function(t,e,i,n){m.apply(this,["new",i,n]),this.what=t,this.arguments=e}),Ls="noop",oh=P.extends(Ls,function(t,e){P.apply(this,[Ls,t,e])}),Cs="nowdoc",ah=dt.extends(Cs,function(t,e,i,n,s){dt.apply(this,[Cs,t,e,n,s]),this.label=i}),Ss="nullkeyword",hh=P.extends(Ss,function(t,e,i){P.apply(this,[Ss,e,i]),this.raw=t}),Is="nullsafepropertylookup",lh=Gt.extends(Is,function(t,e,i,n){Gt.apply(this,[Is,t,e,i,n])}),Os="number",ch=dt.extends(Os,function(t,e,i,n){dt.apply(this,[Os,t,e,i,n])}),Rs="offsetlookup",uh=Gt.extends(Rs,function(t,e,i,n){Gt.apply(this,[Rs,t,e,i,n])}),ws="parameter",_h=ht.extends(ws,function(t,e,i,n,s,o,l,r,c,u){ht.apply(this,[ws,t,c,u]),this.value=i,this.type=e,this.byref=n,this.variadic=s,this.readonly=o,this.nullable=l,this.flags=r||0,this.attrGroups=[]}),Ds="parentreference",dh=Ot.extends(Ds,function(t,e,i){Ot.apply(this,[Ds,e,i]),this.raw=t}),Ps="post",ph=It.extends(Ps,function(t,e,i,n){It.apply(this,[Ps,i,n]),this.type=t,this.what=e}),fh=It.extends("pre",function(t,e,i,n){It.apply(this,["pre",i,n]),this.type=t,this.what=e}),Us="print",kh=m.extends(Us,function(t,e,i){m.apply(this,[Us,e,i]),this.expression=t}),Ms="program",Th=se.extends(Ms,function(t,e,i,n,s,o){se.apply(this,[Ms,t,s,o]),this.errors=e,i&&(this.comments=i),n&&(this.tokens=n)}),Fs="property",mh=v.extends(Fs,function(t,e,i,n,s,o,l,r){v.apply(this,[Fs,l,r]),this.name=t,this.value=e,this.readonly=i,this.nullable=n,this.type=s,this.attrGroups=o}),Bs="propertylookup",xh=Gt.extends(Bs,function(t,e,i,n){Gt.apply(this,[Bs,t,e,i,n])}),Hs="propertystatement",Gs=v.extends(Hs,function(t,e,i,n,s){v.apply(this,[Hs,n,s]),this.properties=e,this.parseFlags(i)});Gs.prototype.parseFlags=function(t){t[0]===-1?this.visibility="":t[0]===null?this.visibility=null:t[0]===0?this.visibility="public":t[0]===1?this.visibility="protected":t[0]===2&&(this.visibility="private"),this.isStatic=t[1]===1};var Eh=Gs,Vs="retif",yh=m.extends(Vs,function(t,e,i,n,s){m.apply(this,[Vs,n,s]),this.test=t,this.trueExpr=e,this.falseExpr=i}),Qs="return",vh=v.extends(Qs,function(t,e,i){v.apply(this,[Qs,e,i]),this.expr=t}),Ws="selfreference",gh=Ot.extends(Ws,function(t,e,i){Ot.apply(this,[Ws,e,i]),this.raw=t}),Ys="silent",Ah=m.extends(Ys,function(t,e,i){m.apply(this,[Ys,e,i]),this.expr=t}),js="static",Nh=v.extends(js,function(t,e,i){v.apply(this,[js,e,i]),this.variables=t}),$s="staticvariable",bh=P.extends($s,function(t,e,i,n){P.apply(this,[$s,i,n]),this.variable=t,this.defaultValue=e}),zs="staticlookup",Lh=Gt.extends(zs,function(t,e,i,n){Gt.apply(this,[zs,t,e,i,n])}),Ks="staticreference",Ch=Ot.extends(Ks,function(t,e,i){Ot.apply(this,[Ks,e,i]),this.raw=t}),Xs="string",Sh=dt.extends(Xs,function(t,e,i,n,s,o){dt.apply(this,[Xs,e,n,s,o]),this.unicode=i,this.isDoubleQuote=t}),qs="switch",Ih=v.extends(qs,function(t,e,i,n,s){v.apply(this,[qs,n,s]),this.test=t,this.body=e,this.shortForm=i}),Js="throw",Oh=v.extends(Js,function(t,e,i){v.apply(this,[Js,e,i]),this.what=t}),Zs="trait",Rh=ht.extends(Zs,function(t,e,i,n){ht.apply(this,[Zs,t,i,n]),this.body=e}),tr="traitalias",wh=P.extends(tr,function(t,e,i,n,s,o){P.apply(this,[tr,s,o]),this.trait=t,this.method=e,this.as=i,this.visibility="",n&&(n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"))}),er="traitprecedence",Dh=P.extends(er,function(t,e,i,n,s){P.apply(this,[er,n,s]),this.trait=t,this.method=e,this.instead=i}),ir="traituse",Ph=P.extends(ir,function(t,e,i,n){P.apply(this,[ir,i,n]),this.traits=t,this.adaptations=e}),Uh=v.extends("try",function(t,e,i,n,s){v.apply(this,["try",n,s]),this.body=t,this.catches=e,this.always=i}),nr="typereference",sr=Ot.extends(nr,function(t,e,i,n){Ot.apply(this,[nr,i,n]),this.name=t,this.raw=e});sr.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var Mh=sr,rr="unary",Fh=It.extends(rr,function(t,e,i,n){It.apply(this,[rr,i,n]),this.type=t,this.what=e}),or="uniontype",Bh=ht.extends(or,function(t,e,i){ht.apply(this,[or,null,e,i]),this.types=t}),ar="unset",Hh=v.extends(ar,function(t,e,i){v.apply(this,[ar,e,i]),this.variables=t}),hr="usegroup",Gh=v.extends(hr,function(t,e,i,n,s){v.apply(this,[hr,n,s]),this.name=t,this.type=e,this.items=i}),lr="useitem",gi=v.extends(lr,function(t,e,i,n,s){v.apply(this,[lr,n,s]),this.name=t,this.alias=e,this.type=i});gi.TYPE_CONST="const",gi.TYPE_FUNCTION="function";var Vh=gi,cr="variable",Qh=m.extends(cr,function(t,e,i,n){m.apply(this,[cr,i,n]),this.name=t,this.curly=e||!1}),ur="variadic",Wh=m.extends(ur,function(t,e,i){m.apply(this,[ur,e,i]),this.what=t}),_r="variadicplaceholder",Yh=P.extends(_r,function(t,e){P.apply(this,[_r,t,e])}),dr="while",jh=v.extends(dr,function(t,e,i,n,s){v.apply(this,[dr,n,s]),this.test=t,this.body=e,this.shortForm=i}),pr="yield",$h=m.extends(pr,function(t,e,i,n){m.apply(this,[pr,i,n]),this.value=t,this.key=e}),fr="yieldfrom",zh=m.extends(fr,function(t,e,i){m.apply(this,[fr,e,i]),this.value=t}),ut=function(t,e){this.withPositions=t,this.withSource=e};ut.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(t,e){t.forEach(function(i){ut.precedence[i]=e+1})}),ut.prototype.isRightAssociative=function(t){return t==="**"||t==="??"},ut.prototype.swapLocations=function(t,e,i,n){this.withPositions&&(t.loc.start=e.loc.start,t.loc.end=i.loc.end,this.withSource&&(t.loc.source=n.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))},ut.prototype.resolveLocations=function(t,e,i,n){this.withPositions&&(t.loc.start.offset>e.loc.start.offset&&(t.loc.start=e.loc.start),t.loc.end.offset<i.loc.end.offset&&(t.loc.end=i.loc.end),this.withSource&&(t.loc.source=n.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))},ut.prototype.resolvePrecedence=function(t,e){var i,n,s;return t.kind==="call"?this.resolveLocations(t,t.what,t,e):t.kind==="propertylookup"||t.kind==="staticlookup"||t.kind==="offsetlookup"&&t.offset?this.resolveLocations(t,t.what,t.offset,e):t.kind==="bin"?t.right&&!t.right.parenthesizedExpression&&(t.right.kind==="bin"?(n=ut.precedence[t.type],s=ut.precedence[t.right.type],n&&s&&s<=n&&(t.type!==t.right.type||!this.isRightAssociative(t.type))&&(i=t.right,t.right=t.right.left,this.swapLocations(t,t.left,t.right,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i)):t.right.kind==="retif"&&(n=ut.precedence[t.type],s=ut.precedence["?"],n&&s&&s<=n&&(i=t.right,t.right=t.right.test,this.swapLocations(t,t.left,t.right,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i))):t.kind!=="silent"&&t.kind!=="cast"||!t.expr||t.expr.parenthesizedExpression?t.kind==="unary"?t.what&&!t.what.parenthesizedExpression&&(t.what.kind==="bin"?(i=t.what,t.what=t.what.left,this.swapLocations(t,t,t.what,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):t.what.kind==="retif"&&(i=t.what,t.what=t.what.test,this.swapLocations(t,t,t.what,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i)):t.kind==="retif"?t.falseExpr&&t.falseExpr.kind==="retif"&&!t.falseExpr.parenthesizedExpression&&(i=t.falseExpr,t.falseExpr=i.test,this.swapLocations(t,t.test,t.falseExpr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i):t.kind==="assign"?t.right&&t.right.kind==="bin"&&!t.right.parenthesizedExpression&&(n=ut.precedence["="],s=ut.precedence[t.right.type],n&&s&&s<n&&(i=t.right,t.right=t.right.left,i.left=t,this.swapLocations(i,i.left,t.right,e),t=i)):t.kind==="expressionstatement"&&this.swapLocations(t,t.expression,t,e):t.expr.kind==="bin"?(i=t.expr,t.expr=t.expr.left,this.swapLocations(t,t,t.expr,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):t.expr.kind==="retif"&&(i=t.expr,t.expr=t.expr.test,this.swapLocations(t,t,t.expr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i),t},ut.prototype.prepare=function(t,e,i){var n=null;(this.withPositions||this.withSource)&&(n=i.position());var s=this,o=function l(){var r=null,c=Array.prototype.slice.call(arguments);if(c.push(e),s.withPositions||s.withSource){var u=null;s.withSource&&(u=i.lexer._input.substring(n.offset,i.prev[2])),r=new ta(u,n,new ln(i.prev[0],i.prev[1],i.prev[2])),c.push(r)}t||(t=c.shift());var a=s[t];if(typeof a!="function")throw new Error('Undefined node "'+t+'"');var y=Object.create(a.prototype);return a.apply(y,c),l.instance=y,l.trailingComments&&(y.trailingComments=l.trailingComments),typeof l.postBuild=="function"&&l.postBuild(y),i.debug&&delete s.stack[l.stackUid],s.resolvePrecedence(y,i)};return i.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:n,stack:new Error().stack.split(`
`).slice(3,5)},o.stackUid=this.stackUid),o.setTrailingComments=function(l){o.instance?o.instance.setTrailingComments(l):o.trailingComments=l},o.destroy=function(l){e&&(l?l.leadingComments?l.leadingComments=e.concat(l.leadingComments):l.leadingComments=e:i._docIndex=i._docs.length-e.length),i.debug&&delete s.stack[o.stackUid]},o},ut.prototype.checkNodes=function(){var t=[];for(var e in this.stack)Object.prototype.hasOwnProperty.call(this.stack,e)&&(this.stack[e].key=e,t.push(this.stack[e]));return this.stack={},t},[ea,ia,na,sa,ra,oa,aa,se,ha,la,ca,ua,_a,da,pa,fa,ka,Ta,ma,Ne,xa,Ea,ya,yi,va,ht,ga,Aa,Na,ba,La,Ca,Sa,Ia,Oa,Ra,wa,Da,Pa,m,Ua,Ma,Fa,vi,Ba,Ha,Ga,Qa,Wa,Ya,ja,$a,za,Ka,Xa,qa,dt,Gt,Ja,Za,th,eh,ih,nh,sh,rh,P,oh,ah,hh,lh,ch,uh,It,_h,dh,ph,fh,kh,Th,mh,xh,Eh,Ot,yh,vh,gh,Ah,v,Nh,bh,Lh,Ch,Sh,Ih,Oh,Rh,wh,Dh,Ph,Uh,Mh,Fh,Bh,Hh,Gh,Vh,Qh,Wh,Yh,jh,$h,zh].forEach(function(t){ut.prototype[t.kind]=t});var kr=ut;function Ai(t,e){for(var i=Object.keys(t),n=i.length;n--;){var s=i[n],o=t[s];o===null?delete e[s]:typeof o=="function"?e[s]=o.bind(e):Array.isArray(o)?e[s]=Array.isArray(e[s])?e[s].concat(o):o:$t(o)==="object"?e[s]=$t(e[s])==="object"?Ai(o,e[s]):o:e[s]=o}return e}var xt=function(t){if(typeof this=="function")return new this(t);if(this.tokens=fn,this.lexer=new hn(this),this.ast=new kr,this.parser=new dn(this.lexer,this.ast),t&&$t(t)==="object"){if(t.parser&&(t.lexer||(t.lexer={}),t.parser.version)){if(typeof t.parser.version=="string"){var e=t.parser.version.split(".");if(e=100*parseInt(e[0])+parseInt(e[1]),isNaN(e))throw new Error("Bad version number : "+t.parser.version);t.parser.version=e}else if(typeof t.parser.version!="number")throw new Error("Expecting a number for version");if(t.parser.version<500||t.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Ai(t,this),this.lexer.version=this.parser.version}},Ni=function(t){return typeof t.write=="function"?t.toString():t};xt.create=function(t){return new xt(t)},xt.parseEval=function(t,e){return new xt(e).parseEval(t)},xt.prototype.parseEval=function(t){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,t=Ni(t),this.parser.parse(t,"eval")},xt.parseCode=function(t,e,i){return $t(e)!=="object"||i||(i=e,e="unknown"),new xt(i).parseCode(t,e)},xt.prototype.parseCode=function(t,e){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,t=Ni(t),this.parser.parse(t,e)},xt.tokenGetAll=function(t,e){return new xt(e).tokenGetAll(t)},xt.prototype.tokenGetAll=function(t){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,t=Ni(t);var e=this.lexer.EOF,i=this.tokens.values;this.lexer.setInput(t);for(var n=this.lexer.lex()||e,s=[];n!=e;){var o=this.lexer.yytext;Object.prototype.hasOwnProperty.call(i,n)&&(o=[i[n],o,this.lexer.yylloc.first_line]),s.push(o),n=this.lexer.lex()||e}return s};var Xt=xt,Kh=fn,Xh=hn,qh=kr,Jh=dn,Zh=Ai,tl=xt,el=xt;Xt.tokens=Kh,Xt.lexer=Xh,Xt.AST=qh,Xt.parser=Jh,Xt.combine=Zh,Xt.Engine=tl,Xt.default=el;var Tr=function(t,e,i){var n=i&&i.parentParser==="markdown";if(!t&&n)return"";t=t.replace(/\?>\r?\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var s,o=new Xt({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),l=t.indexOf("<?php")!==-1,r=n&&!l;try{s=r?o.parseEval(t):o.parseCode(t)}catch(c){throw c instanceof SyntaxError&&"lineNumber"in c&&(c.loc={start:{line:c.lineNumber,column:c.columnNumber}},delete c.lineNumber,delete c.columnNumber),c}return s.extra={parseAsEval:r},s.comments.forEach(function(c){c.value[c.value.length-1]==="\r"&&(c.value=c.value.slice(0,-1),c.loc.end.offset=c.loc.end.offset-1),c.value[c.value.length-1]===`
`&&(c.value=c.value.slice(0,-1),c.loc.end.offset=c.loc.end.offset-1)}),s},ce=jt.default.util,il=ce.hasNewline,nl=ce.skipEverythingButNewLine,sl=ce.skipNewline,rl=ce.isNextLineEmpty,ol=ce.isPreviousLineEmpty,al=ce.getNextNonSpaceNonCommentCharacterIndex,hl=jt.default.version;function bi(t,e){return parseInt(hl[0])>1?t[e]:t}var mr={};function Li(t){return mr[t]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(t,e){t.forEach(function(i){mr[i]=e})});var xr=["==","!=","===","!==","<>","<=>"],Qe=["*","/","%"],Ci=[">>","<<"];function Er(t){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(t.kind)}function yr(t){var e=t.body;return e?(e.kind==="block"&&(e=e.children),e[0]):null}function qt(t){var e=t.children||t.body||t.adaptations;return Array.isArray(e)?e:null}function vr(t){var e=t.getParentNode();return e?qt(e):null}function We(t){return t.length>0?t[t.length-1]:null}function Si(t){var e=t.getValue();if(e.kind==="program"){var i=qt(e);return!(!i||i.length===0)&&i[0].kind==="inline"}if(e.kind==="switch"){if(!e.body)return!1;var n=qt(e.body);if(n.length===0)return!1;var s=vt(n,1)[0];if(!s.body)return!1;var o=qt(s.body);return o.length!==0&&o[0].kind==="inline"}var l=yr(e);return!!l&&l.kind==="inline"}var gr=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(t,e){return t[e.toLowerCase()]=e,t},{}),D={printNumber:function(t){return t.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:Li,isBitwiseOperator:function(t){return!!Ci[t]||t==="|"||t==="^"||t==="&"},shouldFlatten:function(t,e){return Li(e)===Li(t)&&t!=="**"&&(!xr.includes(t)||!xr.includes(e))&&!(e==="%"&&Qe.includes(t)||t==="%"&&Qe.includes(e))&&(e===t||!Qe.includes(e)||!Qe.includes(t))&&(!Ci.includes(t)||!Ci.includes(e))},nodeHasStatement:Er,getNodeListProperty:qt,getParentNodeListProperty:vr,getLast:We,getPenultimate:function(t){return t.length>1?t[t.length-2]:null},isLastStatement:function(t){var e=vr(t);if(!e)return!0;var i=t.getValue();return e[e.length-1]===i},getBodyFirstChild:yr,lineShouldEndWithSemicolon:function(t){var e=t.getValue(),i=t.getParentNode();if(!i)return!1;if(["for","foreach","while","do","if","switch"].includes(i.kind)&&e.kind!=="block"&&e.kind!=="if"&&(i.body===e||i.alternate===e))return!0;if(!Er(i)||e.kind==="echo"&&e.shortForm)return!1;if(e.kind==="traituse")return!e.adaptations;if(e.kind==="method"&&e.isAbstract)return!0;if(e.kind==="method"){var n=t.getParentNode();if(n&&n.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(e.kind)},fileShouldEndWithHardline:function(t){var e=t.getValue(),i=e.kind==="program",n=e.children&&We(e.children);if(!i||n&&["halt","inline"].includes(n.kind))return!1;if(n&&(n.kind==="declare"||n.kind==="namespace")){var s=n.children.length>0&&We(n.children);if(s&&["halt","inline"].includes(s.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(t){var e=t.replace(/^\\/,"");return e.indexOf("\\")!==-1?e:t},hasDanglingComments:function(t){return t.comments&&t.comments.some(function(e){return!e.leading&&!e.trailing})},hasLeadingComment:function(t){return t.comments&&t.comments.some(function(e){return e.leading})},hasTrailingComment:function(t){return t.comments&&t.comments.some(function(e){return e.trailing})},docShouldHaveTrailingNewline:function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e.getNode(i),s=e.getNode(i+1),o=e.getNode(i+2);if(!s)return!1;if(o&&["call","new","echo"].includes(o.kind)&&!["call","array"].includes(s.kind)||s.kind==="parameter"){var l=o.arguments.length-1,r=o.arguments.indexOf(s);return r!==l}if(o&&o.kind==="for"){var c=o.init.indexOf(s);if(c!==-1)return c!==o.init.length-1;var u=o.test.indexOf(s);if(u!==-1)return u!==o.test.length-1;var a=o.increment.indexOf(s);if(a!==-1)return a!==o.increment.length-1}if(s.kind==="bin")return s.left===n||t(e,i+1);if(s.kind==="case"&&s.test===n)return!0;if(s.kind==="staticvariable"){var y=o.variables.length-1,g=o.variables.indexOf(s);return g!==y}if(s.kind==="entry"){if(s.key===n)return!0;var I=o.items.length-1,H=o.items.indexOf(s);return H!==I}if(["call","new"].includes(s.kind)){var A=s.arguments.length-1,U=s.arguments.indexOf(n);return U!==A}if(s.kind==="echo"){var C=s.expressions.length-1,$=s.expressions.indexOf(n);return $!==C}if(s.kind==="array"){var W=s.items.length-1,B=s.items.indexOf(n);return B!==W}return s.kind==="retif"&&t(e,i+1)},isLookupNode:function(t){return t.kind==="propertylookup"||t.kind==="nullsafepropertylookup"||t.kind==="staticlookup"||t.kind==="offsetlookup"},isFirstChildrenInlineNode:Si,shouldPrintHardLineAfterStartInControlStructure:function(t){var e=t.getValue();return!["try","catch"].includes(e.kind)&&Si(t)},shouldPrintHardLineBeforeEndInControlStructure:function(t){var e=t.getValue();if(["try","catch"].includes(e.kind))return!0;if(e.kind==="switch"){var i=qt(e.body);if(i.length===0)return!0;var n=We(i);if(!n.body)return!0;var s=qt(n.body);return s.length===0||s[0].kind!=="inline"}return!Si(t)},getAlignment:function(t){var e=t.split(`
`).pop();return e.length-e.trimLeft().length+1},isProgramLikeNode:function(t){return["program","declare","namespace"].includes(t.kind)},isReferenceLikeNode:function(t){return["name","parentreference","selfreference","staticreference"].includes(t.kind)},getNodeKindIncludingLogical:function(t){return t.kind==="bin"&&["||","&&"].includes(t.type)?"logical":t.kind},useDoubleQuote:function(t,e){if(t.isDoubleQuote===e.singleQuote){var i=t.raw.slice(t.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return t.isDoubleQuote?i:!i}return t.isDoubleQuote},hasEmptyBody:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",i=t.getValue();return i[e]&&i[e].children&&i[e].children.length===0&&(!i[e].comments||i[e].comments.length===0)},isNextLineEmptyAfterNamespace:function(t,e,i){var n=i(e);return n=nl(t,n),n=sl(t,n),il(t,n)},shouldPrintHardlineBeforeTrailingComma:function(t){return t.kind==="nowdoc"||t.kind==="encapsed"&&t.type==="heredoc"||t.kind==="entry"&&(t.value.kind==="nowdoc"||t.value.kind==="encapsed"&&t.value.type==="heredoc")},isDocNode:function(t){return t.kind==="nowdoc"||t.kind==="encapsed"&&t.type==="heredoc"},getAncestorNode:function(t,e){var i=function(n,s){for(var o,l=[].concat(s),r=-1;o=n.getParentNode(++r);)if(l.indexOf(o.kind)!==-1)return r;return-1}(t,e);return i===-1?null:t.getParentNode(i)},getNextNode:function(t,e){var i=t.getParentNode(),n=qt(i);if(!n)return null;var s=n.indexOf(e);return s===-1?null:i.children[s+1]},normalizeMagicMethodName:function(t){var e=t.toLowerCase();return gr[e]?gr[e]:t},isPreviousLineEmpty:function(t,e,i){return ol(t,e,bi(i,"locStart"))},isNextLineEmpty:function(t,e,i){return rl(t,e,bi(i,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(t,e,i){return al(t,e,bi(i,"locEnd"))}},ue=jt.default.util,Rt=ue.addLeadingComment,Et=ue.addDanglingComment,wt=ue.addTrailingComment,ll=ue.skipNewline,Ye=ue.hasNewline,cl=ue.hasNewlineInRange,re=jt.default.doc.builders,Jt=re.concat,Ar=re.join,ul=re.indent,Mt=re.hardline,Nr=re.cursor,br=re.lineSuffix,_l=re.breakParent,Ce=D.getNextNonSpaceNonCommentCharacterIndex,dl=D.isNextLineEmpty,pl=D.isPreviousLineEmpty,fl=D.isLookupNode;function je(t,e){var i=t.children;i.length===0?Et(t,e):Rt(i[0],e)}function Ii(t,e){t.kind==="block"?je(t,e):Rt(t,e)}function Lr(t,e,i,n,s,o){var l=Ce(t,s,o),r=t.charAt(l);return e&&e.kind==="identifier"&&i&&(i.kind==="function"||i.kind==="method")&&r===")"?(wt(i,s),!0):!(!i||i.kind!=="function"&&i.kind!=="method"||!n||n.kind!=="block")&&(je(n,s),!0)}function Oi(t,e,i,n,s,o){if(!i||i.kind!=="if"||!n)return!1;var l=Ce(t,s,o);return t.charAt(l)===")"?(wt(e,s),!0):e===i.body&&n===i.alternate?(Et(i,s),!0):n.kind==="if"?(Ii(n.body,s),!0):i.body===n&&(Rt(n,s),!0)}function Ri(t,e,i){if(t&&["class","interface","trait"].includes(t.kind)){if(e&&t.extends){if(Array.isArray(t.extends)){if(t.extends.some(function(n){if(e&&e===n)return Et(e,i),!0}))return!0}else if(e===t.extends)return Et(e,i),!0}if(e&&t.implements&&t.implements.some(function(n){if(e&&e===n)return Et(e,i),!0}))return!0;if(!(t.body&&t.body.length>0))return Et(t,i),!0}return!!(e&&e.kind==="class"&&e.isAnonymous&&e.leadingComments&&i.kind==="commentblock")}function wi(t,e,i,n,s){if(e&&(e.kind==="function"||e.kind==="method")){for(var o=0,l=0;l<e.arguments.length;l++)o=s.locEnd(e.arguments[l])>o?s.locEnd(e.arguments[l]):o;var r=e.body&&s.locStart(n)>o&&s.locEnd(n)<s.locStart(e.body),c=Ce(t,n,s);if(e.type&&r&&t.charAt(c)!==")")return s.locEnd(n)<s.locStart(e.type)?(Et(e.type,n),!0):(wt(e.type,n),!0)}return!1}function Di(t,e,i,n,s){return!(!i||!["function","method","parameter"].includes(i.kind))&&e.kind==="typereference"&&n.kind==="identifier"&&(wt(e,s),!0)}function Cr(t,e){return!(!t||!["label","goto"].includes(t.kind))&&(wt(t,e),!0)}function Pi(t,e,i,n){return i&&i.kind==="inline"?(i.leadingComments||(i.leadingComments=[]),i.leadingComments.includes(n)||i.leadingComments.push(n),!0):!(t||i||!e||e.kind!=="inline")&&(Et(e,n),!0)}function Sr(t,e,i){return!(!t||t.kind!=="try"||!e)&&(e.kind==="block"?(je(e,i),!0):e.kind==="try"?(Ii(e.always,i),!0):e.kind==="catch"&&(Ii(e.body,i),!0))}function Ir(t,e,i,n){return i||e||!t||t.kind!=="namespace"||t.withBrackets?!(e||!t||t.kind!=="namespace"||t.withBrackets)&&(Et(t,n),!0):(wt(t,n),!0)}function Or(t,e,i,n){return!(!t||t.kind!=="declare")&&(!e||e.kind!=="noop")&&(i&&t.directives[0]!==i?!(!i||!e)&&(Rt(i,n),!0):(t.mode==="none"?wt(t,n):Et(t,n),!0))}function Ui(t,e,i,n,s,o){if(!i||i.kind!=="while"||!n)return!1;var l=Ce(t,s,o);return t.charAt(l)===")"?(wt(e,s),!0):n.kind==="block"&&(je(n,s),!0)}function Mi(t,e){return t.getValue().printed=!0,e.printer.printComment(t,e)}function Rr(t,e,i){return t.getNode()===e.cursorNode&&t.getValue()?Jt([Nr,i,Nr]):i}var O={handleOwnLineComment:function(t,e,i){var n=t.precedingNode,s=t.enclosingNode,o=t.followingNode;return Lr(e,n,s,o,t,i)||function(l,r,c){return l&&fl(l)&&r&&["identifier","variable","encapsed"].includes(r.kind)?(Rt(l,c),!0):!1}(s,o,t)||Oi(e,n,s,o,t,i)||Ui(e,n,s,o,t,i)||Sr(s,o,t)||Ri(s,o,t)||Di(e,n,s,o,t)||wi(e,s,o,t,i)||function(l,r,c,u){return!c&&l&&(l.kind==="for"||l.kind==="foreach")?(l.body&&l.body.kind!=="block"?Rt(c,u):Rt(l,u),!0):!1}(s,0,o,t)||Pi(s,n,o,t)||Or(s,n,o,t)},handleEndOfLineComment:function(t,e,i){var n=t.precedingNode,s=t.enclosingNode,o=t.followingNode;return function(l,r,c,u,a){return!r&&!u&&c&&c.kind==="array"?(wt(c,a),!0):!1}(0,n,s,o,t)||function(l,r,c,u,a){return c&&c.kind==="return"&&!c.expr?(wt(c,a),!0):!1}(0,0,s,0,t)||Lr(e,n,s,o,t,i)||function(l,r,c,u,a,y){var g=r&&!cl(a,y.locEnd(r),y.locStart(u));return(!r||!g)&&l&&l.kind==="retif"&&c?(Rt(c,u),!0):!1}(s,n,o,t,e,i)||Oi(e,n,s,o,t,i)||Ui(e,n,s,o,t,i)||Sr(s,o,t)||Ri(s,o,t)||Di(e,n,s,o,t)||wi(e,s,o,t,i)||function(l,r){return l&&l.kind==="entry"?(Rt(l,r),!0):!1}(s,t)||function(l,r,c){return r&&r.kind==="call"&&l&&r.what===l&&r.arguments.length>0?(Rt(r.arguments[0],c),!0):!1}(n,s,t)||function(l,r,c){if(l&&l.kind==="assign"&&r){var u=l.loc.start.offset+l.loc.source.indexOf("=");if(c.loc.start.offset>u)return Rt(r,c),!0}return!1}(s,o,t)||Pi(s,n,o,t)||Ir(s,n,o,t)||Or(s,n,o,t)||Cr(s,t)},handleRemainingComment:function(t,e,i){var n=t.precedingNode,s=t.enclosingNode,o=t.followingNode;return Oi(e,n,s,o,t,i)||Ui(e,n,s,o,t,i)||function(l,r,c,u){var a=Ce(l,c,u);return l.charAt(a)!==")"?!1:r&&(r.kind==="function"||r.kind==="closure"||r.kind==="method"||r.kind==="call"||r.kind==="new")&&r.arguments.length===0?(Et(r,c),!0):!1}(e,s,t,i)||Ri(s,o,t)||function(l,r,c){return l&&l.kind==="traituse"&&l.adaptations&&!l.adaptations.length?(Et(l,c),!0):!1}(s,0,t)||Di(e,n,s,o,t)||wi(e,s,o,t,i)||Cr(s,t)||function(l,r,c,u){return r&&r.kind==="halt"?(Et(r,u),!0):l&&l.kind==="halt"?(Et(l,u),!0):!1}(n,s,0,t)||function(l,r){return l&&(l.kind==="continue"||l.kind==="break")&&!l.label?(wt(l,r),!0):!1}(s,t)||Pi(s,n,o,t)||Ir(s,n,o,t)},getCommentChildNodes:function(t){return $t(t)!=="object"?[]:function(e){return Object.keys(e).filter(function(i){return i!=="kind"&&i!=="loc"&&i!=="errors"&&i!=="extra"&&i!=="comments"&&i!=="leadingComments"&&i!=="enclosingNode"&&i!=="precedingNode"&&i!=="followingNode"}).map(function(i){return e[i]})}(t)},canAttachComment:function(t){return t.kind&&t.kind!=="commentblock"&&t.kind!=="commentline"},isBlockComment:function(t){return t.kind==="commentblock"},printDanglingComments:function(t,e,i,n){var s=[],o=t.getValue();return o&&o.comments?(t.each(function(l){var r=l.getValue();!r||r.leading||r.trailing||n&&!n(r)||s.push(Mi(l,e))},"comments"),s.length===0?"":i?Ar(Mt,s):ul(Jt([Mt,Ar(Mt,s)]))):""},hasLeadingComment:function(t){return t.comments&&t.comments.some(function(e){return e.leading})},hasTrailingComment:function(t){return t.comments&&t.comments.some(function(e){return e.trailing})},hasLeadingOwnLineComment:function(t,e,i){return e.comments&&e.comments.some(function(n){return n.leading&&Ye(t,i.locEnd(n))})},printComments:function(t,e){var i=[];return t.forEach(function(n,s,o){n.printed=!0;var l=o.length===s+1;i.push(n.value),l||i.push(Mt),dl(e.originalText,n,e)&&!l&&i.push(Mt)}),Jt(i)},printAllComments:function(t,e,i,n){var s=t.getValue(),o=e(t),l=s&&s.comments;if(!l||l.length===0)return Rr(t,i,o);var r=[],c=[n?";":"",o];return t.each(function(u){var a=u.getValue(),y=a.leading,g=a.trailing;if(y){var I=function(A,U,C){var $=A.getValue(),W=Mi(A,C);if(!W)return"";var B=C.printer.isBlockComment&&C.printer.isBlockComment($);return Jt(B?[W,Ye(C.originalText,C.locEnd($))?Mt:" "]:[W,Mt])}(u,0,i);if(!I)return;r.push(I);var H=i.originalText;Ye(H,ll(H,i.locEnd(a)))&&r.push(Mt)}else g&&c.push(function(A,U,C){var $=A.getValue(),W=Mi(A,C);if(!W)return"";var B=C.printer.isBlockComment&&C.printer.isBlockComment($);if(Ye(C.originalText,C.locStart($),{backwards:!0})){var S=pl(C.originalText,$,C);return br(Jt([Mt,S?Mt:"",W]))}return Jt(B?[" ",W]:[br(Jt([" ",W])),B?"":_l])}(u,0,i))},"comments"),Rr(t,i,Jt(r.concat(c)))}};function wr(){}wr.strictEqual=function(){};var kl=wr,Dr=D.getPrecedence,Tl=D.shouldFlatten,ml=D.isBitwiseOperator,Pr=function(t){var e=t.getParentNode();if(!e)return!1;var i=t.getName(),n=t.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(e.kind))return!1;switch(n.kind){case"pre":case"post":if(e.kind==="unary")return n.kind==="pre"&&(n.type==="+"&&e.type==="+"||n.type==="-"&&e.type==="-");case"unary":switch(e.kind){case"unary":return n.type===e.type&&(n.type==="+"||n.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return i==="what"&&e.what===n;case"bin":return e.type==="**"&&i==="left";default:return!1}case"bin":switch(e.kind){case"assign":case"retif":return["and","xor","or"].includes(n.type);case"silent":case"cast":return n.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return i==="what"&&e.what===n;case"bin":var s=e.type,o=Dr(s),l=n.type,r=Dr(l);return o>r||s==="||"&&l==="&&"||(o===r&&i==="right"?(kl.strictEqual(e.right,n),!0):o===r&&!Tl(s,l)||(o<r&&l==="%"?s==="+"||s==="-":!!ml(s)));default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return e.kind==="call"&&i==="what"&&e.what===n&&n.parenthesizedExpression;case"clone":case"new":switch(e.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return i==="what"&&e.what===n;default:return!1}case"yield":switch(e.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return i==="what"&&e.what===n;case"retif":return e.test===n;default:return!(!n.key&&!n.value)}case"assign":return(e.kind!=="for"||!e.init.includes(n)&&!e.increment.includes(n))&&e.kind!=="assign"&&e.kind!=="static"&&!["if","do","while","foreach","switch"].includes(e.kind)&&e.kind!=="silent"&&e.kind!=="call";case"retif":switch(e.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(i==="test"&&!e.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return i==="what"&&e.what===n;default:return!1}case"closure":switch(e.kind){case"call":return i==="what"&&e.what===n;case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return n.parenthesizedExpression;case"string":case"array":switch(e.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(n.kind)||e.kind!=="offsetlookup")&&i==="what"&&e.what===n;default:return!1}case"print":case"include":return e.kind==="bin"}return!1},pt=jt.default.doc.builders,Ur=pt.breakParent,h=pt.concat,et=pt.join,G=pt.line,xl=pt.lineSuffix,T=pt.group,_e=pt.conditionalGroup,x=pt.indent,El=pt.dedent,Zt=pt.ifBreak,f=pt.hardline,R=pt.softline,de=pt.literalline,yl=pt.align,vl=pt.dedentToRoot,te=jt.default.doc.utils.willBreak,Fi=jt.default.util,gl=Fi.isNextLineEmptyAfterIndex,Al=Fi.hasNewline,Mr=Fi.hasNewlineInRange,ee=D.getLast,Nl=D.getPenultimate,Fr=D.isLastStatement,bl=D.lineShouldEndWithSemicolon,Ll=D.printNumber,Br=D.shouldFlatten,Hr=D.maybeStripLeadingSlashFromUse,Cl=D.fileShouldEndWithHardline,gt=D.hasDanglingComments,Gr=D.hasLeadingComment,Vr=D.hasTrailingComment,Qr=D.docShouldHaveTrailingNewline,yt=D.isLookupNode,Bi=D.isFirstChildrenInlineNode,Sl=D.shouldPrintHardLineAfterStartInControlStructure,Il=D.shouldPrintHardLineBeforeEndInControlStructure,Ol=D.getAlignment,Hi=D.isProgramLikeNode,pe=D.getNodeKindIncludingLogical,Rl=D.useDoubleQuote,Wr=D.hasEmptyBody,wl=D.isNextLineEmptyAfterNamespace,Yr=D.shouldPrintHardlineBeforeTrailingComma,Gi=D.isDocNode,Vi=D.getAncestorNode,Qi=D.isReferenceLikeNode,Dl=D.getNextNode,Pl=D.normalizeMagicMethodName,Ul=D.getNextNonSpaceNonCommentCharacterIndex,oe=D.isNextLineEmpty;function fe(t,e){return parseFloat(t)>=parseFloat(e)}function Se(t,e){return!!t.trailingCommaPHP&&fe(t.phpVersion,e)}function Wi(t){return t.braceStyle!=="1tbs"}function Yi(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return h([n?"?":"","->",t.call(i,"offset")])}function jr(t,e,i){return Yi(t,e,i,!0)}function $r(t,e,i){var n=t.getValue(),s=!["variable","identifier"].includes(n.offset.kind);return h(["::",s?"{":"",t.call(i,"offset"),s?"}":""])}function zr(t,e,i){var n=t.getValue(),s=n.offset&&n.offset.kind==="number"||Vi(t,"encapsed");return h(["[",n.offset?T(h([x(h([s?"":R,t.call(i,"offset")])),s?"":R])):"","]"])}function Kr(t){return t.kind==="array"&&(t.items.length>0||t.comments)||t.kind==="function"||t.kind==="method"||t.kind==="closure"}function Ml(t){var e=ee(t),i=Nl(t);return!Gr(e)&&!Vr(e)&&Kr(e)&&(!i||i.kind!==e.kind)}function Fl(t){if(t.length!==2)return!1;var e=vt(t,2),i=e[0],n=e[1];return!(i.comments&&i.comments.length||i.kind!=="function"&&i.kind!=="method"&&i.kind!=="closure"||n.kind==="retif"||Kr(n))}function Ft(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",s=t.getValue()[n];if(s.length===0)return h(["(",O.printDanglingComments(t,e,!0),")"]);var o=!1,l=!1,r=s.length-1,c=t.map(function(B,S){var Q=B.getNode(),z=[i(B)];return S===r||(oe(e.originalText,Q,e)?(S===0&&(l=!0),o=!0,z.push(",",f,f)):z.push(",",G)),h(z)},n),u=t.getValue(),a=ee(s),y=Se(e,"7.3")&&["call","new","unset","isset"].includes(u.kind)||Se(e,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(u.kind)?x(h([a&&Yr(a)?f:"",","])):"";function g(){return T(h(["(",x(h([G,h(c)])),y,G,")"]),{shouldBreak:!0})}var I=Fl(s),H=Ml(s);if(I||H){var A,U=(I?c.slice(1).some(te):c.slice(0,-1).some(te))||o,C=0;t.each(function(B){I&&C===0&&(A=[h([B.call(function(S){return i(S,{expandFirstArg:!0})}),c.length>1?",":"",l?f:G,l?f:""])].concat(c.slice(1))),H&&C===s.length-1&&(A=c.slice(0,-1).concat(B.call(function(S){return i(S,{expandLastArg:!0})}))),C++},n);var $=c.some(te),W=h(["(",h(A),")"]);return h([$?Ur:"",_e([$?Zt(g(),W):W,h(I?["(",T(A[0],{shouldBreak:!0}),h(A.slice(1)),")"]:["(",h(c.slice(0,-1)),T(ee(A),{shouldBreak:!0}),")"]),T(h(["(",x(h([G,h(c)])),Zt(y),G,")"]),{shouldBreak:!0})],{shouldBreak:U})])}return T(h(["(",x(h([R,h(c)])),Zt(y),R,")"]),{shouldBreak:c.some(te)||o})}function Xr(t){return t.kind==="array"&&t.items.length!==0}function Ie(t){return t.right.kind==="array"&&t.right.items.length!==0}function qr(t,e,i,n,s){var o=[],l=t.getValue();if(l.kind==="bin"){Br(l.type,l.left.type)?o=o.concat(t.call(function(g){return qr(g,e,i,!0,s)},"left")):o.push(t.call(e,"left"));var r=Ie(l),c=h(r?[l.type," ",t.call(e,"right")]:[l.type,G,t.call(e,"right")]),u=t.getParentNode(),a=!(s&&["||","&&"].includes(l.type))&&pe(u)!==pe(l)&&pe(l.left)!==pe(l)&&pe(l.right)!==pe(l),y=Gi(l.left)||l.left.kind==="bin"&&Gi(l.left.right);o.push(y?"":" ",a?T(c):c),n&&l.comments&&(o=O.printAllComments(t,function(){return h(o)},i))}else o.push(t.call(e));return o}function Jr(t,e,i){var n=t.getValue();switch(n.kind){case"propertylookup":return Yi(t,e,i);case"nullsafepropertylookup":return jr(t,e,i);case"staticlookup":return $r(t,0,i);case"offsetlookup":return zr(t,0,i);default:return"Have not implemented lookup kind ".concat(n.kind," yet.")}}function Zr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.opening,n=i===void 0||i;if(t.type==="heredoc")return n?"<<<".concat(t.label):t.label;var s={string:'"',shell:"`"};return s[t.type]?s[t.type]:"Unimplemented encapsed type ".concat(t.type)}function Bl(t,e,i){var n=[],s=[];return t.each(function(o){n.push(h(s)),n.push(T(i(o))),s=[",",G],o.getValue()&&oe(e.originalText,o.getValue(),e)&&s.push(R)},"items"),h(n)}function Hl(t,e){if(e.length===0)return t;var i=0;return e.reduce(function(n,s){var o=s.start,l=s.end,r=s.alignment,c=s.before,u=s.after,a=h([c||"",h(t.slice(o,l)),u||""]),y=n.concat(t.slice(i,o),r?vl(T(h([yl(new Array(r).join(" "),a)]))):T(a),l===t.length-1?t.slice(l):"");return i=l,y},[])}function Oe(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",s=t.getValue(),o=t.getParentNode(),l=-1,r=[],c=[];t.map(function(B,S){var Q=B.getValue(),z=Q.kind==="inline",Lt=i(B),nt=s[n],d=nt[S+1],_=!Fr(B)&&!z&&(d&&d.kind==="case"?!Bi(t):d&&d.kind!=="inline"),N=h([Lt,_?f:"",_&&oe(e.originalText,Q,e)?f:""]),b=S===0,E=nt.length-1===S,V=s.kind==="block"&&o&&["function","closure","method","try","catch"].includes(o.kind),X=V&&b?"":" ";if(z||!z&&E&&l>=0){var K=l;if(z&&(l=S),z&&!b||!z&&E){var st=(z?K:l)+1,F=E&&!z?S+1:S,Y=nt[z?K:l],ft=Y?Ol(Y.raw):"",Qt=F-st>1,Te=Qt?V&&!Y||Hi(s)&&st===0?"":f:"",Wt=Qt&&Q.kind!=="halt"?V&&E?"":f:"";Qt&&(X=""),c.push({start:st,end:F,alignment:ft,before:Te,after:Wt})}}if(z){var kt=d&&d.kind==="echo"&&d.shortForm?"<?=":"<?php",me=Q.leadingComments&&Q.leadingComments.length?h([b&&s.kind!=="namespace"&&!V?"<?php":"",s.kind!=="namespace"&&V?"":f,O.printComments(Q.leadingComments,e),f,"?>"]):Hi(s)&&b&&s.kind!=="namespace"?"":h([X,"?>"]),xe=t.getNode(S+1),ne=xe&&xe.children&&xe.children.length,Ee=Q.comments&&Q.comments.length?h([kt,f,ne?O.printComments(Q.comments,e):"",f,ne?"?>":""]):Hi(s)&&E?"":h([kt," "]);N=h([me,N,Ee])}r.push(N)},n);var u=Hl(r,c);if(s.kind==="program"&&!s.extra.parseAsEval){var a=[],y=vt(s.children,1),g=y[0],I=!g||g.kind!=="inline";if(I){var H=e.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),A=h([H&&H[2]&&H[2].includes(`
`)?h([f,H[2].split(`
`).length>2?f:""]):" ",s.comments?O.printComments(s.comments,e):""]),U=g&&g.kind==="echo"&&g.shortForm;a.push(h([U?"<?=":"<?php",A]))}a.push(h(u));var C=e.originalText.trim().endsWith("?>");if(C){var $=ee(s.children),W=$?h([Mr(e.originalText.trimEnd(),e.locEnd($),e.locEnd(s))?f:" ",oe(e.originalText,$,e)?f:""]):s.comments?f:"";a.push(xl(h([W,"?>"])))}return h(a)}return h(u)}function to(t,e,i,n){return h(t.map(function(s){var o=[];return o.push(i(s)),Fr(s)||(o.push(f),oe(e.originalText,s.getValue(),e)&&o.push(f)),h(o)},n))}function bt(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",l=t.getValue(),r=gt(l[n])?h([f,t.call(function(u){return O.printDanglingComments(u,e,!0)},n),f]):s,c=Array.isArray(l[n])?T(h([et(",",t.map(function(u){var a=i(u);return gt(u.getValue())?h([f,O.printDanglingComments(u,e,!0),f,a]):h([o,a])},n))])):h([o,t.call(i,n)]);return x(h([r,n,te(r)?x(c):c]))}function ie(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.inline,o=s!==void 0&&s,l=[];return t.getValue().attrGroups?(t.each(function(r){var c=["#["];!o&&l.length>0&&l.push(f),c.push(R),r.each(function(u){var a=u.getValue();c.length>2&&c.push(",",G);var y=[a.name];a.args.length>0&&y.push(Ft(u,e,i,"args")),c.push(T(h(y)))},"attrs"),l.push(T(h([x(h(c)),Zt(Se(e,"8.0")?",":""),R,"]",o?Zt(R," "):""])))},"attrGroups"),l.length===0?[]:[h([].concat(l,[o?"":f]))]):[]}function Vt(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",s=t.getValue();if(!s[n])return";";var o=t.call(i,n);return h([s.shortForm?":":" {",x(h([s[n].kind!=="block"||s[n].children&&s[n].children.length>0||s[n].comments&&s[n].comments.length>0?h([Sl(t)?s.kind==="switch"?" ":"":f,o]):""])),s.kind==="if"&&n==="body"?"":h([Il(t)?f:"",s.shortForm?h(["end",s.kind,";"]):"}"])])}function $e(t,e,i,n,s,o,l){if(!n)return e;var r=ze(t,n,s,o,l);return T(h([e,i,r]))}function eo(t){return!!yt(t)&&(!(t.what.kind!=="variable"&&!Qi(t.what))||eo(t.what))}function ze(t,e,i,n,s){var o=n?"&":"";if(O.hasLeadingOwnLineComment(s.originalText,e,s))return x(h([f,o,i]));var l=e.kind==="cast"?e.expr:e;return l.kind==="bin"&&!Ie(l)||l.kind==="retif"&&(!l.trueExpr&&!Xr(l.falseExpr)||l.test.kind==="bin"&&!Ie(l.test))||(t.kind==="variable"||t.kind==="string"||yt(t))&&(l.kind==="string"&&!io(l)||eo(l))?T(x(h([G,o,i]))):h([" ",o,i])}function io(t){return t.raw.includes(`
`)}function Ke(t,e,i){return(t.kind==="string"||t.kind==="encapsed"&&(t.type==="string"||t.type==="shell"))&&io(t)&&!Al(e,i.locStart(t),{backwards:!0})}function no(t,e,i){return T(h(t.map(function(n,s){return h(s===0?[t.call(e)]:[i,t.call(e)])},"types")))}var Gl=function(t,e,i){var n=t.getValue();if(!n)return"";if(typeof n=="string")return n;var s=function(r,c,u){var a=r.getValue();switch(a.kind){case"program":return T(h([Oe(r,c,u),O.printDanglingComments(r,c,!0,function(p){return!p.printed})]));case"expressionstatement":return r.call(u,"expression");case"block":return h([Oe(r,c,u),O.printDanglingComments(r,c,!0)]);case"declare":var y=function(p){return et(", ",p.map(function(L){return h([u(L)])},"directives"))};if(["block","short"].includes(a.mode))return h(["declare(",y(r),")",a.mode==="block"?" {":":",a.children.length>0?x(h([f,Oe(r,c,u)])):"",O.printDanglingComments(r,c),f,a.mode==="block"?"}":"enddeclare;"]);var g=Dl(r,a);return h(["declare(",y(r),")",g&&g.kind==="inline"?"":";"]);case"declaredirective":return h([r.call(u,"key"),"=",r.call(u,"value")]);case"namespace":return h(["namespace ",a.name&&typeof a.name=="string"?h([a.name,a.withBrackets?" ":""]):"",a.withBrackets?"{":";",gt(a)?h([" ",O.printDanglingComments(r,c,!0)]):"",a.children.length>0?a.withBrackets?x(h([f,Oe(r,c,u)])):h([a.children[0].kind==="inline"?"":h([f,wl(c.originalText,a,c.locStart)?f:""]),Oe(r,c,u)]):"",a.withBrackets?h([f,"}"]):""]);case"usegroup":return T(h(["use ",a.type?h([a.type," "]):"",x(h([a.name?h([Hr(a.name),"\\{",R]):"",et(h([",",G]),r.map(function(p){return h([u(p)])},"items"))])),a.name?h([Zt(Se(c,"7.2")?",":""),R,"}"]):""]));case"useitem":return h([a.type?h([a.type," "]):"",Hr(a.name),gt(a)?h([" ",O.printDanglingComments(r,c,!0)]):"",a.alias?h([" as ",r.call(u,"alias")]):""]);case"class":case"enum":case"interface":case"trait":return function(p,L,M){var k=p.getValue(),Tt=k.kind==="class"&&k.isAnonymous,tt=ie(p,L,M,{inline:Tt}),rt=Tt?[]:lt(tt);k.isFinal&&rt.push("final "),k.isAbstract&&rt.push("abstract "),rt.push(Tt?"":k.kind),k.name&&rt.push(" ",p.call(M,"name")),k.kind==="enum"&&k.valueType&&rt.push(": ",p.call(M,"valueType")),k.extends&&k.implements?rt.push(_e([h([bt(p,L,M,"extends"),bt(p,L,M,"implements")]),h([bt(p,L,M,"extends"),bt(p,L,M,"implements"," ",f)]),h([bt(p,L,M,"extends",f," "),bt(p,L,M,"implements",f,k.implements.length>1?f:" ")])],{shouldBreak:gt(k.extends)})):(k.extends&&rt.push(_e([bt(p,L,M,"extends"),bt(p,L,M,"extends"," ",f),bt(p,L,M,"extends",f,k.extends.length>1?f:" ")])),k.implements&&rt.push(_e([bt(p,L,M,"implements"),bt(p,L,M,"implements"," ",f),bt(p,L,M,"implements",f,k.implements.length>1?f:" ")])));var At=T(h([T(h(rt)),Wi(L)?Tt?G:f:" "])),j=k.body&&k.body.length===0&&!gt(k),_t=h(["{",x(h([j?"":f,to(p,L,M,"body")])),O.printDanglingComments(p,L,!0),Tt&&j?R:f,"}"]);return h([At,_t])}(r,c,u);case"traitprecedence":return h([r.call(u,"trait"),"::",r.call(u,"method")," insteadof ",et(", ",r.map(u,"instead"))]);case"traitalias":return h([a.trait?h([r.call(u,"trait"),"::"]):"",a.method?r.call(u,"method"):""," as ",et(" ",[].concat(lt(a.visibility?[a.visibility]:[]),lt(a.as?[r.call(u,"as")]:[])))]);case"traituse":return T(h(["use ",x(T(et(h([",",G]),r.map(u,"traits")))),a.adaptations?h([" {",a.adaptations.length>0?h([x(h([f,to(r,c,u,"adaptations")])),f]):gt(a)?h([G,O.printDanglingComments(r,c,!0),G]):"","}"]):""]));case"function":case"closure":case"method":return function(p,L,M){var k=p.getValue(),Tt=ie(p,L,M,{inline:k.kind==="closure"}),tt=[];k.isFinal&&tt.push("final "),k.isAbstract&&tt.push("abstract "),k.visibility&&tt.push(k.visibility," "),k.isStatic&&tt.push("static "),tt.push("function "),k.byref&&tt.push("&"),k.name&&tt.push(p.call(M,"name")),tt.push(Ft(p,L,M)),k.uses&&k.uses.length>0&&tt.push(T(h([" use ",Ft(p,L,M,"uses")]))),k.type&&tt.push(h([": ",gt(k.type)?h([p.call(function(_t){return O.printDanglingComments(_t,L,!0)},"type")," "]):"",k.nullable?"?":"",p.call(M,"type")]));var rt=h(tt);if(!k.body)return h([].concat(lt(Tt),[rt]));var At=k.kind==="closure",j=h(["{",x(h([Wr(p)?"":f,p.call(M,"body")])),At&&Wr(p)?"":f,"}"]);return At?h([].concat(lt(Tt),[rt," ",j])):k.arguments.length===0?h([].concat(lt(Tt),[rt,Wi(L)?f:" ",j])):tt.some(te)?h([rt," ",j]):h([].concat(lt(Tt),[_e([h([rt,Wi(L)?f:" ",j]),h([rt," ",j])])]))}(r,c,u);case"arrowfunc":return h([a.parenthesizedExpression?"(":""].concat(lt(ie(r,c,u,{inline:!0})),[a.isStatic?"static ":"","fn",Ft(r,c,u),a.type?h([": ",a.nullable?"?":"",r.call(u,"type")]):""," => ",r.call(u,"body"),a.parenthesizedExpression?")":""]));case"parameter":var I="";a.flags===1?I="public ":a.flags===2?I="protected ":a.flags===4&&(I="private ");var H=h([].concat(lt(ie(r,c,u,{inline:!0})),[I,a.readonly?"readonly ":"",a.nullable?"?":"",a.type?h([r.call(u,"type")," "]):"",a.byref?"&":"",a.variadic?"...":"","$",r.call(u,"name")]));return a.value?T(h([H,gt(a)?" ":"",O.printDanglingComments(r,c,!0),h([" =",ze(a.name,a.value,r.call(u,"value"),!1,c)])])):H;case"variadic":return h(["...",r.call(u,"what")]);case"property":return T(h([a.readonly?"readonly ":"",a.type?h([a.nullable?"?":"",r.call(u,"type")," "]):"","$",r.call(u,"name"),a.value?h([" =",ze(a.name,a.value,r.call(u,"value"),!1,c)]):""]));case"propertystatement":var A=[];r.map(function(p){return A.push.apply(A,lt(ie(p,c,u)))},"properties");var U,C=r.map(function(p){return u(p)},"properties"),$=a.properties.some(function(p){return p.value});C.length!==1||a.properties[0].comments?C.length>0&&(U=x(C[0])):U=vt(C,1)[0];var W=a.visibility||a.visibility===null;return T(h([].concat(A,[W?h([a.visibility===null?"var":a.visibility,""]):"",a.isStatic?h([W?" ":"","static"]):"",U?h([" ",U]):"",x(h(C.slice(1).map(function(p){return h([",",$?f:G,p])})))])));case"if":var B=[],S=Vt(r,c,u,"body"),Q=T(h(["if (",T(h([x(h([R,r.call(u,"test")])),R])),")",S]));if(B.push(Q,Bi(r)||!a.body?"":f),a.alternate){B.push(a.shortForm?"":"} ");var z=Vr(a.body)&&a.body.comments.some(function(p){return p.trailing&&!O.isBlockComment(p)})||function(p){if(!p.comments)return!1;var L=ee(p.comments.filter(function(M){return!M.leading&&!M.trailing}));return L&&!O.isBlockComment(L)}(a),Lt=!z;B.push(Lt?"":f),gt(a)&&B.push(oe(c.originalText,a.body,c)?f:"",O.printDanglingComments(r,c,!0),z?f:" "),B.push("else",T(a.alternate.kind==="if"?r.call(u,"alternate"):Vt(r,c,u,"alternate")))}else B.push(a.body?a.shortForm?"endif;":"}":"");return h(B);case"do":return h(["do",Vt(r,c,u,"body")," while (",T(h([x(h([R,r.call(u,"test")])),R])),")"]);case"while":case"switch":return T(h([a.kind," (",T(h([x(h([R,r.call(u,"test")])),R])),")",Vt(r,c,u,"body")]));case"for":var nt=Vt(r,c,u,"body"),d=O.printDanglingComments(r,c,!0),_=d?h([d,R]):"";return a.init.length||a.test.length||a.increment.length?h([_,T(h(["for (",T(h([x(h([R,T(h([et(h([",",G]),r.map(u,"init"))])),";",G,T(h([et(h([",",G]),r.map(u,"test"))])),";",G,T(et(h([",",G]),r.map(u,"increment")))])),R])),")",nt]))]):h([_,T(h(["for (;;)",nt]))]);case"foreach":var N=Vt(r,c,u,"body"),b=O.printDanglingComments(r,c,!0),E=b?h([b,R]):"";return h([E,T(h(["foreach (",T(h([x(h([R,r.call(u,"source"),G,"as ",T(a.key?x(et(h([" =>",G]),[r.call(u,"key"),r.call(u,"value")])):r.call(u,"value"))])),R])),")",N]))]);case"try":var V=[];return V.push("try",Vt(r,c,u,"body")),a.catches&&V.push(h(r.map(u,"catches"))),a.always&&V.push(" finally",Vt(r,c,u,"always")),h(V);case"catch":return h([" catch",a.what?h([" (",et(" | ",r.map(u,"what")),a.variable?h([" ",r.call(u,"variable")]):"",")"]):"",Vt(r,c,u,"body")]);case"case":return h([a.test?h(["case ",a.test.comments?x(r.call(u,"test")):r.call(u,"test"),":"]):"default:",a.body&&a.body.children&&a.body.children.length?x(h([Bi(r)?"":f,r.call(u,"body")])):""]);case"break":case"continue":return a.level&&a.level.kind==="number"&&a.level.value!=="1"?h(["".concat(a.kind," "),r.call(u,"level")]):a.kind;case"call":return a.arguments.length===1&&Ke(a.arguments[0],c.originalText,c)?h([r.call(u,"what"),h(["(",et(", ",r.map(u,"arguments")),")"])]):yt(a.what)?function(p,L,M){var k=[];function Tt(w){var q=L.originalText,it=Ul(q,w,L);return q.charAt(it)===")"?gl(q,it+1,L):oe(q,w,L)}function tt(w){var q=w.getValue();if(q.kind!=="call"||!yt(q.what)&&q.what.kind!=="call")if(yt(q)){var it=null;it=q.kind==="propertylookup"?Yi(w,L,M):q.kind==="nullsafepropertylookup"?jr(w,L,M):q.kind==="staticlookup"?$r(w,L,M):zr(w,L,M),k.unshift({node:q,needsParens:Pr(w),printed:O.printAllComments(w,function(){return it},L)}),w.call(function(De){return tt(De)},"what")}else k.unshift({node:q,printed:w.call(M)});else k.unshift({node:q,printed:h([O.printAllComments(w,function(){return h([Ft(w,L,M)])},L),Tt(q)?f:""])}),w.call(function(De){return tt(De)},"what")}var rt=p.getValue();k.unshift({node:rt,printed:Ft(p,L,M)}),p.call(function(w){return tt(w)},"what");for(var At=0;At<k.length;++At)k[At].node.kind==="call"&&k[At-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(k[At-1].node.kind)&&k[At-1].needsParens&&(k[0].printed=h(["(",k[0].printed]),k[At-1].printed=h([k[At-1].printed,")"]));for(var j=[],_t=[k[0]],J=1;J<k.length&&(k[J].node.kind==="call"||yt(k[J].node)&&k[J].node.offset&&k[J].node.offset.kind==="number");++J)_t.push(k[J]);if(k[0].node.kind!=="call")for(;J+1<k.length&&yt(k[J].node)&&yt(k[J+1].node);++J)_t.push(k[J]);j.push(_t),_t=[];for(var ai=!1;J<k.length;++J){if(ai&&yt(k[J].node)){if(k[J].node.kind==="offsetlookup"&&k[J].node.offset&&k[J].node.offset.kind==="number"){_t.push(k[J]);continue}j.push(_t),_t=[],ai=!1}k[J].node.kind==="call"&&(ai=!0),_t.push(k[J]),k[J].node.comments&&O.hasTrailingComment(k[J].node)&&(j.push(_t),_t=[],ai=!1)}_t.length>0&&j.push(_t);function Bc(w){var q=w[1].length&&w[1][0].node.kind==="offsetlookup";if(w[0].length===1){var it=w[0][0].node;return it.kind==="variable"&&(it.name==="this"||Hc&&De(it.name))||Qi(it)}function De(Wc){return Wc.length<L.tabWidth}var tn=ee(w[0]).node;return yt(tn)&&(tn.offset.kind==="identifier"||tn.offset.kind==="variable")&&q}var Hc=p.getParentNode().kind==="expressionstatement",hi=j.length>=2&&!j[1][0].node.comments&&Bc(j);function li(w){for(var q=[],it=0;it<w.length;it++)w[it+1]&&w[it+1].needsParens?(q.push("(",w[it].printed,w[it+1].printed,")"),it++):q.push(w[it].printed);return h(q)}function Gc(w){return w.length===0?"":x(T(h([f,et(f,w.map(li))])))}var Wo=j.map(li),Zi=h(Wo),ci=hi?3:2,Yo=j.slice(0,ci).reduce(function(w,q){return w.concat(q)},[]),jo=Yo.slice(1,-1).some(function(w){return O.hasLeadingComment(w.node)})||Yo.slice(0,-1).some(function(w){return O.hasTrailingComment(w.node)})||j[ci]&&O.hasLeadingComment(j[ci][0].node),Vc=Vi(p,"encapsed");if(j.length<=ci&&!jo||Vc)return T(Zi);var $o=ee(hi?j.slice(1,2)[0]:j[0]).node,zo=$o.kind!=="call"&&Tt($o),Ko=h([li(j[0]),hi?h(j.slice(1,2).map(li)):"",zo?f:"",Gc(j.slice(hi?2:1))]),Qc=k.filter(function(w){return w.node.kind==="call"}).length;return jo||Qc>=3||Wo.slice(0,-1).some(te)?T(Ko):h([te(Zi)||zo?Ur:"",_e([Zi,Ko])])}(r,c,u):h([r.call(u,"what"),Ft(r,c,u)]);case"new":var X=a.what&&a.what.kind==="class"&&a.what.isAnonymous;if(!X&&a.arguments.length===1&&Ke(a.arguments[0],c.originalText,c))return h(["new "].concat(lt(r.call(ie,"what")),[r.call(u,"what"),"(",et(", ",r.map(u,"arguments")),")"]));var K=[];if(K.push("new "),X)K.push.apply(K,[a.what.leadingComments&&a.what.leadingComments[0].kind==="commentblock"?h([O.printComments(a.what.leadingComments,c)," "]):""].concat(lt(r.call(function(p){return ie(p,c,u,{inline:!0})},"what")),["class",a.arguments.length>0?h([" ",Ft(r,c,u)]):"",T(r.call(u,"what"))]));else{var st=["call","offsetlookup"].includes(a.what.kind),F=h([st?"(":"",r.call(u,"what"),st?")":"",Ft(r,c,u)]);K.push(Gr(a.what)?x(F):F)}return h(K);case"clone":return h(["clone ",a.what.comments?x(r.call(u,"what")):r.call(u,"what")]);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var Y,ft=r.getParentNode(),Qt=0;do Y=r.getParentNode(Qt),Qt++;while(Y&&yt(Y));var Te=Vi(r,"encapsed")||Y&&(Y.kind==="new"||Y.kind==="assign"&&Y.left.kind!=="variable")||a.kind==="offsetlookup"||(Qi(a.what)||a.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(a.offset.kind)&&ft&&!yt(ft);return h([r.call(u,"what"),Te?Jr(r,c,u):T(x(h([R,Jr(r,c,u)])))]);case"exit":return T(h([a.useDie?"die":"exit","(",a.expression?Ke(a.expression,c.originalText,c)?r.call(u,"expression"):h([x(h([R,r.call(u,"expression")])),R]):O.printDanglingComments(r,c),")"]));case"global":return T(h(["global ",x(h([et(h([",",G]),r.map(u,"items"))]))]));case"include":return h([a.require?"require":"include",a.once?"_once":""," ",a.target.comments?x(r.call(u,"target")):r.call(u,"target")]);case"label":return h([r.call(u,"name"),":"]);case"goto":return h(["goto ",r.call(u,"label")]);case"throw":return h(["throw ",a.what.comments?x(r.call(u,"what")):r.call(u,"what")]);case"silent":return h(["@",r.call(u,"expr")]);case"halt":return h([gt(a)?h([O.printDanglingComments(r,c,!0),f]):"","__halt_compiler();",a.after]);case"eval":return T(h(["eval(",Ke(a.source,c.originalText,c)?r.call(u,"source"):h([x(h([R,r.call(u,"source")])),R]),")"]));case"echo":var Wt,kt=r.map(function(p){return u(p)},"expressions");return kt.length!==1||a.expressions[0].comments?kt.length>0&&(Wt=Gi(a.expressions[0])||a.expressions[0].comments?x(kt[0]):El(kt[0])):Wt=vt(kt,1)[0],T(h([a.shortForm?"":"echo ",Wt||"",x(h(kt.slice(1).map(function(p){return h([",",G,p])})))]));case"print":return h(["print ",a.expression.comments?x(r.call(u,"expression")):r.call(u,"expression")]);case"return":var me=[];if(me.push("return"),a.expr){var xe=r.call(u,"expr");me.push(" ",a.expr.comments?x(xe):xe)}return gt(a)&&me.push(" ",O.printDanglingComments(r,c,!0)),h(me);case"isset":case"unset":return T(h([a.kind,Ft(r,c,u,"variables")]));case"empty":return T(h(["empty(",x(h([R,r.call(u,"expression")])),R,")"]));case"variable":var ne=r.getParentNode(),Ee=r.getParentNode(1),Ec=ne.kind==="assign"?"":a.byref?"&":"",yc=ne.kind==="encapsedpart"&&ne.syntax==="simple"&&ne.curly||Ee&&ne.kind==="offsetlookup"&&Ee.kind==="encapsedpart"&&Ee.syntax==="simple"&&Ee.curly?"":"$",vc=a.curly?"{":"",gc=a.curly?"}":"";return h([Ec,yc,vc,r.call(u,"name"),gc]);case"constantstatement":case"classconstant":var Ze,Ac=ie(r,c,u),Re=r.map(function(p){return u(p)},"constants");return Re.length!==1||a.constants[0].comments?Re.length>0&&(Ze=x(Re[0])):Ze=vt(Re,1)[0],T(h([].concat(lt(Ac),[a.visibility?h([a.visibility," "]):"","const",Ze?h([" ",Ze]):"",x(h(Re.slice(1).map(function(p){return h([",",f,p])})))])));case"constant":return $e(a.name,r.call(u,"name")," =",a.value,r.call(u,"value"),!1,c);case"static":var ti,we=r.map(function(p){return u(p)},"variables"),Nc=a.variables.some(function(p){return p.defaultValue});return we.length!==1||a.variables[0].comments?we.length>0&&(ti=x(we[0])):ti=vt(we,1)[0],T(h(["static",ti?h([" ",ti]):"",x(h(we.slice(1).map(function(p){return h([",",Nc?f:G,p])})))]));case"staticvariable":return $e(a.variable,r.call(u,"variable")," =",a.defaultValue,r.call(u,"defaultValue"),!1,c);case"list":case"array":var Co=a.kind==="array"&&fe(c.phpVersion,"5.4")||a.kind==="list"&&(a.shortForm||fe(c.phpVersion,"7.1")),zi=Co?"[":h([a.kind,"("]),Ki=Co?"]":")";if(a.items.length===0)return gt(a)?T(h([zi,O.printDanglingComments(r,c),R,Ki])):h([zi,Ki]);var ei=ee(a.items),So=ei&&ei.kind==="noop",ii=vt(a.items.filter(function(p){return p.kind!=="noop"}).sort(function(p,L){return c.locStart(p)-c.locStart(L)}),1)[0],bc=!(!ii||!ii.key)&&ii&&Mr(c.originalText,c.locStart(a),c.locStart(ii));return T(h([zi,x(h([R,Bl(r,c,u)])),So?",":"",Zt(!So&&Se(c,"5.0")?h([ei&&Yr(ei)?f:"",","]):""),O.printDanglingComments(r,c,!0),R,Ki]),{shouldBreak:bc});case"entry":var Io=a.byRef?"&":"",Lc=a.unpack?"...":"";return a.key?$e(a.key,r.call(u,"key")," =>",a.value,r.call(u,"value"),Io,c):h([Io,Lc,r.call(u,"value")]);case"yield":var Oo=h([a.key?h([r.call(u,"key")," => "]):"",r.call(u,"value")]);return h(["yield",a.key||a.value?" ":"",a.value&&a.value.comments?x(Oo):Oo]);case"yieldfrom":return h(["yield from ",a.value.comments?x(r.call(u,"value")):r.call(u,"value")]);case"unary":return h([a.type,r.call(u,"what")]);case"pre":return h([a.type+a.type,r.call(u,"what")]);case"post":return h([r.call(u,"what"),a.type+a.type]);case"cast":return h(["(",a.type,") ",a.expr.comments?x(r.call(u,"expr")):r.call(u,"expr")]);case"assignref":case"assign":var Ro=a.kind==="assignref";return $e(a.left,r.call(u,"left"),h([" ",Ro?"=":a.operator]),a.right,r.call(u,"right"),Ro,c);case"bin":var Ct=r.getParentNode(),wo=r.getParentNode(1),Do=a!==Ct.body&&(Ct.kind==="if"||Ct.kind==="while"||Ct.kind==="switch"||Ct.kind==="do"),ye=qr(r,u,c,!1,Do);if(Do)return h(ye);if(Ct.kind==="unary"||yt(Ct)&&Ct.kind!=="offsetlookup")return T(h([x(h([R,h(ye)])),R]));var Cc=a!==Ct.body&&Ct.kind==="for"||Ct.kind==="retif"&&wo&&wo.kind!=="return",Sc=["assign","property","constant","staticvariable","entry"].includes(Ct.kind),Ic=a.left.kind==="bin"&&Br(a.type,a.left.type);if(Cc||Ie(a)&&!Ic||!Ie(a)&&Sc)return T(h(ye));var Oc=h(ye.slice(1));return T(h([ye.length>0?ye[0]:"",x(Oc)]));case"retif":var ni,si=[],ri=r.getParentNode(),Po=0;do ni=r.getParentNode(Po),Po++;while(ni&&ni.kind==="retif");var Uo=ni||ri,Mo=a.falseExpr.kind==="bin"?x(r.call(u,"falseExpr")):r.call(u,"falseExpr"),Rc=h([a.trueExpr?G:" ","?",a.trueExpr?h([" ",a.trueExpr.kind==="bin"?x(r.call(u,"trueExpr")):r.call(u,"trueExpr"),G]):"",":",a.trueExpr?h([" ",Mo]):h([Xr(a.falseExpr)?" ":G,Mo])]);si.push(Rc);var Fo=function(p){return ri===Uo?T(p):p},Bo=r.getParentNode(1),ae=ri.kind==="cast"&&Bo?Bo:ri,wc=["propertylookup","nullsafepropertylookup","staticlookup"].includes(ae.kind),Xi=r.call(u,"test");if(!a.trueExpr){var Ho=h([Xi,ae.kind==="bin"||["print","echo","return","include"].includes(Uo.kind)?x(h(si)):h(si)]);return ae.kind==="call"&&ae.what===a||ae.kind==="unary"||yt(ae)&&ae.kind!=="offsetlookup"?T(h([x(h([R,Ho])),R])):Fo(Ho)}return Fo(h([a.test.kind==="retif"?x(Xi):Xi,x(h(si)),wc?R:""]));case"boolean":return a.value?"true":"false";case"number":return Ll(a.value);case"string":if(r.getParentNode().kind==="encapsedpart"){var Go=r.getParentNode(1),qi=0,Dc=fe(c.phpVersion,"7.3"),Vo=de;if(Go.type==="heredoc"){Vo=Dc?f:de;var oi=Go.raw.split(/\r?\n/g);(qi=oi[oi.length-1].search(/\S/))===-1&&(qi=oi[oi.length-2].search(/\S/))}return et(Vo,a.raw.split(/\r?\n/g).map(function(p,L){return L>0||a.loc.start.column===0?p.substring(qi):p}))}var Qo=Rl(a,c)?'"':"'",Dt=a.raw;return a.raw[0]==="b"&&(Dt=Dt.slice(1)),['"',"'"].includes(Dt[0])&&(Dt=Dt.substr(1)),['"',"'"].includes(Dt[Dt.length-1])&&(Dt=Dt.substr(0,Dt.length-1)),h([a.raw[0]==="b"?"b":"",Qo,et(de,Dt.split(/\r?\n/g)),Qo]);case"intersectiontype":return no(r,u,"&");case"uniontype":return no(r,u,"|");case"encapsedpart":var Pc=a.syntax==="simple"&&a.curly||a.syntax==="complex"?h([a.curly?"$":"","{"]):"",Uc=a.syntax==="simple"&&a.curly||a.syntax==="complex"?"}":"";return h([Pc,r.call(u,"expression"),Uc]);case"encapsed":switch(a.type){case"string":case"shell":case"heredoc":var Mc=fe(c.phpVersion,"7.3")?f:de;return h([Zr(a),a.type==="heredoc"?Mc:"",h(r.map(u,"value")),Zr(a,{opening:!1}),a.type==="heredoc"&&Qr(r)?f:""]);default:return"Have not implemented kind ".concat(a.type," yet.")}case"inline":return et(de,a.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(/\r?\n/g));case"magic":return a.value;case"nowdoc":var Ji=fe(c.phpVersion,"7.3")?f:de;return h(["<<<'",a.label,"'",Ji,et(Ji,a.value.split(/\r?\n/g)),Ji,a.label,Qr(r)?f:""]);case"name":return h([a.resolution==="rn"?"namespace\\":"",a.name]);case"literal":return r.call(u,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return a.name;case"nullkeyword":return"null";case"identifier":return r.getParentNode().kind==="method"&&(a.name=Pl(a.name)),r.call(u,"name");case"match":var Fc=r.map(function(p,L){var M=p.getValue().conds===null?"default":h(p.map(function(Tt,tt){return h([",",G,u(Tt)].slice(tt===0?2:0))},"conds")),k=p.call(u,"body");return h([",",f,T(h([T(h([M,x(G)])),h(["=> ",k])]))].slice(L>0?0:1))},"arms");return T(h(["match (",T(h([R,x(h([r.call(u,"cond")])),R])),") {",T(x(h([].concat(lt(Fc),[c.trailingCommaPHP?Zt(","):""]))))," ",R,"}"]));case"noop":return a.comments?O.printComments(r.getValue().comments,c):"";case"namedargument":return h([a.name,": ",r.call(u,"value")]);case"enumcase":return T(h(["case ",r.call(u,"name"),a.value?h([" =",ze(a.name,a.value,r.call(u,"value"),!1,c)]):""]));case"variadicplaceholder":return"...";default:return"Have not implemented kind ".concat(a.kind," yet.")}}(t,e,i),o=[],l=Pr(t);return l&&o.unshift("("),o.push(s),l&&o.push(")"),bl(t)&&o.push(";"),Cl(t)&&o.push(f),h(o)},Vl=function(t,e){if(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"].forEach(function(n){delete e[n]}),t.kind==="string"&&delete e.isDoubleQuote,["array","list"].includes(t.kind)&&delete e.shortForm,t.kind==="inline"){if(t.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;e.value=e.value.replace(/\r\n?|\n/g,"")}if((t.kind==="continue"||t.kind==="break")&&t.level){var i=e.level;i.kind==="number"&&(e.level=i.value==="1"?null:i)}if(t.kind==="block"&&t.children.length===1&&t.children[0].kind==="block")for(;e.children[0].kind==="block";)e.children=e.children[0].children;if(t.kind==="number"&&(e.value=D.printNumber(t.value)),["foreach","for","if","while","do"].includes(t.kind)&&(t.body&&t.body.kind!=="block"?e.body={kind:"block",children:[e.body]}:e.body=e.body?e.body:null,t.alternate&&t.alternate.kind!=="block"?e.alternate={kind:"block",children:[e.alternate]}:e.alternate=e.alternate?e.alternate:null),t.kind==="usegroup"&&typeof t.name=="string"&&(e.name=e.name.replace(/^\\/,"")),t.kind==="useitem"&&(e.name=e.name.replace(/^\\/,"")),t.kind==="method"&&t.name.kind==="identifier"&&(e.name.name=D.normalizeMagicMethodName(e.name.name)),t.kind==="noop")return null},ji="PHP",Ql={phpVersion:{since:"0.13.0",category:ji,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"}]},trailingCommaPHP:{since:"0.0.0",category:ji,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:ji,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},Wl=function(t,e,i,n){if(i!=="length"&&i!=="prototype"&&i!=="arguments"&&i!=="caller"){var s=Object.getOwnPropertyDescriptor(t,i),o=Object.getOwnPropertyDescriptor(e,i);!Yl(s,o)&&n||Object.defineProperty(t,i,o)}},Yl=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},jl=function(t,e){var i=Object.getPrototypeOf(e);i!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,i)},$l=function(t,e){return"/* Wrapped ".concat(t,`*/
`).concat(e)},zl=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Kl=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Xl=function(t,e,i){var n=i===""?"":"with ".concat(i.trim(),"() "),s=$l.bind(null,n,e.toString());Object.defineProperty(s,"name",Kl),Object.defineProperty(t,"toString",Pe(Pe({},zl),{},{value:s}))},ql=function(t,e){var i,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.ignoreNonConfigurable,o=s!==void 0&&s,l=t.name,r=on(Reflect.ownKeys(e));try{for(r.s();!(i=r.n()).done;){var c=i.value;Wl(t,e,c,o)}}catch(u){r.e(u)}finally{r.f()}return jl(t,e),Xl(t,e,l),t},Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof en<"u"?en:typeof self<"u"?self:{};function so(t){return t&&t.default||t}var qe,Jl=function(){var t={};return t.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),t},ro=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){var i=Xe&&Xe.__awaiter||function(l,r,c,u){return new(c||(c=Promise))(function(a,y){function g(A){try{H(u.next(A))}catch(U){y(U)}}function I(A){try{H(u.throw(A))}catch(U){y(U)}}function H(A){A.done?a(A.value):new c(function(U){U(A.value)}).then(g,I)}H((u=u.apply(l,r||[])).next())})},n=Xe&&Xe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(Jl);function o(l){var r,c,u,a=this,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",g=function(){return i(a,void 0,void 0,ve().mark(function A(){var U,C,$,W,B=this;return ve().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(r===void 0){S.next=2;break}return S.abrupt("return");case 2:U=function(Q){return i(B,void 0,void 0,ve().mark(function z(){var Lt;return ve().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(u=s.default(),!((Lt=Q[1][y]-Date.now())<=0)){nt.next=6;break}return l.delete(Q[0]),u.resolve(),nt.abrupt("return");case 6:return r=Q[0],typeof(c=setTimeout(function(){l.delete(Q[0]),u&&u.resolve()},Lt)).unref=="function"&&c.unref(),nt.abrupt("return",u.promise);case 10:case"end":return nt.stop()}},z)}))},S.prev=3,C=on(l),S.prev=5,C.s();case 7:if(($=C.n()).done){S.next=13;break}return W=$.value,S.next=11,U(W);case 11:S.next=7;break;case 13:S.next=18;break;case 15:S.prev=15,S.t0=S.catch(5),C.e(S.t0);case 18:return S.prev=18,C.f(),S.finish(18);case 21:S.next=25;break;case 23:S.prev=23,S.t1=S.catch(3);case 25:r=void 0;case 26:case"end":return S.stop()}},A,null,[[3,23],[5,15,18,21]])}))},I=function(){r=void 0,c!==void 0&&(clearTimeout(c),c=void 0),u!==void 0&&(u.reject(void 0),u=void 0)},H=l.set.bind(l);return l.set=function(A,U){l.has(A)&&l.delete(A);var C=H(A,U);return r&&r===A&&I(),g(),C},g(),l}e.default=o,t.exports=o,t.exports.default=o});(qe=ro)&&qe.__esModule&&Object.prototype.hasOwnProperty.call(qe,"default")&&qe.default;var Zl=ro,$i=new WeakMap,oo=new WeakMap,Je=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.cacheKey,n=e.cache,s=n===void 0?new Map:n,o=e.maxAge;typeof o=="number"&&Zl(s);var l=function(){for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];var a=i?i(c):c[0],y=s.get(a);if(y)return y.data;var g=t.apply(this,c);return s.set(a,{data:g,maxAge:o?Date.now()+o:Number.POSITIVE_INFINITY}),g};return ql(l,t,{ignoreNonConfigurable:!0}),oo.set(l,s),l};Je.decorator=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(e,i,n){var s=e[i];if(typeof s!="function")throw new TypeError("The decorated value must be a function");delete n.value,delete n.writable,n.get=function(){if(!$i.has(this)){var o=Je(s,t);return $i.set(this,o),o}return $i.get(this)}}},Je.clear=function(t){var e=oo.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var ao=/@prettier|@format/,ho=Je(function(t){var e=Tr(t),i=vt(e.children,1)[0],n=vt(e.comments.filter(function(s){return s.kind==="commentblock"}),1)[0];if(i&&n&&n.loc.start.line<i.loc.start.line)return n}),tc=function(t){if(!ao.test(t))return!1;var e=ho(t);if(e){var i=e.value;return ao.test(i)}return!1},ec=function(t){var e=ho(t);if(e){var i=e.loc,n=i.start.offset,s=i.end.offset,o=t.substring(0,n),l=t.substring(s);return"".concat(o).concat(function(y,g){var I=y.split(/\r?\n/g);if(I.length===1){var H=vt(/\/*\*\*(.*)\*\//.exec(I[0]),2)[1];I=["/**"," * ".concat(H.trim())," */"]}var A=I.findIndex(function(U){return/@\S/.test(U)})||1;return I.splice(A,0," * @format"),I.join(function(U){var C=U.indexOf(`
`);return C>=0&&U.charAt(C-1)==="\r"?`\r
`:`
`}(g))}(e.value,t)).concat(l)}var r="<?php";if(!t.startsWith(r))return t;var c=r.length,u=t.substring(0,c),a=t.substring(c);return"".concat(u,`
/** 
 * @format 
 */
`).concat(a)},lo="programming",co="text.html.php",uo="application/x-httpd-php",_o="#4F5D95",po=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],fo=[".php",".php_cs",".php_cs.dist","Phakefile"],ko=["php"],To=["inc"],ic={name:"PHP",type:lo,tmScope:co,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:uo,color:_o,extensions:po,filenames:fo,interpreters:ko,aliases:To,languageId:272},nc=Object.freeze({__proto__:null,name:"PHP",type:lo,tmScope:co,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:uo,color:_o,extensions:po,filenames:fo,interpreters:ko,aliases:To,languageId:272,default:ic}),mo="HTML+PHP",xo="markup",Eo="#4f5d95",yo="text.html.php",vo="HTML",go=[".phtml"],Ao="application/x-httpd-php",sc={name:mo,type:xo,color:Eo,tmScope:yo,group:vo,extensions:go,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Ao,languageId:151},rc=Object.freeze({__proto__:null,name:mo,type:xo,color:Eo,tmScope:yo,group:vo,extensions:go,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Ao,languageId:151,default:sc}),oc=so(nc),ac=so(rc),No=jt.default.doc.builders,hc=No.join,lc=No.hardline,cc=tc,uc=ec;function bo(t,e){var i=e.extend,n=e.override,s={};for(var o in t)s[o==="languageId"?"linguistLanguageId":o]=t[o];if(i)for(var l in i)s[l]=(s[l]||[]).concat(i[l]);for(var r in n)s[r]=n[r];return s}var _c=[bo(oc,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),bo(ac,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Lo=function(t){return function(e){return e.loc&&e.loc[t]&&e.loc[t].offset}},dc={php:{parse:Tr,astFormat:"php",locStart:Lo("start"),locEnd:Lo("end"),hasPragma:cc}},pc={php:{print:Gl,insertPragma:uc,massageAstNode:Vl,getCommentChildNodes:O.getCommentChildNodes,canAttachComment:O.canAttachComment,isBlockComment:O.isBlockComment,handleComments:{ownLine:O.handleOwnLineComment,endOfLine:O.handleEndOfLineComment,remaining:O.handleRemainingComment},willPrintOwnComments:function(t){var e=t.getValue();return e&&e.kind==="noop"},printComment:function(t){var e=t.getValue();switch(e.kind){case"commentblock":if(!e.value.includes(`
`))return e.value;var i=e.value.split(/\r?\n/g);return i.slice(1,i.length-1).every(function(n){return n.trim()[0]==="*"})?hc(lc,i.map(function(n,s){return(s>0?" ":"")+(s<i.length-1?n.trim():n.trimLeft())})):e.value;case"commentline":return e.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(e)))}},hasPrettierIgnore:function(t){var e=function(s){return s.value.includes("prettier-ignore")&&!s.value.includes("prettier-ignore-start")&&!s.value.includes("prettier-ignore-end")},i=t.getParentNode(),n=t.getNode();return n&&n.kind!=="classconstant"&&n.comments&&n.comments.length>0&&n.comments.some(e)||n&&n.kind==="constant"&&i&&i.kind==="classconstant"&&i.comments&&i.comments.length>0&&i.comments.some(e)}}},ke={languages:_c,printers:pc,parsers:dc,options:Ql,defaultOptions:{tabWidth:4}},fc=ke.languages,kc=ke.printers,Tc=ke.parsers,mc=ke.options,xc=ke.defaultOptions;Yt.default=ke,Yt.defaultOptions=xc,Yt.languages=fc,Yt.options=mc,Yt.parsers=Tc,Yt.printers=kc,Object.defineProperty(Yt,"__esModule",{value:!0})})})(Kc,ui);const Xc=$c(ui),tu=new class extends zc{async beautify(){return jc.format(this.code,{plugins:[Xc],parser:"php",tabWidth:this.getOptionValue("tab",4)})}};export{tu as formatter};
