var J=Object.defineProperty;var K=(m,o,u)=>o in m?J(m,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):m[o]=u;var C=(m,o,u)=>(K(m,typeof o!="symbol"?o+"":o,u),u);import{u as Q,i as W}from"./action-282deb75.js";import{c as Y}from"./_commonjsHelpers-87174ba5.js";import{r as Z}from"./radix-450ef310.js";import{I as s}from"./Item-99f7a34e.js";import{b as R,S as tt}from"./index-4596abc8.js";import{A as et,bi as lt,aA as F,k as it,be as at,o as nt,x as i,bj as p,m as O,n as j,F as ot,aF as _,as as L,a$ as g,w as M,aT as x,p as I}from"./history-7dbe2ade.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-25d7a505.js";import"./callBound-7203e6b7.js";import"./shim-03580cdb.js";import"./empty-9f795c74.js";import"./index-395898e3.js";var T,V,S;(function(){var m,o,u,f,d,b,h,v;v=function(e){var l,r,n,t;return l=(e&255<<24)>>>24,r=(e&255<<16)>>>16,n=(e&255<<8)>>>8,t=e&255,[l,r,n,t].join(".")},h=function(e){var l,r,n,t,a,k;for(l=[],n=t=0;t<=3&&e.length!==0;n=++t){if(n>0){if(e[0]!==".")throw new Error("Invalid IP");e=e.substring(1)}k=o(e),a=k[0],r=k[1],e=e.substring(r),l.push(a)}if(e.length!==0)throw new Error("Invalid IP");switch(l.length){case 1:if(l[0]>4294967295)throw new Error("Invalid IP");return l[0]>>>0;case 2:if(l[0]>255||l[1]>16777215)throw new Error("Invalid IP");return(l[0]<<24|l[1])>>>0;case 3:if(l[0]>255||l[1]>255||l[2]>65535)throw new Error("Invalid IP");return(l[0]<<24|l[1]<<16|l[2])>>>0;case 4:if(l[0]>255||l[1]>255||l[2]>255||l[3]>255)throw new Error("Invalid IP");return(l[0]<<24|l[1]<<16|l[2]<<8|l[3])>>>0;default:throw new Error("Invalid IP")}},u=function(e){return e.charCodeAt(0)},f=u("0"),b=u("a"),d=u("A"),o=function(e){var l,r,n,t,a;for(t=0,l=10,r="9",n=0,e.length>1&&e[n]==="0"&&(e[n+1]==="x"||e[n+1]==="X"?(n+=2,l=16):"0"<=e[n+1]&&e[n+1]<="9"&&(n++,l=8,r="7")),a=n;n<e.length;){if("0"<=e[n]&&e[n]<=r)t=t*l+(u(e[n])-f)>>>0;else if(l===16)if("a"<=e[n]&&e[n]<="f")t=t*l+(10+u(e[n])-b)>>>0;else if("A"<=e[n]&&e[n]<="F")t=t*l+(10+u(e[n])-d)>>>0;else break;else break;if(t>4294967295)throw new Error("too large");n++}if(n===a)throw new Error("empty octet");return[t,n]},m=function(){function e(l,r){var n,t,a;if(typeof l!="string")throw new Error("Missing `net' parameter");if(r||(a=l.split("/",2),l=a[0],r=a[1]),r||(r=32),typeof r=="string"&&r.indexOf(".")>-1){try{this.maskLong=h(r)}catch{throw new Error("Invalid mask: "+r)}for(n=t=32;t>=0;n=--t)if(this.maskLong===4294967295<<32-n>>>0){this.bitmask=n;break}}else if(r||r===0)this.bitmask=parseInt(r,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(h(l)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+l)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+r);this.size=Math.pow(2,32-this.bitmask),this.base=v(this.netLong),this.mask=v(this.maskLong),this.hostmask=v(~this.maskLong),this.first=this.bitmask<=30?v(this.netLong+1):this.base,this.last=this.bitmask<=30?v(this.netLong+this.size-2):v(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?v(this.netLong+this.size-1):void 0}return e.prototype.contains=function(l){return typeof l=="string"&&(l.indexOf("/")>0||l.split(".").length!==4)&&(l=new e(l)),l instanceof e?this.contains(l.base)&&this.contains(l.broadcast||l.last):(h(l)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(l){return l==null&&(l=1),new e(v(this.netLong+this.size*l),this.mask)},e.prototype.forEach=function(l){var r,n,t;for(t=h(this.first),n=h(this.last),r=0;t<=n;)l(v(t),t,r),r++,t++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),S=h,V=v,T=m}).call(Y);const A=m=>m.includes(".")&&m.substring(0,2).toUpperCase()==="0B"?$(m,10,2,"0b"):m,$=(m,o=10,u=10,f="")=>m.split(".").map(d=>(f&&d.length>f.length&&d.substring(0,f.length).toUpperCase()===f.toUpperCase()&&(d=d.substring(f.length)),d=d.replace(/\b(0+)/gi,"")||"0",o===u?`${d}`:`${Z(d,u,o).padStart(o===2?8:o===8?4:2,"0").toUpperCase()}`)).join("."),st=m=>{if(isNaN(m)||m>4294967294||m<1)throw new Error("Available Size Invalid");let o=parseInt(`${Math.log(m)/Math.log(2)}`)+1;return Math.pow(2,o)-m<2&&(o+=1),32-o};class P{constructor(o="192.168.0.1",u="24"){C(this,"netmask");C(this,"ip","");!`${u}`.includes(".")&&parseInt(`${u}`,10)>32&&(u=V(parseInt(`${u}`,10))),o=A(o),u=A(u),this.netmask=new T(`${o}/${u}`),this.ip=`${V(S(o))}`}available(){return Math.max(this.netmask.size-2,0)}size(){return this.netmask.size}base(){return this.netmask.base}first(){return this.netmask.first}last(){return this.netmask.last}broadcast(){return this.netmask.broadcast||"-"}ipInfo(){return{ip:this.ip,long:`${S(this.ip)}`,ip2:$(this.ip,2),ip8:$(this.ip,8),ip16:$(this.ip,16)}}maskInfo(){const o=`${V(this.netmask.maskLong)}`;return{bit:`${this.netmask.bitmask}`,long:`${this.netmask.maskLong}`,mask:o,mask2:$(o,2),mask8:$(o,8),mask16:$(o,16),opposite:`${this.netmask.hostmask}`}}}const rt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ut={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}},pt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ft={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},mt={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},Vt=et({__name:"Ipv4",async setup(m){let o,u;const f=Q(([o,u]=lt(()=>W({input:"192.168.0.1",mask:"24",subnetOption:R("text")},{paste:t=>/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)})),o=await o,u(),o));let d=F(!1),b=F(!1),h=F(254),v=F(""),e=F(new P),l=F(!1);const r=it(()=>{const t=[];return e.value.netmask.forEach(a=>{t.push(a)}),tt.formObject(t)}),n=()=>{f.current.mask=`${st(h.value)}`,b.value=!1};return at(()=>({input:f.current.input,mask:f.current.mask}),({input:t,mask:a})=>{v.value="";try{e.value=new P(t,a),f.save()}catch(k){v.value=$error(k)}},{immediate:!0}),(t,a)=>{const k=_("HelpTip"),z=_("Input"),U=_("Icon"),E=_("Button"),y=_("Align"),w=_("Card"),H=_("Exception"),B=_("HeightResize"),N=_("Modal"),D=_("SerializeOutput"),G=_("ExtendPage"),X=_("InputNumber");return L(),nt(ot,null,[i(y,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:p(()=>[i(z,{size:"large",width:300,modelValue:g(f).current.input,"onUpdate:modelValue":a[1]||(a[1]=c=>g(f).current.input=c),label:t.$t("ipcalc_ip")},{suffix:p(()=>[i(k,{onClick:a[0]||(a[0]=c=>d.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),i(z,{size:"large",width:280,modelValue:g(f).current.mask,"onUpdate:modelValue":a[4]||(a[4]=c=>g(f).current.mask=c),label:t.$t("ipcalc_mask")},{append:p(()=>[i(E,{onClick:a[2]||(a[2]=c=>b.value=!0)},{default:p(()=>[i(U,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:p(()=>[i(k,{onClick:a[3]||(a[3]=c=>d.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),i(k,{link:"https://www.npmjs.com/package/netmask"})]),_:1}),v.value===""?(L(),O(y,{key:0,direction:"vertical"},{default:p(()=>[i(w,{title:t.$t("ipcalc_ip_info"),padding:"0"},{extra:p(()=>[M(x(g(f).current.input),1)]),default:p(()=>[I("div",rt,[i(s,{title:t.$t("ipcalc_ip_info_ip10"),value:e.value.ipInfo().ip},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_ip_info_long"),value:e.value.ipInfo().long},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_ip_info_ip8"),value:e.value.ipInfo().ip8},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_ip_info_ip16"),value:e.value.ipInfo().ip16},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_ip_info_ip2"),value:e.value.ipInfo().ip2,style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title","value"])])]),_:1},8,["title"]),i(w,{title:t.$t("ipcalc_mask_info"),padding:"0"},{extra:p(()=>[M(x(g(f).current.mask),1)]),default:p(()=>[I("div",ut,[i(s,{title:t.$t("ipcalc_mask"),value:e.value.maskInfo().bit},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_mask"),value:e.value.maskInfo().mask},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_long"),value:e.value.maskInfo().long},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_opposite"),value:e.value.maskInfo().opposite},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_mask8"),value:e.value.maskInfo().mask8},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_mask16"),value:e.value.maskInfo().mask16},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_mask_info_mask2"),value:e.value.maskInfo().mask2,style:{"grid-column-start":"3","grid-column-end":"5"}},null,8,["title","value"])])]),_:1},8,["title"]),i(w,{title:t.$t("ipcalc_network_info"),padding:"0"},{extra:p(()=>[i(E,{type:"primary",size:"small",text:t.$t("ipcalc_subnet"),onClick:a[5]||(a[5]=c=>l.value=!0)},null,8,["text"])]),default:p(()=>[I("div",pt,[i(s,{title:t.$t("ipcalc_network_info_available"),value:e.value.available()},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_network_info_size"),value:e.value.size()},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_network_info_base"),value:e.value.base()},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_network_info_first"),value:e.value.first()},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_network_info_last"),value:e.value.last()},null,8,["title","value"]),i(s,{title:t.$t("ipcalc_network_info_broadcast"),value:e.value.broadcast()},null,8,["title","value"])])]),_:1},8,["title"])]),_:1})):j("",!0),v.value!==""?(L(),O(B,{key:1,append:[".ctool-page-option"]},{default:p(()=>[i(H,{content:v.value},null,8,["content"])]),_:1},8,["append"])):j("",!0),i(N,{title:t.$t("ipcalc_format"),modelValue:d.value,"onUpdate:modelValue":a[6]||(a[6]=c=>d.value=c),width:"98%","footer-type":"normal"},{default:p(()=>[i(y,{direction:"vertical"},{default:p(()=>[i(w,{title:t.$t("ipcalc_ip"),padding:"0"},{default:p(()=>[I("div",ft,[i(s,{title:t.$t("ipcalc_ip_info_ip10"),value:"192.168.0.1"},null,8,["title"]),i(s,{title:t.$t("ipcalc_ip_info_long"),value:"3232235521"},null,8,["title"]),i(s,{title:t.$t("ipcalc_ip_info_ip8"),value:"0300.0250.0000.0001"},null,8,["title"]),i(s,{title:t.$t("ipcalc_ip_info_ip16"),value:"0xC0.0xA8.0x00.0x01"},null,8,["title"]),i(s,{title:t.$t("ipcalc_ip_info_ip2"),value:"0b11000000.0b10101000.0b00000000.0b00000001",style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title"])])]),_:1},8,["title"]),i(w,{title:t.$t("ipcalc_mask"),padding:"0"},{default:p(()=>[I("div",mt,[i(s,{title:t.$t("ipcalc_mask"),value:"24"},null,8,["title"]),i(s,{title:t.$t("ipcalc_mask_info_long"),value:"4294967040"},null,8,["title"]),i(s,{title:t.$t("ipcalc_mask_info_mask16"),value:"0xFF.0xFF.0xFF.0x00"},null,8,["title"]),i(s,{title:t.$t("ipcalc_mask_info_mask8"),value:"0377.0377.0377.0000"},null,8,["title"]),i(s,{title:t.$t("ipcalc_mask_info_mask"),value:"255.255.255.0"},null,8,["title"]),i(s,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b11111111.0b11111111.0b11111111.0b00000000",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","modelValue"]),i(G,{modelValue:l.value,"onUpdate:modelValue":a[11]||(a[11]=c=>l.value=c)},{default:p(()=>[i(w,{title:`${g(f).current.input} ${t.$t("ipcalc_subnet")}`,padding:"0"},{extra:p(()=>[i(y,null,{default:p(()=>[i(z,{size:"small",width:200,modelValue:g(f).current.mask,"onUpdate:modelValue":a[10]||(a[10]=c=>g(f).current.mask=c),label:t.$t("ipcalc_mask")},{append:p(()=>[i(E,{onClick:a[8]||(a[8]=c=>b.value=!0)},{default:p(()=>[i(U,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:p(()=>[i(k,{onClick:a[9]||(a[9]=c=>d.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),default:p(()=>[i(B,{reduce:35},{default:p(({height:c})=>[i(D,{disabledBorder:"",modelValue:g(f).current.subnetOption,"onUpdate:modelValue":a[7]||(a[7]=q=>g(f).current.subnetOption=q),allow:["json","xml","yaml","toml","php_array","properties","text"],content:r.value,height:c},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),i(N,{title:t.$t("ipcalc_mask_set_title"),modelValue:b.value,"onUpdate:modelValue":a[13]||(a[13]=c=>b.value=c),"footer-type":"long",onOk:n},{default:p(()=>[i(X,{size:"large",modelValue:h.value,"onUpdate:modelValue":a[12]||(a[12]=c=>h.value=c),label:t.$t("ipcalc_network_info_available")},null,8,["modelValue","label"])]),_:1},8,["title","modelValue"])],64)}}});export{Vt as default};
