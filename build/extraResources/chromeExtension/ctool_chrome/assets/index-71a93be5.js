import{e as Oe,u as $e,i as $,r as ir,a as qe}from"./string_decoder-7fdcd1c7.js";import{b as Ae,a as q}from"./shim-03580cdb.js";import{c as Xe}from"./_commonjsHelpers-87174ba5.js";var ce,Ce;function ze(){return Ce||(Ce=1,ce=Oe.EventEmitter),ce}var be,Ie;function nr(){if(Ie)return be;Ie=1;function w(o,h){var u=Object.keys(o);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(o);h&&(b=b.filter(function(R){return Object.getOwnPropertyDescriptor(o,R).enumerable})),u.push.apply(u,b)}return u}function m(o){for(var h=1;h<arguments.length;h++){var u=arguments[h]!=null?arguments[h]:{};h%2?w(Object(u),!0).forEach(function(b){_(o,b,u[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(u)):w(Object(u)).forEach(function(b){Object.defineProperty(o,b,Object.getOwnPropertyDescriptor(u,b))})}return o}function _(o,h,u){return h in o?Object.defineProperty(o,h,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[h]=u,o}function O(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")}function M(o,h){for(var u=0;u<h.length;u++){var b=h[u];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(o,b.key,b)}}function s(o,h,u){return h&&M(o.prototype,h),u&&M(o,u),o}var p=Ae,a=p.Buffer,n=$e,l=n.inspect,c=l&&l.custom||"inspect";function v(o,h,u){a.prototype.copy.call(o,h,u)}return be=function(){function o(){O(this,o),this.head=null,this.tail=null,this.length=0}return s(o,[{key:"push",value:function(u){var b={data:u,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(u){var b={data:u,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(u){if(this.length===0)return"";for(var b=this.head,R=""+b.data;b=b.next;)R+=u+b.data;return R}},{key:"concat",value:function(u){if(this.length===0)return a.alloc(0);for(var b=a.allocUnsafe(u>>>0),R=this.head,T=0;R;)v(R.data,b,T),T+=R.data.length,R=R.next;return b}},{key:"consume",value:function(u,b){var R;return u<this.head.data.length?(R=this.head.data.slice(0,u),this.head.data=this.head.data.slice(u)):u===this.head.data.length?R=this.shift():R=b?this._getString(u):this._getBuffer(u),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(u){var b=this.head,R=1,T=b.data;for(u-=T.length;b=b.next;){var y=b.data,E=u>y.length?y.length:u;if(E===y.length?T+=y:T+=y.slice(0,u),u-=E,u===0){E===y.length?(++R,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=y.slice(E));break}++R}return this.length-=R,T}},{key:"_getBuffer",value:function(u){var b=a.allocUnsafe(u),R=this.head,T=1;for(R.data.copy(b),u-=R.data.length;R=R.next;){var y=R.data,E=u>y.length?y.length:u;if(y.copy(b,b.length-u,0,E),u-=E,u===0){E===y.length?(++T,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=y.slice(E));break}++T}return this.length-=T,b}},{key:c,value:function(u,b){return l(this,m({},b,{depth:0,customInspect:!1}))}}]),o}(),be}var pe,je;function Je(){if(je)return pe;je=1;function w(p,a){var n=this,l=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return l||c?(a?a(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(M,this,p)):q.nextTick(M,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(v){!a&&v?n._writableState?n._writableState.errorEmitted?q.nextTick(_,n):(n._writableState.errorEmitted=!0,q.nextTick(m,n,v)):q.nextTick(m,n,v):a?(q.nextTick(_,n),a(v)):q.nextTick(_,n)}),this)}function m(p,a){M(p,a),_(p)}function _(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function O(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function M(p,a){p.emit("error",a)}function s(p,a){var n=p._readableState,l=p._writableState;n&&n.autoDestroy||l&&l.autoDestroy?p.destroy(a):p.emit("error",a)}return pe={destroy:w,undestroy:O,errorOrDestroy:s},pe}var _e={},ke;function X(){if(ke)return _e;ke=1;function w(a,n){a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n}var m={};function _(a,n,l){l||(l=Error);function c(o,h,u){return typeof n=="string"?n:n(o,h,u)}var v=function(o){w(h,o);function h(u,b,R){return o.call(this,c(u,b,R))||this}return h}(l);v.prototype.name=l.name,v.prototype.code=a,m[a]=v}function O(a,n){if(Array.isArray(a)){var l=a.length;return a=a.map(function(c){return String(c)}),l>2?"one of ".concat(n," ").concat(a.slice(0,l-1).join(", "),", or ")+a[l-1]:l===2?"one of ".concat(n," ").concat(a[0]," or ").concat(a[1]):"of ".concat(n," ").concat(a[0])}else return"of ".concat(n," ").concat(String(a))}function M(a,n,l){return a.substr(!l||l<0?0:+l,n.length)===n}function s(a,n,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-n.length,l)===n}function p(a,n,l){return typeof l!="number"&&(l=0),l+n.length>a.length?!1:a.indexOf(n,l)!==-1}return _("ERR_INVALID_OPT_VALUE",function(a,n){return'The value "'+n+'" is invalid for option "'+a+'"'},TypeError),_("ERR_INVALID_ARG_TYPE",function(a,n,l){var c;typeof n=="string"&&M(n,"not ")?(c="must not be",n=n.replace(/^not /,"")):c="must be";var v;if(s(a," argument"))v="The ".concat(a," ").concat(c," ").concat(O(n,"type"));else{var o=p(a,".")?"property":"argument";v='The "'.concat(a,'" ').concat(o," ").concat(c," ").concat(O(n,"type"))}return v+=". Received type ".concat(typeof l),v},TypeError),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),_("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),_("ERR_STREAM_PREMATURE_CLOSE","Premature close"),_("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),_("ERR_STREAM_WRITE_AFTER_END","write after end"),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),_e.codes=m,_e}var ge,We;function Qe(){if(We)return ge;We=1;var w=X().codes.ERR_INVALID_OPT_VALUE;function m(O,M,s){return O.highWaterMark!=null?O.highWaterMark:M?O[s]:null}function _(O,M,s,p){var a=m(M,p,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var n=p?s:"highWaterMark";throw new w(n,a)}return Math.floor(a)}return O.objectMode?16:16*1024}return ge={getHighWaterMark:_},ge}var ve,xe;function Ze(){if(xe)return ve;xe=1,ve=N;function w(i){var t=this;this.next=null,this.entry=null,this.finish=function(){ue(t,i)}}var m;N.WritableState=k;var _={deprecate:ir()},O=ze(),M=Ae.Buffer,s=Xe.Uint8Array||function(){};function p(i){return M.from(i)}function a(i){return M.isBuffer(i)||i instanceof s}var n=Je(),l=Qe(),c=l.getHighWaterMark,v=X().codes,o=v.ERR_INVALID_ARG_TYPE,h=v.ERR_METHOD_NOT_IMPLEMENTED,u=v.ERR_MULTIPLE_CALLBACK,b=v.ERR_STREAM_CANNOT_PIPE,R=v.ERR_STREAM_DESTROYED,T=v.ERR_STREAM_NULL_VALUES,y=v.ERR_STREAM_WRITE_AFTER_END,E=v.ERR_UNKNOWN_ENCODING,A=n.errorOrDestroy;$(N,O);function I(){}function k(i,t,d){m=m||K(),i=i||{},typeof d!="boolean"&&(d=t instanceof m),this.objectMode=!!i.objectMode,d&&(this.objectMode=this.objectMode||!!i.writableObjectMode),this.highWaterMark=c(this,i,"writableHighWaterMark",d),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var S=i.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){fe(t,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,d=[];t;)d.push(t),t=t.next;return d},function(){try{Object.defineProperty(k.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var W;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(t){return W.call(this,t)?!0:this!==N?!1:t&&t._writableState instanceof k}})):W=function(t){return t instanceof this};function N(i){m=m||K();var t=this instanceof m;if(!t&&!W.call(N,this))return new N(i);this._writableState=new k(i,this,t),this.writable=!0,i&&(typeof i.write=="function"&&(this._write=i.write),typeof i.writev=="function"&&(this._writev=i.writev),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.final=="function"&&(this._final=i.final)),O.call(this)}N.prototype.pipe=function(){A(this,new b)};function D(i,t){var d=new y;A(i,d),q.nextTick(t,d)}function Q(i,t,d,S){var P;return d===null?P=new T:typeof d!="string"&&!t.objectMode&&(P=new o("chunk",["string","Buffer"],d)),P?(A(i,P),q.nextTick(S,P),!1):!0}N.prototype.write=function(i,t,d){var S=this._writableState,P=!1,e=!S.objectMode&&a(i);return e&&!M.isBuffer(i)&&(i=p(i)),typeof t=="function"&&(d=t,t=null),e?t="buffer":t||(t=S.defaultEncoding),typeof d!="function"&&(d=I),S.ending?D(this,d):(e||Q(this,S,i,d))&&(S.pendingcb++,P=ne(this,S,e,i,t,d)),P},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var i=this._writableState;i.corked&&(i.corked--,!i.writing&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&H(this,i))},N.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new E(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(i,t,d){return!i.objectMode&&i.decodeStrings!==!1&&typeof t=="string"&&(t=M.from(t,d)),t}Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ne(i,t,d,S,P,e){if(!d){var r=z(t,S,P);S!==r&&(d=!0,P="buffer",S=r)}var f=t.objectMode?1:S.length;t.length+=f;var g=t.length<t.highWaterMark;if(g||(t.needDrain=!0),t.writing||t.corked){var j=t.lastBufferedRequest;t.lastBufferedRequest={chunk:S,encoding:P,isBuf:d,callback:e,next:null},j?j.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else F(i,t,!1,f,S,P,e);return g}function F(i,t,d,S,P,e,r){t.writelen=S,t.writecb=r,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):d?i._writev(P,t.onwrite):i._write(P,e,t.onwrite),t.sync=!1}function ae(i,t,d,S,P){--t.pendingcb,d?(q.nextTick(P,S),q.nextTick(U,i,t),i._writableState.errorEmitted=!0,A(i,S)):(P(S),i._writableState.errorEmitted=!0,A(i,S),U(i,t))}function Z(i){i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0}function fe(i,t){var d=i._writableState,S=d.sync,P=d.writecb;if(typeof P!="function")throw new u;if(Z(d),t)ae(i,d,S,t,P);else{var e=re(d)||i.destroyed;!e&&!d.corked&&!d.bufferProcessing&&d.bufferedRequest&&H(i,d),S?q.nextTick(B,i,d,e,P):B(i,d,e,P)}}function B(i,t,d,S){d||ee(i,t),t.pendingcb--,S(),U(i,t)}function ee(i,t){t.length===0&&t.needDrain&&(t.needDrain=!1,i.emit("drain"))}function H(i,t){t.bufferProcessing=!0;var d=t.bufferedRequest;if(i._writev&&d&&d.next){var S=t.bufferedRequestCount,P=new Array(S),e=t.corkedRequestsFree;e.entry=d;for(var r=0,f=!0;d;)P[r]=d,d.isBuf||(f=!1),d=d.next,r+=1;P.allBuffers=f,F(i,t,!0,t.length,P,"",e.finish),t.pendingcb++,t.lastBufferedRequest=null,e.next?(t.corkedRequestsFree=e.next,e.next=null):t.corkedRequestsFree=new w(t),t.bufferedRequestCount=0}else{for(;d;){var g=d.chunk,j=d.encoding,L=d.callback,C=t.objectMode?1:g.length;if(F(i,t,!1,C,g,j,L),d=d.next,t.bufferedRequestCount--,t.writing)break}d===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=d,t.bufferProcessing=!1}N.prototype._write=function(i,t,d){d(new h("_write()"))},N.prototype._writev=null,N.prototype.end=function(i,t,d){var S=this._writableState;return typeof i=="function"?(d=i,i=null,t=null):typeof t=="function"&&(d=t,t=null),i!=null&&this.write(i,t),S.corked&&(S.corked=1,this.uncork()),S.ending||le(this,S,d),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function re(i){return i.ending&&i.length===0&&i.bufferedRequest===null&&!i.finished&&!i.writing}function oe(i,t){i._final(function(d){t.pendingcb--,d&&A(i,d),t.prefinished=!0,i.emit("prefinish"),U(i,t)})}function te(i,t){!t.prefinished&&!t.finalCalled&&(typeof i._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,q.nextTick(oe,i,t)):(t.prefinished=!0,i.emit("prefinish")))}function U(i,t){var d=re(t);if(d&&(te(i,t),t.pendingcb===0&&(t.finished=!0,i.emit("finish"),t.autoDestroy))){var S=i._readableState;(!S||S.autoDestroy&&S.endEmitted)&&i.destroy()}return d}function le(i,t,d){t.ending=!0,U(i,t),d&&(t.finished?q.nextTick(d):i.once("finish",d)),t.ended=!0,i.writable=!1}function ue(i,t,d){var S=i.entry;for(i.entry=null;S;){var P=S.callback;t.pendingcb--,P(d),S=S.next}t.corkedRequestsFree.next=i}return Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),N.prototype.destroy=n.destroy,N.prototype._undestroy=n.undestroy,N.prototype._destroy=function(i,t){t(i)},ve}var ye,Be;function K(){if(Be)return ye;Be=1;var w=Object.keys||function(l){var c=[];for(var v in l)c.push(v);return c};ye=p;var m=er(),_=Ze();$(p,m);for(var O=w(_.prototype),M=0;M<O.length;M++){var s=O[M];p.prototype[s]||(p.prototype[s]=_.prototype[s])}function p(l){if(!(this instanceof p))return new p(l);m.call(this,l),_.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||q.nextTick(n,this)}function n(l){l.end()}return Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),ye}var we,Ue;function Le(){if(Ue)return we;Ue=1;var w=X().codes.ERR_STREAM_PREMATURE_CLOSE;function m(s){var p=!1;return function(){if(!p){p=!0;for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];s.apply(this,n)}}}function _(){}function O(s){return s.setHeader&&typeof s.abort=="function"}function M(s,p,a){if(typeof p=="function")return M(s,null,p);p||(p={}),a=m(a||_);var n=p.readable||p.readable!==!1&&s.readable,l=p.writable||p.writable!==!1&&s.writable,c=function(){s.writable||o()},v=s._writableState&&s._writableState.finished,o=function(){l=!1,v=!0,n||a.call(s)},h=s._readableState&&s._readableState.endEmitted,u=function(){n=!1,h=!0,l||a.call(s)},b=function(E){a.call(s,E)},R=function(){var E;if(n&&!h)return(!s._readableState||!s._readableState.ended)&&(E=new w),a.call(s,E);if(l&&!v)return(!s._writableState||!s._writableState.ended)&&(E=new w),a.call(s,E)},T=function(){s.req.on("finish",o)};return O(s)?(s.on("complete",o),s.on("abort",R),s.req?T():s.on("request",T)):l&&!s._writableState&&(s.on("end",c),s.on("close",c)),s.on("end",u),s.on("finish",o),p.error!==!1&&s.on("error",b),s.on("close",R),function(){s.removeListener("complete",o),s.removeListener("abort",R),s.removeListener("request",T),s.req&&s.req.removeListener("finish",o),s.removeListener("end",c),s.removeListener("close",c),s.removeListener("finish",o),s.removeListener("end",u),s.removeListener("error",b),s.removeListener("close",R)}}return we=M,we}var Re,Fe;function ar(){if(Fe)return Re;Fe=1;var w;function m(T,y,E){return y in T?Object.defineProperty(T,y,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[y]=E,T}var _=Le(),O=Symbol("lastResolve"),M=Symbol("lastReject"),s=Symbol("error"),p=Symbol("ended"),a=Symbol("lastPromise"),n=Symbol("handlePromise"),l=Symbol("stream");function c(T,y){return{value:T,done:y}}function v(T){var y=T[O];if(y!==null){var E=T[l].read();E!==null&&(T[a]=null,T[O]=null,T[M]=null,y(c(E,!1)))}}function o(T){q.nextTick(v,T)}function h(T,y){return function(E,A){T.then(function(){if(y[p]){E(c(void 0,!0));return}y[n](E,A)},A)}}var u=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((w={get stream(){return this[l]},next:function(){var y=this,E=this[s];if(E!==null)return Promise.reject(E);if(this[p])return Promise.resolve(c(void 0,!0));if(this[l].destroyed)return new Promise(function(W,N){q.nextTick(function(){y[s]?N(y[s]):W(c(void 0,!0))})});var A=this[a],I;if(A)I=new Promise(h(A,this));else{var k=this[l].read();if(k!==null)return Promise.resolve(c(k,!1));I=new Promise(this[n])}return this[a]=I,I}},m(w,Symbol.asyncIterator,function(){return this}),m(w,"return",function(){var y=this;return new Promise(function(E,A){y[l].destroy(null,function(I){if(I){A(I);return}E(c(void 0,!0))})})}),w),u),R=function(y){var E,A=Object.create(b,(E={},m(E,l,{value:y,writable:!0}),m(E,O,{value:null,writable:!0}),m(E,M,{value:null,writable:!0}),m(E,s,{value:null,writable:!0}),m(E,p,{value:y._readableState.endEmitted,writable:!0}),m(E,n,{value:function(k,W){var N=A[l].read();N?(A[a]=null,A[O]=null,A[M]=null,k(c(N,!1))):(A[O]=k,A[M]=W)},writable:!0}),E));return A[a]=null,_(y,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=A[M];k!==null&&(A[a]=null,A[O]=null,A[M]=null,k(I)),A[s]=I;return}var W=A[O];W!==null&&(A[a]=null,A[O]=null,A[M]=null,W(c(void 0,!0))),A[p]=!0}),y.on("readable",o.bind(null,A)),A};return Re=R,Re}var Ee,He;function fr(){return He||(He=1,Ee=function(){throw new Error("Readable.from is not available in the browser")}),Ee}var Se,Ge;function er(){if(Ge)return Se;Ge=1,Se=D;var w;D.ReadableState=N,Oe.EventEmitter;var m=function(r,f){return r.listeners(f).length},_=ze(),O=Ae.Buffer,M=Xe.Uint8Array||function(){};function s(e){return O.from(e)}function p(e){return O.isBuffer(e)||e instanceof M}var a=$e,n;a&&a.debuglog?n=a.debuglog("stream"):n=function(){};var l=nr(),c=Je(),v=Qe(),o=v.getHighWaterMark,h=X().codes,u=h.ERR_INVALID_ARG_TYPE,b=h.ERR_STREAM_PUSH_AFTER_EOF,R=h.ERR_METHOD_NOT_IMPLEMENTED,T=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y,E,A;$(D,_);var I=c.errorOrDestroy,k=["error","close","destroy","pause","resume"];function W(e,r,f){if(typeof e.prependListener=="function")return e.prependListener(r,f);!e._events||!e._events[r]?e.on(r,f):Array.isArray(e._events[r])?e._events[r].unshift(f):e._events[r]=[f,e._events[r]]}function N(e,r,f){w=w||K(),e=e||{},typeof f!="boolean"&&(f=r instanceof w),this.objectMode=!!e.objectMode,f&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=o(this,e,"readableHighWaterMark",f),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(y||(y=qe.StringDecoder),this.decoder=new y(e.encoding),this.encoding=e.encoding)}function D(e){if(w=w||K(),!(this instanceof D))return new D(e);var r=this instanceof w;this._readableState=new N(e,this,r),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),_.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(r){this._readableState&&(this._readableState.destroyed=r)}}),D.prototype.destroy=c.destroy,D.prototype._undestroy=c.undestroy,D.prototype._destroy=function(e,r){r(e)},D.prototype.push=function(e,r){var f=this._readableState,g;return f.objectMode?g=!0:typeof e=="string"&&(r=r||f.defaultEncoding,r!==f.encoding&&(e=O.from(e,r),r=""),g=!0),Q(this,e,r,!1,g)},D.prototype.unshift=function(e){return Q(this,e,null,!0,!1)};function Q(e,r,f,g,j){n("readableAddChunk",r);var L=e._readableState;if(r===null)L.reading=!1,fe(e,L);else{var C;if(j||(C=ne(L,r)),C)I(e,C);else if(L.objectMode||r&&r.length>0)if(typeof r!="string"&&!L.objectMode&&Object.getPrototypeOf(r)!==O.prototype&&(r=s(r)),g)L.endEmitted?I(e,new T):z(e,L,r,!0);else if(L.ended)I(e,new b);else{if(L.destroyed)return!1;L.reading=!1,L.decoder&&!f?(r=L.decoder.write(r),L.objectMode||r.length!==0?z(e,L,r,!1):H(e,L)):z(e,L,r,!1)}else g||(L.reading=!1,H(e,L))}return!L.ended&&(L.length<L.highWaterMark||L.length===0)}function z(e,r,f,g){r.flowing&&r.length===0&&!r.sync?(r.awaitDrain=0,e.emit("data",f)):(r.length+=r.objectMode?1:f.length,g?r.buffer.unshift(f):r.buffer.push(f),r.needReadable&&B(e)),H(e,r)}function ne(e,r){var f;return!p(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(f=new u("chunk",["string","Buffer","Uint8Array"],r)),f}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(e){y||(y=qe.StringDecoder);var r=new y(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var f=this._readableState.buffer.head,g="";f!==null;)g+=r.write(f.data),f=f.next;return this._readableState.buffer.clear(),g!==""&&this._readableState.buffer.push(g),this._readableState.length=g.length,this};var F=1073741824;function ae(e){return e>=F?e=F:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Z(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=ae(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}D.prototype.read=function(e){n("read",e),e=parseInt(e,10);var r=this._readableState,f=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&((r.highWaterMark!==0?r.length>=r.highWaterMark:r.length>0)||r.ended))return n("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?d(this):B(this),null;if(e=Z(e,r),e===0&&r.ended)return r.length===0&&d(this),null;var g=r.needReadable;n("need readable",g),(r.length===0||r.length-e<r.highWaterMark)&&(g=!0,n("length less than watermark",g)),r.ended||r.reading?(g=!1,n("reading or ended",g)):g&&(n("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=Z(f,r)));var j;return e>0?j=t(e,r):j=null,j===null?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),r.length===0&&(r.ended||(r.needReadable=!0),f!==e&&r.ended&&d(this)),j!==null&&this.emit("data",j),j};function fe(e,r){if(n("onEofChunk"),!r.ended){if(r.decoder){var f=r.decoder.end();f&&f.length&&(r.buffer.push(f),r.length+=r.objectMode?1:f.length)}r.ended=!0,r.sync?B(e):(r.needReadable=!1,r.emittedReadable||(r.emittedReadable=!0,ee(e)))}}function B(e){var r=e._readableState;n("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(n("emitReadable",r.flowing),r.emittedReadable=!0,q.nextTick(ee,e))}function ee(e){var r=e._readableState;n("emitReadable_",r.destroyed,r.length,r.ended),!r.destroyed&&(r.length||r.ended)&&(e.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,i(e)}function H(e,r){r.readingMore||(r.readingMore=!0,q.nextTick(re,e,r))}function re(e,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&r.length===0);){var f=r.length;if(n("maybeReadMore read 0"),e.read(0),f===r.length)break}r.readingMore=!1}D.prototype._read=function(e){I(this,new R("_read()"))},D.prototype.pipe=function(e,r){var f=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=e;break;case 1:g.pipes=[g.pipes,e];break;default:g.pipes.push(e);break}g.pipesCount+=1,n("pipe count=%d opts=%j",g.pipesCount,r);var j=(!r||r.end!==!1)&&e!==q.stdout&&e!==q.stderr,L=j?G:J;g.endEmitted?q.nextTick(L):f.once("end",L),e.on("unpipe",C);function C(V,Y){n("onunpipe"),V===f&&Y&&Y.hasUnpiped===!1&&(Y.hasUnpiped=!0,tr())}function G(){n("onend"),e.end()}var ie=oe(f);e.on("drain",ie);var Pe=!1;function tr(){n("cleanup"),e.removeListener("close",de),e.removeListener("finish",he),e.removeListener("drain",ie),e.removeListener("error",se),e.removeListener("unpipe",C),f.removeListener("end",G),f.removeListener("end",J),f.removeListener("data",Ne),Pe=!0,g.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&ie()}f.on("data",Ne);function Ne(V){n("ondata");var Y=e.write(V);n("dest.write",Y),Y===!1&&((g.pipesCount===1&&g.pipes===e||g.pipesCount>1&&P(g.pipes,e)!==-1)&&!Pe&&(n("false write response, pause",g.awaitDrain),g.awaitDrain++),f.pause())}function se(V){n("onerror",V),J(),e.removeListener("error",se),m(e,"error")===0&&I(e,V)}W(e,"error",se);function de(){e.removeListener("finish",he),J()}e.once("close",de);function he(){n("onfinish"),e.removeListener("close",de),J()}e.once("finish",he);function J(){n("unpipe"),f.unpipe(e)}return e.emit("pipe",f),g.flowing||(n("pipe resume"),f.resume()),e};function oe(e){return function(){var f=e._readableState;n("pipeOnDrain",f.awaitDrain),f.awaitDrain&&f.awaitDrain--,f.awaitDrain===0&&m(e,"data")&&(f.flowing=!0,i(e))}}D.prototype.unpipe=function(e){var r=this._readableState,f={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,f),this);if(!e){var g=r.pipes,j=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var L=0;L<j;L++)g[L].emit("unpipe",this,{hasUnpiped:!1});return this}var C=P(r.pipes,e);return C===-1?this:(r.pipes.splice(C,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,f),this)},D.prototype.on=function(e,r){var f=_.prototype.on.call(this,e,r),g=this._readableState;return e==="data"?(g.readableListening=this.listenerCount("readable")>0,g.flowing!==!1&&this.resume()):e==="readable"&&!g.endEmitted&&!g.readableListening&&(g.readableListening=g.needReadable=!0,g.flowing=!1,g.emittedReadable=!1,n("on readable",g.length,g.reading),g.length?B(this):g.reading||q.nextTick(U,this)),f},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(e,r){var f=_.prototype.removeListener.call(this,e,r);return e==="readable"&&q.nextTick(te,this),f},D.prototype.removeAllListeners=function(e){var r=_.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&q.nextTick(te,this),r};function te(e){var r=e._readableState;r.readableListening=e.listenerCount("readable")>0,r.resumeScheduled&&!r.paused?r.flowing=!0:e.listenerCount("data")>0&&e.resume()}function U(e){n("readable nexttick read 0"),e.read(0)}D.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,le(this,e)),e.paused=!1,this};function le(e,r){r.resumeScheduled||(r.resumeScheduled=!0,q.nextTick(ue,e,r))}function ue(e,r){n("resume",r.reading),r.reading||e.read(0),r.resumeScheduled=!1,e.emit("resume"),i(e),r.flowing&&!r.reading&&e.read(0)}D.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function i(e){var r=e._readableState;for(n("flow",r.flowing);r.flowing&&e.read()!==null;);}D.prototype.wrap=function(e){var r=this,f=this._readableState,g=!1;e.on("end",function(){if(n("wrapped end"),f.decoder&&!f.ended){var C=f.decoder.end();C&&C.length&&r.push(C)}r.push(null)}),e.on("data",function(C){if(n("wrapped data"),f.decoder&&(C=f.decoder.write(C)),!(f.objectMode&&C==null)&&!(!f.objectMode&&(!C||!C.length))){var G=r.push(C);G||(g=!0,e.pause())}});for(var j in e)this[j]===void 0&&typeof e[j]=="function"&&(this[j]=function(G){return function(){return e[G].apply(e,arguments)}}(j));for(var L=0;L<k.length;L++)e.on(k[L],this.emit.bind(this,k[L]));return this._read=function(C){n("wrapped _read",C),g&&(g=!1,e.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return E===void 0&&(E=ar()),E(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),D._fromList=t,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function t(e,r){if(r.length===0)return null;var f;return r.objectMode?f=r.buffer.shift():!e||e>=r.length?(r.decoder?f=r.buffer.join(""):r.buffer.length===1?f=r.buffer.first():f=r.buffer.concat(r.length),r.buffer.clear()):f=r.buffer.consume(e,r.decoder),f}function d(e){var r=e._readableState;n("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,q.nextTick(S,r,e))}function S(e,r){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"),e.autoDestroy)){var f=r._writableState;(!f||f.autoDestroy&&f.finished)&&r.destroy()}}typeof Symbol=="function"&&(D.from=function(e,r){return A===void 0&&(A=fr()),A(D,e,r)});function P(e,r){for(var f=0,g=e.length;f<g;f++)if(e[f]===r)return f;return-1}return Se}var me,Ve;function rr(){if(Ve)return me;Ve=1,me=a;var w=X().codes,m=w.ERR_METHOD_NOT_IMPLEMENTED,_=w.ERR_MULTIPLE_CALLBACK,O=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,M=w.ERR_TRANSFORM_WITH_LENGTH_0,s=K();$(a,s);function p(c,v){var o=this._transformState;o.transforming=!1;var h=o.writecb;if(h===null)return this.emit("error",new _);o.writechunk=null,o.writecb=null,v!=null&&this.push(v),h(c);var u=this._readableState;u.reading=!1,(u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);s.call(this,c),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",n)}function n(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(v,o){l(c,v,o)}):l(this,null,null)}a.prototype.push=function(c,v){return this._transformState.needTransform=!1,s.prototype.push.call(this,c,v)},a.prototype._transform=function(c,v,o){o(new m("_transform()"))},a.prototype._write=function(c,v,o){var h=this._transformState;if(h.writecb=o,h.writechunk=c,h.writeencoding=v,!h.transforming){var u=this._readableState;(h.needTransform||u.needReadable||u.length<u.highWaterMark)&&this._read(u.highWaterMark)}},a.prototype._read=function(c){var v=this._transformState;v.writechunk!==null&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0},a.prototype._destroy=function(c,v){s.prototype._destroy.call(this,c,function(o){v(o)})};function l(c,v,o){if(v)return c.emit("error",v);if(o!=null&&c.push(o),c._writableState.length)throw new M;if(c._transformState.transforming)throw new O;return c.push(null)}return me}var Te,Ye;function or(){if(Ye)return Te;Ye=1,Te=m;var w=rr();$(m,w);function m(_){if(!(this instanceof m))return new m(_);w.call(this,_)}return m.prototype._transform=function(_,O,M){M(null,_)},Te}var Me,Ke;function lr(){if(Ke)return Me;Ke=1;var w;function m(o){var h=!1;return function(){h||(h=!0,o.apply(void 0,arguments))}}var _=X().codes,O=_.ERR_MISSING_ARGS,M=_.ERR_STREAM_DESTROYED;function s(o){if(o)throw o}function p(o){return o.setHeader&&typeof o.abort=="function"}function a(o,h,u,b){b=m(b);var R=!1;o.on("close",function(){R=!0}),w===void 0&&(w=Le()),w(o,{readable:h,writable:u},function(y){if(y)return b(y);R=!0,b()});var T=!1;return function(y){if(!R&&!T){if(T=!0,p(o))return o.abort();if(typeof o.destroy=="function")return o.destroy();b(y||new M("pipe"))}}}function n(o){o()}function l(o,h){return o.pipe(h)}function c(o){return!o.length||typeof o[o.length-1]!="function"?s:o.pop()}function v(){for(var o=arguments.length,h=new Array(o),u=0;u<o;u++)h[u]=arguments[u];var b=c(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new O("streams");var R,T=h.map(function(y,E){var A=E<h.length-1,I=E>0;return a(y,A,I,function(k){R||(R=k),k&&T.forEach(n),!A&&(T.forEach(n),b(R))})});return h.reduce(l)}return Me=v,Me}var cr=x,De=Oe.EventEmitter,ur=$;ur(x,De);x.Readable=er();x.Writable=Ze();x.Duplex=K();x.Transform=rr();x.PassThrough=or();x.finished=Le();x.pipeline=lr();x.Stream=x;function x(){De.call(this)}x.prototype.pipe=function(w,m){var _=this;function O(c){w.writable&&w.write(c)===!1&&_.pause&&_.pause()}_.on("data",O);function M(){_.readable&&_.resume&&_.resume()}w.on("drain",M),!w._isStdio&&(!m||m.end!==!1)&&(_.on("end",p),_.on("close",a));var s=!1;function p(){s||(s=!0,w.end())}function a(){s||(s=!0,typeof w.destroy=="function"&&w.destroy())}function n(c){if(l(),De.listenerCount(this,"error")===0)throw c}_.on("error",n),w.on("error",n);function l(){_.removeListener("data",O),w.removeListener("drain",M),_.removeListener("end",p),_.removeListener("close",a),_.removeListener("error",n),w.removeListener("error",n),_.removeListener("end",l),_.removeListener("close",l),w.removeListener("close",l)}return _.on("end",l),_.on("close",l),w.on("close",l),w.emit("pipe",_),w};export{Ze as a,K as b,rr as c,or as d,Le as e,lr as f,er as r,cr as s};
