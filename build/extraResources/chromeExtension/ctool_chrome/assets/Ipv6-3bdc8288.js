import{u as k,i as tt}from"./action-282deb75.js";import{S as C,b as et}from"./index-4596abc8.js";import{A as nt,bi as rt,aA as L,be as F,k as I,bu as H,o as lt,x as u,bj as f,m as T,n as W,F as ot,aF as g,as as M,a$ as p,w as it,aT as ut,p as R}from"./history-7dbe2ade.js";import{I as S}from"./Item-99f7a34e.js";import"./index-25d7a505.js";import"./callBound-7203e6b7.js";import"./_commonjsHelpers-87174ba5.js";import"./shim-03580cdb.js";import"./empty-9f795c74.js";import"./index-395898e3.js";import"./_plugin-vue_export-helper-c27b6911.js";const B=function(n){_(n),n=n.toLowerCase();const r=n.split(/\:\:/g);if(r.length>2)throw new Error("Invalid address: "+n);let e=[];if(r.length===1){if(e=n.split(/\:/g),e.length!==8)throw new Error("Invalid address: "+n)}else if(r.length===2){const t=r[0],l=r[1],i=t.split(/\:/g),c=l.split(/\:/g);for(let a in i)e[a]=i[a];for(let a=c.length;a>0;--a)e[7-(c.length-a)]=c[a-1]}for(let t=0;t<8;++t)e[t]===void 0&&(e[t]="0000"),e[t]=x(e[t],"0",4);return e.join(":")},$=function(n){_(n),n=B(n),n=n.replace(/0000/g,"g"),n=n.replace(/\:000/g,":"),n=n.replace(/\:00/g,":"),n=n.replace(/\:0/g,":"),n=n.replace(/g/g,"0");const r=n.split(/\:/g);let e=!1,t=-1,l=0,i=-1,c=0;for(let a=0;a<8;++a){const b=r[a];let m=b==="0";m&&!e&&(i=a),!m&&e&&(c=a-i),c>1&&c>l&&(t=i,l=c),e=b==="0"}return e&&(c=8-i),c>1&&c>l&&(t=i,l=c),t>=0&&l>1&&r.splice(t,l,"g"),n=r.join(":"),n=n.replace(/\:g\:/g,"::"),n=n.replace(/\:g/g,"::"),n=n.replace(/g\:/g,"::"),n=n.replace(/g/g,"::"),n},_=function(n){const r=[],e=n.split("::");if(e.length>2)throw new Error("Invalid address: "+n);if(e.length===2){if(e[0].startsWith(":")||e[0].endsWith(":")||e[1].startsWith(":")||e[1].endsWith(":"))throw new Error("Invalid address: "+n);if(r.push(...e[0].split(":").filter(t=>t)),r.push(...e[1].split(":").filter(t=>t)),r.length>7)throw new Error("Invalid address: "+n)}else if(e.length===1&&(r.push(...e[0].split(":").filter(t=>t)),r.length!==8))throw new Error("Invalid address: "+n);for(const t of r){const l=t.match(/^[a-f0-9]{1,4}$/i);if((l==null?void 0:l[0])!==t)throw new Error("Invalid address: "+n)}},x=function(n,r,e){const t=r.repeat(e);return n.length<t.length&&(n=t.substring(0,t.length-n.length)+n),n},st=function(n){return parseInt(n,16).toString(2)},at=function(n){return parseInt(n,2).toString(16)},N=function(n){const e=B(n).split(":");let t="";for(const l of e)t+=x(st(l),"0",16);return t},h=function(n){const r=[];for(let e=0;e<8;++e){const t=n.substr(e*16,16),l=x(at(t),"0",4);r.push(l)}return r.join(":")},ct=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],a=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let v=0;v<m&&!(t&&v>=t);++v){const y=x(v.toString(2),"0",e-r),A=a+y+b,w=h(A);l?i.push($(w)):i.push(w)}return i},D=function(n,r,e,t){if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),c="0".repeat(128-e),a=i+"0".repeat(e-r)+c,b=i+"1".repeat(e-r)+c;return t?{start:$(h(a)),end:$(h(b)),size:Math.pow(2,e-r)}:{start:h(a),end:h(b),size:Math.pow(2,e-r)}},pt=function(n,r,e,t){if(typeof BigInt>"u")return D(n,r,e,t);if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),c="0".repeat(128-e),a=i+"0".repeat(e-r)+c,b=i+"1".repeat(e-r)+c;return t?{start:$(h(a)),end:$(h(b)),size:BigInt(2**(e-r)).toString()}:{start:h(a),end:h(b),size:BigInt(2**(e-r)).toString()}},dt=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,t=t||1,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],a=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let v=0;v<m&&v<t;++v){let y="";for(let o=0;o<e-r;++o)y+=Math.floor(Math.random()*2);const A=a+y+b,w=h(A);l?i.push($(w)):i.push(w)}return i},ft=function(n,r){if(_(n),r*=1,r<0||r>128||Math.floor(r/4)!=r/4)throw new Error("Invalid masks.");return B(n).replace(/:/g,"").split("").reverse().slice(0,(128-r)/4).join(".")},z={normalize:B,abbreviate:$,validate:_,divideSubnet:ct,range:D,rangeBigInt:pt,randomSubnet:dt,ptr:ft},V={normalize:n=>{try{return n!==""?z.normalize(n):""}catch(r){return $error(r)}},abbreviate:n=>{try{return n!==""?z.abbreviate(n):""}catch(r){return $error(r)}},validate:n=>(z.validate(n),!0),subnet:(n,r=32,e=64,t=8,l=!1,i=!1)=>{if(n==="")return C.empty();try{return C.formObject(i?z.randomSubnet(n,r,e,t,l):z.divideSubnet(n,r,e,t,l))}catch(c){return C.fromError($error(c))}},range:(n,r=32,e=64,t=!1)=>{if(n==="")return{start:"",end:"",size:0n};try{return z.rangeBigInt(n,r,e,t)}catch(l){return{start:$error(l),end:$error(l),size:0n}}},ptr:(n,r=32)=>{if(n==="")return"";try{return z.ptr(n,r)}catch(e){return $error(e)}}},bt={style:{display:"grid","grid-template-columns":"1fr 1fr"}},gt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},At=nt({__name:"Ipv6",async setup(n){let r,e;const t=k(([r,e]=rt(()=>tt({input:"2404:68::",mask0:32,mask1:64,limit:100,abbr:!1,random:!1,maskPtr:32,subnetOption:et("text")},{paste:o=>{try{V.validate(o)}catch{return!1}return!0}})),r=await r,e(),r));let l=L(""),i=L(!1);F(()=>({input:t.current.input.trim()}),()=>{l.value="";try{if(t.current.input.trim()==="")throw new Error("Input Empty");V.validate(t.current.input)}catch(o){l.value=$error(o)}}),F(()=>({current:t.current}),()=>{t.current.input.trim()!==""&&t.save()},{deep:!0,immediate:!0});const c=I(()=>V.normalize(t.current.input.trim())),a=I(()=>V.abbreviate(t.current.input.trim())),b=I(()=>V.subnet(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.limit,t.current.abbr,t.current.random)),m=I(()=>V.range(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.abbr)),v=I(()=>V.ptr(t.current.input.trim(),t.current.maskPtr)),y=H.range(0,128).map(o=>({value:o,label:`/${o}`})),A=H.range(0,129,4).map(o=>({value:o,label:`/${o}`})),w=I(()=>{const o=H.range(t.current.mask0+1,129);return o.includes(t.current.mask1)||o.push(t.current.mask1),o.map(s=>({value:s,label:`/${s}`}))});return(o,s)=>{const q=g("Input"),G=g("HelpTip"),E=g("Align"),P=g("Card"),U=g("Select"),j=g("Bool"),J=g("Button"),K=g("Exception"),O=g("HeightResize"),Q=g("SerializeOutput"),X=g("InputNumber"),Y=g("ExtendPage");return M(),lt(ot,null,[u(E,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:f(()=>[u(q,{size:"large",width:400,modelValue:p(t).current.input,"onUpdate:modelValue":s[0]||(s[0]=d=>p(t).current.input=d),label:o.$t("ipcalc_ip")},null,8,["modelValue","label"]),u(G,{link:"https://www.npmjs.com/package/ip6"})]),_:1}),l.value===""?(M(),T(E,{key:0,direction:"vertical"},{default:f(()=>[u(P,{title:o.$t("ipcalc_ip_info"),padding:"0"},{extra:f(()=>[it(ut(p(t).current.input),1)]),default:f(()=>[R("div",bt,[u(S,{title:o.$t("ipcalc_ip_info_full"),value:c.value},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_ip_info_short"),value:a.value},null,8,["title","value"])])]),_:1},8,["title"]),u(P,{title:o.$t("ipcalc_network_info"),padding:"0"},{extra:f(()=>[u(E,null,{default:f(()=>[u(U,{size:"small",options:p(y),modelValue:p(t).current.mask0,"onUpdate:modelValue":s[1]||(s[1]=d=>p(t).current.mask0=d)},null,8,["options","modelValue"]),u(U,{size:"small",options:w.value,modelValue:p(t).current.mask1,"onUpdate:modelValue":s[2]||(s[2]=d=>p(t).current.mask1=d)},null,8,["options","modelValue"]),u(j,{type:"primary",size:"small",modelValue:p(t).current.abbr,"onUpdate:modelValue":s[3]||(s[3]=d=>p(t).current.abbr=d),label:o.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),u(J,{type:"primary",size:"small",text:o.$t("ipcalc_subnet"),onClick:s[4]||(s[4]=d=>i.value=!0)},null,8,["text"])]),_:1})]),default:f(()=>[R("div",gt,[u(S,{title:o.$t("ipcalc_network_info_size"),value:`${m.value.size}`},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_network_info_first"),value:m.value.start},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_network_info_last"),value:m.value.end},null,8,["title","value"])])]),_:1},8,["title"]),u(P,{title:o.$t("ipcalc_ip_info_ptr")},{extra:f(()=>[u(U,{size:"small",options:p(A),modelValue:p(t).current.maskPtr,"onUpdate:modelValue":s[5]||(s[5]=d=>p(t).current.maskPtr=d)},null,8,["options","modelValue"])]),default:f(()=>[u(S,{value:v.value},null,8,["value"])]),_:1},8,["title"])]),_:1})):W("",!0),l.value!==""?(M(),T(O,{key:1,append:[".ctool-page-option"]},{default:f(()=>[u(K,{content:l.value},null,8,["content"])]),_:1},8,["append"])):W("",!0),u(Y,{modelValue:i.value,"onUpdate:modelValue":s[10]||(s[10]=d=>i.value=d)},{default:f(()=>[u(P,{title:`${p(t).current.input} ${o.$t("ipcalc_subnet")}`,padding:"0"},{extra:f(()=>[u(E,null,{default:f(()=>[u(X,{size:"small",width:120,modelValue:p(t).current.limit,"onUpdate:modelValue":s[7]||(s[7]=d=>p(t).current.limit=d),label:o.$t("ipcalc_limit")},null,8,["modelValue","label"]),u(j,{type:"primary",size:"small",modelValue:p(t).current.abbr,"onUpdate:modelValue":s[8]||(s[8]=d=>p(t).current.abbr=d),label:o.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),u(j,{type:"primary",size:"small",modelValue:p(t).current.random,"onUpdate:modelValue":s[9]||(s[9]=d=>p(t).current.random=d),label:o.$t("ipcalc_random"),border:""},null,8,["modelValue","label"])]),_:1})]),default:f(()=>[u(O,{reduce:35},{default:f(({height:d})=>[u(Q,{disabledBorder:"",modelValue:p(t).current.subnetOption,"onUpdate:modelValue":s[6]||(s[6]=Z=>p(t).current.subnetOption=Z),allow:["json","xml","yaml","toml","php_array","properties","text"],content:b.value,height:d},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{At as default};
