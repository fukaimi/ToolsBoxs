import{g as U,S as D,E as y,V as Le,D as p,P as Yt,f as Zt,h as Xt,i as oe,s as De,F as K,j as se,C,b as d,R as en,k as tn,a as Ze,l as q,r as nn,T as de,m as rn,n as on,I as Xe,o as et,q as Y,t as tt,A as nt,u as F,v as Be,N as xe,w as rt,x as it,y as ke,z as sn,B as ln,W as cn,G as an,H as hn,J as un,K as fn,M as dn,O as mn,Q as gn,U as pn,X as yn,Y as ot,Z as xn,_ as kn,$ as Sn,a0 as bn,a1 as Cn,a2 as An,a3 as vn,a4 as f}from"./index-1a29e17b.js";import{c as Mn,a as Ln,b as Dn,d as Bn}from"./index-2e6f94de.js";function g(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)st(t,arguments[e]);return t}function st(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)st(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const qe=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class V{constructor(e,n,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?l=>o(qe(l)):qe,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Zt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=tn(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Xt(e);let i=this.normalize(n);for(let o=0,s=r;;o++){let l=i.charCodeAt(o),c=this.match(l,s);if(c)return this.value=c,this;if(o==i.length-1)break;s==r&&o<n.length&&n.charCodeAt(o)==l&&s++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(V.prototype[Symbol.iterator]=function(){return this});const lt={from:-1,to:-1,match:/.*/.exec("")},we="gm"+(/x/.unicode==null?"":"u");class ct{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=lt,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new at(e,n,r,i,o);this.re=new RegExp(n,we+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Z(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Z(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const me=new WeakMap;class W{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=me.get(e);if(!i||i.from>=r||i.to<=n){let l=new W(n,e.sliceString(n,r));return me.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:o,from:s}=i;return s>n&&(o=e.sliceString(n,s)+o,s=n),i.to<r&&(o+=e.sliceString(i.to,r)),me.set(e,new W(s,o)),new W(n,o.slice(n-s,r-s))}}class at{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=lt,this.matchPos=Z(e,i),this.re=new RegExp(n,we+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=W.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Z(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=W.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=at.prototype[Symbol.iterator]=function(){return this});function wn(t){try{return new RegExp(t,we),!0}catch{return!1}}function Z(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Se(t){let e=g("input",{class:"cm-textfield",name:"line"}),n=g("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:X.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},g("label",t.state.phrase("Go to line"),": ",e)," ",g("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=t,s=o.doc.lineAt(o.selection.main.head),[,l,c,a,h]=i,u=a?+a.slice(1):0,m=c?+c:s.number;if(c&&h){let w=m/100;l&&(w=w*(l=="-"?-1:1)+s.number/o.doc.lines),m=Math.round(o.doc.lines*w)}else c&&l&&(m=m*(l=="-"?-1:1)+s.number);let T=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));t.dispatch({effects:X.of(!1),selection:d.cursor(T.from+Math.max(0,Math.min(u,T.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const X=D.define(),Ve=oe.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(X)&&(t=n.value);return t},provide:t=>De.from(t,e=>e?Se:null)}),Rn=t=>{let e=U(t,Se);if(!e){let n=[X.of(!0)];t.state.field(Ve,!1)==null&&n.push(D.appendConfig.of([Ve,En])),t.dispatch({effects:n}),e=U(t,Se)}return e&&e.dom.querySelector("input").focus(),!0},En=y.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Tn={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ht=K.define({combine(t){return se(t,Tn,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function In(t){let e=[Wn,Nn];return t&&e.push(ht.of(t)),e}const Pn=p.mark({class:"cm-selectionMatch"}),On=p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function $e(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=C.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=C.Word)}function Fn(t,e,n,r){return t(e.sliceDoc(n,n+1))==C.Word&&t(e.sliceDoc(r-1,r))==C.Word}const Nn=Le.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(ht),{state:n}=t,r=n.selection;if(r.ranges.length>1)return p.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return p.none;let c=n.wordAt(i.head);if(!c)return p.none;s=n.charCategorizer(i.head),o=n.sliceDoc(c.from,c.to)}else{let c=i.to-i.from;if(c<e.minSelectionLength||c>200)return p.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),s=n.charCategorizer(i.head),!($e(s,n,i.from,i.to)&&Fn(s,n,i.from,i.to)))return p.none}else if(o=n.sliceDoc(i.from,i.to).trim(),!o)return p.none}let l=[];for(let c of t.visibleRanges){let a=new V(n.doc,o,c.from,c.to);for(;!a.next().done;){let{from:h,to:u}=a.value;if((!s||$e(s,n,h,u))&&(i.empty&&h<=i.from&&u>=i.to?l.push(On.range(h,u)):(h>=i.to||u<=i.from)&&l.push(Pn.range(h,u)),l.length>e.maxMatches))return p.none}}return p.set(l)}},{decorations:t=>t.decorations}),Wn=y.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),qn=({state:t,dispatch:e})=>{let{selection:n}=t,r=d.create(n.ranges.map(i=>t.wordAt(i.head)||d.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Vn(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,l=new V(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(s)return null;l=new V(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(c=>c.from==l.value.from))continue;if(o){let c=t.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const $n=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return qn({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=Vn(t,r);return i?(e(t.update({selection:t.selection.addRange(d.range(i.from,i.to),!1),effects:y.scrollIntoView(i.to)})),!0):!1},Re=K.define({combine(t){return se(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new Xn(e)})}});class ut{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||wn(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new zn(this):new Hn(this)}getCursor(e,n=0,r){let i=e.doc?e:Ze.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?O(this,i,n,r):P(this,i,n,r)}}class ft{constructor(e){this.spec=e}}function P(t,e,n,r){return new V(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Gn(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Gn(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(ee(i,n-o))!=C.Word||e(te(i,n-o))!=C.Word)&&(e(te(i,r-o))!=C.Word||e(ee(i,r-o))!=C.Word))}class Hn extends ft{constructor(e){super(e)}nextMatch(e,n,r){let i=P(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=P(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),s=P(this.spec,e,o,i),l=null;for(;!s.nextOverlapping().done;)l=s.value;if(l)return l;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=P(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=P(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function O(t,e,n,r){return new ct(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Un(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function ee(t,e){return t.slice(q(t,e,!1),e)}function te(t,e){return t.slice(e,q(t,e))}function Un(t){return(e,n,r)=>!r[0].length||(t(ee(r.input,r.index))!=C.Word||t(te(r.input,r.index))!=C.Word)&&(t(te(r.input,r.index+r[0].length))!=C.Word||t(ee(r.input,r.index+r[0].length))!=C.Word)}class zn extends ft{nextMatch(e,n,r){let i=O(this.spec,e,r,e.doc.length).next();return i.done&&(i=O(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),s=O(this.spec,e,o,r),l=null;for(;!s.next().done;)l=s.value;if(l&&(o==n||l.from>o+10))return l;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=O(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=O(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const z=D.define(),Ee=D.define(),R=oe.define({create(t){return new ge(be(t).create(),null)},update(t,e){for(let n of e.effects)n.is(z)?t=new ge(n.value.create(),t.panel):n.is(Ee)&&(t=new ge(t.query,n.value?Te:null));return t},provide:t=>De.from(t,e=>e.panel)});class ge{constructor(e,n){this.query=e,this.panel=n}}const Kn=p.mark({class:"cm-searchMatch"}),Jn=p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_n=Le.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(R))}update(t){let e=t.state.field(R);(e!=t.startState.field(R)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return p.none;let{view:n}=this,r=new en;for(let i=0,o=n.visibleRanges,s=o.length;i<s;i++){let{from:l,to:c}=o[i];for(;i<s-1&&c>o[i+1].from-2*250;)c=o[++i].to;t.highlight(n.state,l,c,(a,h)=>{let u=n.state.selection.ranges.some(m=>m.from==a&&m.to==h);r.add(a,h,u?Jn:Kn)})}return r.finish()}},{decorations:t=>t.decorations});function J(t){return e=>{let n=e.state.field(R,!1);return n&&n.query.spec.valid?t(e,n):dt(e)}}const ne=J((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);return r?(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Ie(t,r),userEvent:"select.search"}),!0):!1}),re=J((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);return i?(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ie(t,i),userEvent:"select.search"}),!0):!1}),Qn=J((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:d.create(n.map(r=>d.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),jn=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let l=new V(t.doc,t.sliceDoc(r,i));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(s=o.length),o.push(d.range(l.value.from,l.value.to))}return e(t.update({selection:d.create(o,s),userEvent:"select.search.matches"})),!0},Ge=J((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s=[],l,c,a=[];if(o.from==r&&o.to==i&&(c=n.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),a.push(y.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let h=s.length==0||s[0].from>=o.to?0:o.to-o.from-c.length;l={anchor:o.from-h,head:o.to-h},a.push(Ie(t,o))}return t.dispatch({changes:s,selection:l,scrollIntoView:!!l,effects:a,userEvent:"input.replace"}),!0}),Yn=J((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:y.announce.of(r),userEvent:"input.replace.all"}),!0});function Te(t){return t.state.facet(Re).createPanel(t)}function be(t,e){var n,r,i,o;let s=t.selection.main,l=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!l)return e;let c=t.facet(Re);return new ut({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}const dt=t=>{let e=t.state.field(R,!1);if(e&&e.panel){let n=U(t,Te);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=t.root.activeElement){let i=be(t.state,e.query.spec);i.valid&&t.dispatch({effects:z.of(i)}),r.focus(),r.select()}}else t.dispatch({effects:[Ee.of(!0),e?z.of(be(t.state,e.query.spec)):D.appendConfig.of(tr)]});return!0},mt=t=>{let e=t.state.field(R,!1);if(!e||!e.panel)return!1;let n=U(t,Te);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Ee.of(!1)}),!0},Zn=[{key:"Mod-f",run:dt,scope:"editor search-panel"},{key:"F3",run:ne,shift:re,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ne,shift:re,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mt,scope:"editor search-panel"},{key:"Mod-Shift-l",run:jn},{key:"Alt-g",run:Rn},{key:"Mod-d",run:$n,preventDefault:!0}];class Xn{constructor(e){this.view=e;let n=this.query=e.state.field(R).query.spec;this.commit=this.commit.bind(this),this.searchField=g("input",{value:n.search,placeholder:S(e,"Find"),"aria-label":S(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=g("input",{value:n.replace,placeholder:S(e,"Replace"),"aria-label":S(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=g("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=g("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=g("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,s){return g("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=g("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>ne(e),[S(e,"next")]),r("prev",()=>re(e),[S(e,"previous")]),r("select",()=>Qn(e),[S(e,"all")]),g("label",null,[this.caseField,S(e,"match case")]),g("label",null,[this.reField,S(e,"regexp")]),g("label",null,[this.wordField,S(e,"by word")]),...e.state.readOnly?[]:[g("br"),this.replaceField,r("replace",()=>Ge(e),[S(e,"replace")]),r("replaceAll",()=>Yn(e),[S(e,"replace all")])],g("button",{name:"close",onclick:()=>mt(e),"aria-label":S(e,"close"),type:"button"},["×"])])}commit(){let e=new ut({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:z.of(e)}))}keydown(e){nn(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?re:ne)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Ge(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(z)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Re).top}}function S(t,e){return t.state.phrase(e)}const _=30,Q=/[\s\.,:;?!]/;function Ie(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-_),s=Math.min(i,n+_),l=t.state.sliceDoc(o,s);if(o!=r.from){for(let c=0;c<_;c++)if(!Q.test(l[c+1])&&Q.test(l[c])){l=l.slice(c);break}}if(s!=i){for(let c=l.length-1;c>l.length-_;c--)if(!Q.test(l[c-1])&&Q.test(l[c])){l=l.slice(0,c);break}}return y.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}const er=y.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),tr=[R,Yt.lowest(_n),er],nr=t=>{let e=Oe(t.state);return e.line?rr(t):e.block?or(t):!1};function Pe(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const rr=Pe(cr,0),ir=Pe(gt,0),or=Pe((t,e)=>gt(t,e,lr(e)),0);function Oe(t,e=t.selection.main.head){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const H=50;function sr(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-H,r),s=t.sliceDoc(i,i+H),l=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,a=o.length-l;if(o.slice(a-e.length,a)==e&&s.slice(c,c+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+c,margin:c&&1}};let h,u;i-r<=2*H?h=u=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+H),u=t.sliceDoc(i-H,i));let m=/^\s*/.exec(h)[0].length,T=/\s*$/.exec(u)[0].length,w=u.length-T-n.length;return h.slice(m,m+e.length)==e&&u.slice(w,w+n.length)==n?{open:{pos:r+m+e.length,margin:/\s/.test(h.charAt(m+e.length))?1:0},close:{pos:i-T-n.length,margin:/\s/.test(u.charAt(w-1))?1:0}}:null}function lr(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}function gt(t,e,n=e.selection.ranges){let r=n.map(o=>Oe(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,s)=>sr(e,r[s],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let c=r[s],{open:a,close:h}=l;o.push({from:a.pos-c.open.length,to:a.pos+a.margin},{from:h.pos-h.margin,to:h.pos+c.close.length})}return{changes:o}}return null}function cr(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let l=r.length,c=1e9;for(let a=o;a<=s;){let h=e.doc.lineAt(a);if(h.from>i&&(o==s||s>h.from)){i=h.from;let u=Oe(e,a).line;if(!u)continue;let m=/^\s*/.exec(h.text)[0].length,T=m==h.length,w=h.text.slice(m,m+u.length)==u?m:-1;m<h.text.length&&m<c&&(c=m),r.push({line:h,comment:w,token:u,indent:m,empty:T,single:!1})}a=h.to+1}if(c<1e9)for(let a=l;a<r.length;a++)r[a].indent<r[a].line.text.length&&(r[a].indent=c);r.length==l+1&&(r[l].single=!0)}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:c,indent:a,empty:h,single:u}of r)(u||!h)&&o.push({from:l.from+a,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:c}of r)if(l>=0){let a=s.from+l,h=a+c.length;s.text[h-s.from]==" "&&h++,o.push({from:a,to:h})}return{changes:o}}return null}const Ce=nt.define(),ar=nt.define(),hr=K.define(),pt=K.define({combine(t){return se(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function ur(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const yt=oe.define({create(){return L.empty},update(t,e){let n=e.state.facet(pt),r=e.annotation(Ce);if(r){let c=e.docChanged?d.single(ur(e.changes)):void 0,a=k.fromTransaction(e,c),h=r.side,u=h==0?t.undone:t.done;return a?u=ie(u,u.length,n.minDepth,a):u=St(u,e.startState.selection),new L(h==0?r.rest:u,h==0?u:r.rest)}let i=e.annotation(ar);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(de.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=k.fromTransaction(e),s=e.annotation(de.time),l=e.annotation(de.userEvent);return o?t=t.addChanges(o,s,l,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new L(t.done.map(k.fromJSON),t.undone.map(k.fromJSON))}});function fr(t={}){return[yt,pt.of(t),y.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?xt:e.inputType=="historyRedo"?Ae:null;return r?(e.preventDefault(),r(n)):!1}})]}function le(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(yt,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const xt=le(0,!1),Ae=le(1,!1),dr=le(0,!0),mr=le(1,!0);class k{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new k(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new k(e.changes&&rn.fromJSON(e.changes),[],e.mapped&&on.fromJSON(e.mapped),e.startSelection&&d.fromJSON(e.startSelection),e.selectionsAfter.map(d.fromJSON))}static fromTransaction(e,n){let r=A;for(let i of e.startState.facet(hr)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new k(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,A)}static selection(e){return new k(void 0,A,void 0,void 0,e)}}function ie(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function gr(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let c=0;c<n.length;){let a=n[c++],h=n[c++];l>=a&&s<=h&&(r=!0)}}),r}function pr(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function kt(t,e){return t.length?e.length?t.concat(e):t:e}const A=[],yr=200;function St(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-yr));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),ie(t,t.length-1,1e9,n.setSelAfter(r)))}else return[k.selection([e])]}function xr(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function pe(t,e){if(!t.length)return t;let n=t.length,r=A;for(;n;){let i=kr(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[k.selection(r)]:A}function kr(t,e,n){let r=kt(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):A,n);if(!t.changes)return k.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new k(i,D.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}const Sr=/^(input\.type|delete)($|\.)/;class L{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new L(this.done,this.undone):this}addChanges(e,n,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||Sr.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i&&gr(l.changes,e.changes)||r=="input.type.compose")?s=ie(s,s.length-1,o,new k(e.changes.compose(l.changes),kt(e.effects,l.effects),l.mapped,l.startSelection,A)):s=ie(s,s.length,o,e),new L(s,A,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:A;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&pr(o[o.length-1],e)?this:new L(St(this.done,e),this.undone,n,r)}addMapping(e){return new L(pe(this.done,e),pe(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Ce.of({side:e,rest:xr(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?A:i.slice(0,i.length-1);return o.mapped&&(s=pe(s,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Ce.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}L.empty=new L(A,A);const br=[{key:"Mod-z",run:xt,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ae,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ae,preventDefault:!0},{key:"Mod-u",run:dr,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:mr,preventDefault:!0}];function G(t,e){return d.create(t.ranges.map(e),t.mainIndex)}function B(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function M({state:t,dispatch:e},n){let r=G(t.selection,n);return r.eq(t.selection)?!1:(e(B(t,r)),!0)}function ce(t,e){return d.cursor(e?t.to:t.from)}function bt(t,e){return M(t,n=>n.empty?t.moveByChar(n,e):ce(n,e))}function x(t){return t.textDirectionAt(t.state.selection.main.head)==sn.LTR}const Ct=t=>bt(t,!x(t)),At=t=>bt(t,x(t));function vt(t,e){return M(t,n=>n.empty?t.moveByGroup(n,e):ce(n,e))}const Cr=t=>vt(t,!x(t)),Ar=t=>vt(t,x(t));function vr(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ae(t,e,n){let r=Be(t).resolveInner(e.head),i=n?xe.closedBy:xe.openedBy;for(let c=e.head;;){let a=n?r.childAfter(c):r.childBefore(c);if(!a)break;vr(t,a,i)?r=a:c=n?a.to:a.from}let o=r.type.prop(i),s,l;return o&&(s=n?F(t,r.from,1):F(t,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,d.cursor(l,n?-1:1)}const Mr=t=>M(t,e=>ae(t.state,e,!x(t))),Lr=t=>M(t,e=>ae(t.state,e,x(t)));function Mt(t,e){return M(t,n=>{if(!n.empty)return ce(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Lt=t=>Mt(t,!1),Dt=t=>Mt(t,!0);function Bt(t){return Math.max(t.defaultLineHeight,Math.min(t.dom.clientHeight,innerHeight)-5)}function wt(t,e){let{state:n}=t,r=G(n.selection,l=>l.empty?t.moveVertically(l,e,Bt(t)):ce(l,e));if(r.eq(n.selection))return!1;let i=t.coordsAtPos(n.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),s;return i&&i.top>o.top&&i.bottom<o.bottom&&i.top-o.top<=t.scrollDOM.scrollHeight-t.scrollDOM.scrollTop-t.scrollDOM.clientHeight&&(s=y.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top})),t.dispatch(B(n,r),{effects:s}),!0}const He=t=>wt(t,!1),ve=t=>wt(t,!0);function E(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=d.cursor(r.from+o))}return i}const Dr=t=>M(t,e=>E(t,e,!0)),Br=t=>M(t,e=>E(t,e,!1)),wr=t=>M(t,e=>E(t,e,!x(t))),Rr=t=>M(t,e=>E(t,e,x(t))),Er=t=>M(t,e=>d.cursor(t.lineBlockAt(e.head).from,1)),Tr=t=>M(t,e=>d.cursor(t.lineBlockAt(e.head).to,-1));function Ir(t,e,n){let r=!1,i=G(t.selection,o=>{let s=F(t,o.head,-1)||F(t,o.head,1)||o.head>0&&F(t,o.head-1,1)||o.head<t.doc.length&&F(t,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?d.range(o.anchor,l):d.cursor(l)});return r?(e(B(t,i)),!0):!1}const Pr=({state:t,dispatch:e})=>Ir(t,e,!1);function v(t,e){let n=G(t.state.selection,r=>{let i=e(r);return d.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(B(t.state,n)),!0)}function Rt(t,e){return v(t,n=>t.moveByChar(n,e))}const Et=t=>Rt(t,!x(t)),Tt=t=>Rt(t,x(t));function It(t,e){return v(t,n=>t.moveByGroup(n,e))}const Or=t=>It(t,!x(t)),Fr=t=>It(t,x(t)),Nr=t=>v(t,e=>ae(t.state,e,!x(t))),Wr=t=>v(t,e=>ae(t.state,e,x(t)));function Pt(t,e){return v(t,n=>t.moveVertically(n,e))}const Ot=t=>Pt(t,!1),Ft=t=>Pt(t,!0);function Nt(t,e){return v(t,n=>t.moveVertically(n,e,Bt(t)))}const Ue=t=>Nt(t,!1),ze=t=>Nt(t,!0),qr=t=>v(t,e=>E(t,e,!0)),Vr=t=>v(t,e=>E(t,e,!1)),$r=t=>v(t,e=>E(t,e,!x(t))),Gr=t=>v(t,e=>E(t,e,x(t))),Hr=t=>v(t,e=>d.cursor(t.lineBlockAt(e.head).from)),Ur=t=>v(t,e=>d.cursor(t.lineBlockAt(e.head).to)),Ke=({state:t,dispatch:e})=>(e(B(t,{anchor:0})),!0),Je=({state:t,dispatch:e})=>(e(B(t,{anchor:t.doc.length})),!0),_e=({state:t,dispatch:e})=>(e(B(t,{anchor:t.selection.main.anchor,head:0})),!0),Qe=({state:t,dispatch:e})=>(e(B(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),zr=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Kr=({state:t,dispatch:e})=>{let n=ue(t).map(({from:r,to:i})=>d.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:d.create(n),userEvent:"select"})),!0},Jr=({state:t,dispatch:e})=>{let n=G(t.selection,r=>{var i;let o=Be(t).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return d.range(o.to,o.from)});return e(B(t,n)),!0},_r=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=d.create([n.main]):n.main.empty||(r=d.create([d.cursor(n.main.head)])),r?(e(B(t,r)),!0):!1};function he(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let c=e(s);c<s?(n="delete.backward",c=j(t,c,!1)):c>s&&(n="delete.forward",c=j(t,c,!0)),s=Math.min(s,c),l=Math.max(l,c)}else s=j(t,s,!1),l=j(t,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:d.cursor(s)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?y.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function j(t,e,n){if(t instanceof y)for(let r of t.state.facet(y.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const Wt=(t,e)=>he(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),o,s;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,n-i.from))){if(o[o.length-1]=="	")return n-1;let l=it(o,r.tabSize),c=l%ke(r)||ke(r);for(let a=0;a<c&&o[o.length-1-a]==" ";a++)n--;s=n}else s=q(i.text,n-i.from,e,e)+i.from,s==n&&i.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);return s}),Me=t=>Wt(t,!1),qt=t=>Wt(t,!0),Vt=(t,e)=>he(t,n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let c=q(o.text,r-o.from,e)+o.from,a=o.text.slice(Math.min(r,c)-o.from,Math.max(r,c)-o.from),h=s(a);if(l!=null&&h!=l)break;(a!=" "||r!=n)&&(l=h),r=c}return r}),$t=t=>Vt(t,!1),Qr=t=>Vt(t,!0),Gt=t=>he(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),jr=t=>he(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),Yr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:tt.of(["",""])},range:d.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Zr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),s=i==o.from?i-1:q(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:q(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(s,i))},range:d.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ue(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function Ht(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of ue(t)){if(n?o.to==t.doc.length:o.from==0)continue;let s=t.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+t.lineBreak});for(let c of o.ranges)i.push(d.range(Math.min(t.doc.length,c.anchor+l),Math.min(t.doc.length,c.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:t.lineBreak+s.text});for(let c of o.ranges)i.push(d.range(c.anchor-l,c.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:d.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Xr=({state:t,dispatch:e})=>Ht(t,e,!1),ei=({state:t,dispatch:e})=>Ht(t,e,!0);function Ut(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of ue(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ti=({state:t,dispatch:e})=>Ut(t,e,!1),ni=({state:t,dispatch:e})=>Ut(t,e,!0),ri=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ue(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=G(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function ii(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Be(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(xe.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const oi=zt(!1),si=zt(!0);function zt(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),c=!t&&o==s&&ii(e,o);t&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let a=new Xe(e,{simulateBreak:o,simulateDoubleBreak:!!c}),h=et(a,o);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<l.to&&/\s/.test(l.text[s-l.from]);)s++;c?{from:o,to:s}=c:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let u=["",Y(e,h)];return c&&u.push(Y(e,a.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:tt.of(u)},range:d.cursor(o+1+u[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Fe(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=t.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),s=l.to+1}let o=t.changes(i);return{changes:i,range:d.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const li=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Xe(t,{overrideIndentation:o=>{let s=n[o];return s??-1}}),i=Fe(t,(o,s,l)=>{let c=et(r,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let a=/^\s*/.exec(o.text)[0],h=Y(t,c);(a!=h||l.from<o.from+a.length)&&(n[o.from]=c,s.push({from:o.from,to:o.from+a.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},ci=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Fe(t,(n,r)=>{r.push({from:n.from,insert:t.facet(rt)})}),{userEvent:"input.indent"})),!0),ai=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Fe(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=it(i,t.tabSize),s=0,l=Y(t,Math.max(0,o-ke(t)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),hi=[{key:"Ctrl-b",run:Ct,shift:Et,preventDefault:!0},{key:"Ctrl-f",run:At,shift:Tt},{key:"Ctrl-p",run:Lt,shift:Ot},{key:"Ctrl-n",run:Dt,shift:Ft},{key:"Ctrl-a",run:Er,shift:Hr},{key:"Ctrl-e",run:Tr,shift:Ur},{key:"Ctrl-d",run:qt},{key:"Ctrl-h",run:Me},{key:"Ctrl-k",run:Gt},{key:"Ctrl-Alt-h",run:$t},{key:"Ctrl-o",run:Yr},{key:"Ctrl-t",run:Zr},{key:"Ctrl-v",run:ve}],ui=[{key:"ArrowLeft",run:Ct,shift:Et,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Cr,shift:Or,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wr,shift:$r,preventDefault:!0},{key:"ArrowRight",run:At,shift:Tt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ar,shift:Fr,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Rr,shift:Gr,preventDefault:!0},{key:"ArrowUp",run:Lt,shift:Ot,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ke,shift:_e},{mac:"Ctrl-ArrowUp",run:He,shift:Ue},{key:"ArrowDown",run:Dt,shift:Ft,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Je,shift:Qe},{mac:"Ctrl-ArrowDown",run:ve,shift:ze},{key:"PageUp",run:He,shift:Ue},{key:"PageDown",run:ve,shift:ze},{key:"Home",run:Br,shift:Vr,preventDefault:!0},{key:"Mod-Home",run:Ke,shift:_e},{key:"End",run:Dr,shift:qr,preventDefault:!0},{key:"Mod-End",run:Je,shift:Qe},{key:"Enter",run:oi},{key:"Mod-a",run:zr},{key:"Backspace",run:Me,shift:Me},{key:"Delete",run:qt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$t},{key:"Mod-Delete",mac:"Alt-Delete",run:Qr},{mac:"Mod-Backspace",run:jr},{mac:"Mod-Delete",run:Gt}].concat(hi.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),fi=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Mr,shift:Nr},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Lr,shift:Wr},{key:"Alt-ArrowUp",run:Xr},{key:"Shift-Alt-ArrowUp",run:ti},{key:"Alt-ArrowDown",run:ei},{key:"Shift-Alt-ArrowDown",run:ni},{key:"Escape",run:_r},{key:"Mod-Enter",run:si},{key:"Alt-l",mac:"Ctrl-l",run:Kr},{key:"Mod-i",run:Jr,preventDefault:!0},{key:"Mod-[",run:ai},{key:"Mod-]",run:ci},{key:"Mod-Alt-\\",run:li},{key:"Shift-Mod-k",run:ri},{key:"Shift-Mod-\\",run:Pr},{key:"Mod-/",run:nr},{key:"Alt-A",run:ir}].concat(ui);class di{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class I{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,o=r.facet(N).markerFilter;o&&(i=o(i));let s=p.set(i.map(l=>l.from==l.to||l.from==l.to-1&&r.doc.lineAt(l.from).to==l.from?p.widget({widget:new Ai(l),diagnostic:l}).range(l.from):p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new I(s,n,$(s))}}function $(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new di(i,o,s.diagnostic),!1}),r}function mi(t,e){return!!(t.effects.some(n=>n.is(Ne))||t.changes.touchesRange(e.pos))}function Kt(t,e){return t.field(b,!1)?e:e.concat(D.appendConfig.of([b,y.decorations.compute([b],n=>{let{selected:r,panel:i}=n.field(b);return!r||!i||r.from==r.to?p.none:p.set([pi.range(r.from,r.to)])}),ln(yi,{hideOn:mi}),Mi]))}function gi(t,e){return{effects:Kt(t,[Ne.of(e)])}}const Ne=D.define(),We=D.define(),Jt=D.define(),b=oe.define({create(){return new I(p.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=$(n,t.selected.diagnostic,i)||$(n,null,i)}t=new I(n,t.panel,r)}for(let n of e.effects)n.is(Ne)?t=I.init(n.value,t.panel,e.state):n.is(We)?t=new I(t.diagnostics,n.value?fe.open:null,t.selected):n.is(Jt)&&(t=new I(t.diagnostics,t.panel,n.value));return t},provide:t=>[De.from(t,e=>e.panel),y.decorations.from(t,e=>e.diagnostics)]}),pi=p.mark({class:"cm-lintRange cm-lintRange-active"});function yi(t,e,n){let{diagnostics:r}=t.state.field(b),i=[],o=2e8,s=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(c,a,{spec:h})=>{e>=c&&e<=a&&(c==a||(e>c||n>0)&&(e<a||n<0))&&(i.push(h.diagnostic),o=Math.min(c,o),s=Math.max(a,s))});let l=t.state.facet(N).tooltipFilter;return l&&(i=l(i)),i.length?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:xi(t,i)}}}:null}function xi(t,e){return g("ul",{class:"cm-tooltip-lint"},e.map(n=>Qt(t,n,!1)))}const ki=t=>{let e=t.state.field(b,!1);(!e||!e.panel)&&t.dispatch({effects:Kt(t.state,[We.of(!0)])});let n=U(t,fe.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},je=t=>{let e=t.state.field(b,!1);return!e||!e.panel?!1:(t.dispatch({effects:We.of(!1)}),!0)},Si=t=>{let e=t.state.field(b,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},bi=[{key:"Mod-Shift-m",run:ki,preventDefault:!0},{key:"F8",run:Si}],Ci=Le.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(N);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(N);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(gi(this.view.state,i))},r=>{an(this.view.state,r)})}}update(t){let e=t.state.facet(N);(t.docChanged||e!=t.startState.facet(N))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),N=K.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},se(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Ci});function _t(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Qt(t,e,n){var r;let i=n?_t(e.actions):[];return g("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},g("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let l=u=>{u.preventDefault();let m=$(t.state.field(b).diagnostics,e);m&&o.apply(t,m.from,m.to)},{name:c}=o,a=i[s]?c.indexOf(i[s]):-1,h=a<0?c:[c.slice(0,a),g("u",c.slice(a,a+1)),c.slice(a+1)];return g("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${a<0?"":` (access key "${i[s]})"`}.`},h)}),e.source&&g("div",{class:"cm-diagnosticSource"},e.source))}class Ai extends cn{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return g("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Ye{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Qt(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class fe{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)je(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=_t(o.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==i.keyCode){let c=$(this.view.state.field(b).diagnostics,o);c&&o.actions[l].apply(e,c.from,c.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=g("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=g("div",{class:"cm-panel-lint"},this.list,g("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>je(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(b).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(b),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:c})=>{let a=-1,h;for(let u=r;u<this.items.length;u++)if(this.items[u].diagnostic==c.diagnostic){a=u;break}a<0?(h=new Ye(this.view,c.diagnostic),this.items.splice(r,0,h),i=!0):(h=this.items[a],a>r&&(this.items.splice(r,a-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Ye(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{s.top<l.top?this.list.scrollTop-=l.top-s.top:s.bottom>l.bottom&&(this.list.scrollTop+=s.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(b),r=$(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Jt.of(r)})}static open(e){return new fe(e)}}function vi(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ye(t){return vi(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Mi=y.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ye("#d11")},".cm-lintRange-warning":{backgroundImage:ye("orange")},".cm-lintRange-info":{backgroundImage:ye("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var Bi=function(e){e===void 0&&(e={});var n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(Mn)),e.defaultKeymap!==!1&&(n=n.concat(fi)),e.searchKeymap!==!1&&(n=n.concat(Zn)),e.historyKeymap!==!1&&(n=n.concat(br)),e.foldKeymap!==!1&&(n=n.concat(hn)),e.completionKeymap!==!1&&(n=n.concat(Ln)),e.lintKeymap!==!1&&(n=n.concat(bi));var r=[];return e.lineNumbers!==!1&&r.push(un()),e.highlightActiveLineGutter!==!1&&r.push(fn()),e.highlightSpecialChars!==!1&&r.push(dn()),e.history!==!1&&r.push(fr()),e.foldGutter!==!1&&r.push(mn()),e.drawSelection!==!1&&r.push(gn()),e.dropCursor!==!1&&r.push(pn()),e.allowMultipleSelections!==!1&&r.push(Ze.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(yn()),e.syntaxHighlighting!==!1&&r.push(ot(xn,{fallback:!0})),e.bracketMatching!==!1&&r.push(kn()),e.closeBrackets!==!1&&r.push(Dn()),e.autocompletion!==!1&&r.push(Bn()),e.rectangularSelection!==!1&&r.push(Sn()),e.crosshairCursor!==!1&&r.push(bn()),e.highlightActiveLine!==!1&&r.push(Cn()),e.highlightSelectionMatches!==!1&&r.push(In()),e.tabSize&&typeof e.tabSize=="number"&&r.push(rt.of(" ".repeat(e.tabSize))),r.concat([An.of(n.flat())]).filter(Boolean)},jt=t=>{var{theme:e,settings:n,styles:r}=t,i={"&":{backgroundColor:n.background,color:n.foreground},".cm-gutters":{}};n.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(i[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(i[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(i[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(i[".cm-content"]={caretColor:n.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),i[".cm-activeLineGutter"]=o,n.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:n.selection}),n.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var s=y.theme(i,{dark:e==="dark"}),l=vn.define(r),c=[s,ot(l)];return c},wi=jt({theme:"light",settings:{background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},styles:[{tag:[f.comment,f.bracket],color:"#6a737d"},{tag:[f.className,f.propertyName],color:"#6f42c1"},{tag:[f.variableName,f.attributeName,f.number,f.operator],color:"#005cc5"},{tag:[f.keyword,f.typeName,f.typeOperator,f.typeName],color:"#d73a49"},{tag:[f.string,f.meta,f.regexp],color:"#032f62"},{tag:[f.name,f.quote],color:"#22863a"},{tag:[f.heading],color:"#24292e",fontWeight:"bold"},{tag:[f.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[f.deleted],color:"#b31d28",backgroundColor:"ffeef0"}]}),Ri=jt({theme:"dark",settings:{background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},styles:[{tag:[f.comment,f.bracket],color:"#8b949e"},{tag:[f.className,f.propertyName],color:"#d2a8ff"},{tag:[f.variableName,f.attributeName,f.number,f.operator],color:"#79c0ff"},{tag:[f.keyword,f.typeName,f.typeOperator,f.typeName],color:"#ff7b72"},{tag:[f.string,f.meta,f.regexp],color:"#a5d6ff"},{tag:[f.name,f.quote],color:"#7ee787"},{tag:[f.heading],color:"#d2a8ff",fontWeight:"bold"},{tag:[f.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[f.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"}]});export{Ri as a,wi as b,Bi as c,Rn as g,dt as o};
